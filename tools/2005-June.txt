From gramps at apple.com  Sat Jun  4 23:07:40 2005
From: gramps at apple.com (Don Melton)
Date: Tue Oct  9 17:52:52 2007
Subject: [Webkit-dev] Test
Message-ID: <88FACF3C-472A-4008-9649-38A7628A6EB8@apple.com>

This is just a test message.  Ignore it when you read it in the  
archives. ;)

-- 
Gramps



From mjs at apple.com  Mon Jun  6 23:22:49 2005
From: mjs at apple.com (Maciej Stachowiak)
Date: Tue Oct  9 17:52:52 2007
Subject: [Webkit-dev] test
Message-ID: <A34C95E1-E2C7-4723-B412-3D0953FD7AB3@apple.com>


test


From darin at apple.com  Mon Jun  6 23:25:38 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] test too
Message-ID: <725128AE-91F9-42FC-88BE-C2EC3E5C231E@apple.com>

I'm testing too.

From finlay.dobbie at gmail.com  Tue Jun  7 02:27:20 2005
From: finlay.dobbie at gmail.com (Finlay Dobbie)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] test too
In-Reply-To: <725128AE-91F9-42FC-88BE-C2EC3E5C231E@apple.com>
References: <725128AE-91F9-42FC-88BE-C2EC3E5C231E@apple.com>
Message-ID: <ab20c92d050607022729c341f9@mail.gmail.com>

On 6/7/05, Darin Adler <darin@apple.com> wrote:
> I'm testing too.

I felt left out, so I'm testing three. ;-)

 -- Finlay

From eseidel at apple.com  Tue Jun  7 01:23:44 2005
From: eseidel at apple.com (Eric Seidel)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] A bot
Message-ID: <187E0CB2-F613-435A-9F84-1113B589D382@apple.com>

FYI to all, there is now a bot on #webkit:  (not my doing!)

jibot

which blogs to:

http://hashjoiito.bloxus.com

-eric

From nicolas at pobox.com  Tue Jun  7 11:10:20 2005
From: nicolas at pobox.com (Nicolas Berloquin)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] building CVS with xcode 2.1
Message-ID: <5F9104F9-1ACF-4A9E-9ACF-AD07D451114A@pobox.com>

Hello !

I'm new to the list, but judging from the archive, I guess everyone  
is :D

First of all, bravo for the clean cvs update/build scripts and docs !

I downloaded the latest CVS sources and started builing on tiger  
10.4.1 with XCode 2.1 (yesterday's xcode release).
It seems that webkit building has not been tested with this version yet.

I get a series of errors, the first one being about using -buildstyle  
which is deprecated (instead of the new -configuration).

I edited the Makefile.am in each directory, and the build-webkit  
script to change that, and the error is no longer reported.
But I still get the following error :

Ld /Users/nicolas/devs/xcodebuilds/Deployment/WebKit.framework/ 
Versions/A/WebKit normal ppc
     mkdir /Users/nicolas/devs/xcodebuilds/Deployment/ 
WebKit.framework/Versions/A
     cd /Users/nicolas/devs/webkit/WebKit
     setenv MACOSX_DEPLOYMENT_TARGET 10.3
     /usr/bin/g++-4.0 -o /Users/nicolas/devs/xcodebuilds/Deployment/ 
WebKit.framework/Versions/A/WebKit -L/Users/nicolas/devs/xcodebuilds/ 
Deployment -F/Users/nicolas/devs/xcodebuilds/Deployment -F/System/ 
Library/Frameworks/WebKit.framework/Frameworks -F/System/Library/ 
Frameworks/ApplicationServices.framework/Frameworks -F/System/Library/ 
Frameworks/Carbon.framework/Frameworks -F/System/Library/ 
PrivateFrameworks -F/Users/nicolas/devs/xcodebuilds/WebKit.build/ 
Deployment/WebKit.build/DerivedSources -filelist /Users/nicolas/devs/ 
xcodebuilds/WebKit.build/Deployment/WebKit.build/Objects-normal/ppc/ 
WebKit.LinkFileList -framework ApplicationServices -framework Carbon - 
framework Cocoa -framework JavaScriptCore -framework WebCore - 
licucore -framework Security -lWebKitSystemInterface -arch ppc -Wl,- 
exported_symbols_list,WebKit.exp -Wl,-single_module -dynamiclib - 
compatibility_version 1 -current_version 1 -install_name /System/ 
Library/Frameworks/WebKit.framework/Versions/A/WebKit

/usr/bin/libtool: can't locate file for: -lWebKitSystemInterface
/usr/bin/libtool: file: -lWebKitSystemInterface is not an object file  
(not allowed in a library)


And I don't know what I can do about that.

What you need to know is that the deprecated error that I had was at  
the beginning of the build, right after
print "${productDir}/libWebKitSystemInterface.a";
And I also get this warning right after the print of  
libWebKitSystemInterface.a:
WARNING: The Xcode plugin at path /Library/Application Support/Apple/ 
Developer Tools/Plug-ins/J2EEAssistant.pbplugin is missing the  
XCPluginHasUI Info.plist key, it is assumed to have UI and will not  
be loaded by xcodebuild.

which doesn't seem to be related to the build error.

One more thing, a suggestion :
Once I get it to compile, I plan to modify the target CPU/pipeline  
etc to -Os and the G5 cpu. I guess that a lot of mac heads will want to
try that type of optimizations. I also noticed that the deployment  
target is 10.3.
Maybe you could put all those options in a separate global file that  
could be easilly modified ?

thanks ^_^ 

From toby at opendarwin.org  Tue Jun  7 11:29:38 2005
From: toby at opendarwin.org (Toby Peterson)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] building CVS with xcode 2.1
In-Reply-To: <5F9104F9-1ACF-4A9E-9ACF-AD07D451114A@pobox.com>
References: <5F9104F9-1ACF-4A9E-9ACF-AD07D451114A@pobox.com>
Message-ID: <09E10C3A-B530-403F-BD93-98671A61417B@opendarwin.org>

On 07 Jun 2005, at 14.10, Nicolas Berloquin wrote:

> /usr/bin/libtool: can't locate file for: -lWebKitSystemInterface
> /usr/bin/libtool: file: -lWebKitSystemInterface is not an object  
> file (not allowed in a library)

It needs a small tweak to build with Xcode 2.1. Here's what you can do:

cd <builddir>/Deployment
ln -s ../libWebKitSystemInterface.a
ln -s ../usr

It should work fine, once you do that.

- Toby

From cmpanas at mac.com  Tue Jun  7 13:24:22 2005
From: cmpanas at mac.com (Christian Panas)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] problem building webkit
Message-ID: <67ADCB9D-956F-4C67-8C90-94676EADBCD2@mac.com>

Hey,

I'm a crude newbie to this stuff, but I followed the instructions to  
the letter on updating webkit and then building it.

After the update, I ran

     WebKitTools/Scripts/build-webkit

The terminal runs the process, but then stops here

Ld "/Users/taki/Custom Builds/WebCore.framework/Versions/A/WebCore"  
normal ppc
     setenv MACOSX_DEPLOYMENT_TARGET 10.3
     cd /Users/taki/WebCore
     /usr/bin/g++-4.0 -o "/Users/taki/Custom Builds/WebCore.framework/ 
Versions/A/WebCore" "-L/Users/taki/Custom Builds" -L/Users/taki/ 
Custom -LBuilds/WebCore.build/WebCore.build/DerivedSources "-F/Users/ 
taki/Custom Builds" -F/System/Library/Frameworks/WebKit.framework/ 
Frameworks -filelist "/Users/taki/Custom Builds/WebCore.build/ 
WebCore.build/Objects-normal/ppc/WebCore.LinkFileList" -framework  
ApplicationServices -framework Carbon -framework Cocoa -framework  
JavaScriptCore -licucore -lxslt -arch ppc -Wl,- 
exported_symbols_list,WebCore.exp -Wl,-single_module -dynamiclib - 
compatibility_version 1 -current_version 1 -install_name /System/ 
Library/Frameworks/WebKit.framework/Versions/A/Frameworks/ 
WebCore.framework/Versions/A/WebCore -lxml2-WebCore
/usr/bin/libtool: can't locate file for: -lxml2-WebCore
/usr/bin/libtool: file: -lxml2-WebCore is not an object file (not  
allowed in a library)
** BUILD FAILED **


How do I get this -lxml2-WebCore file that it's looking for?


Christian

From toby at opendarwin.org  Tue Jun  7 13:28:11 2005
From: toby at opendarwin.org (Toby Peterson)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] problem building webkit
In-Reply-To: <67ADCB9D-956F-4C67-8C90-94676EADBCD2@mac.com>
References: <67ADCB9D-956F-4C67-8C90-94676EADBCD2@mac.com>
Message-ID: <7F40A04D-60E7-43F1-877E-2DC439A6A364@opendarwin.org>

On 07 Jun 2005, at 16.24, Christian Panas wrote:

> Ld "/Users/taki/Custom Builds/WebCore.framework/Versions/A/WebCore"  
> normal ppc
>     setenv MACOSX_DEPLOYMENT_TARGET 10.3
>     cd /Users/taki/WebCore
>     /usr/bin/g++-4.0 -o "/Users/taki/Custom Builds/ 
> WebCore.framework/Versions/A/WebCore" "-L/Users/taki/Custom Builds"  
> -L/Users/taki/Custom -LBuilds/WebCore.build/WebCore.build/ 
> DerivedSources "-F/Users/taki/Custom Builds" -F/System/Library/ 
> Frameworks/WebKit.framework/Frameworks -filelist "/Users/taki/ 
> Custom Builds/WebCore.build/WebCore.build/Objects-normal/ppc/ 
> WebCore.LinkFileList" -framework ApplicationServices -framework  
> Carbon -framework Cocoa -framework JavaScriptCore -licucore -lxslt - 
> arch ppc -Wl,-exported_symbols_list,WebCore.exp -Wl,-single_module - 
> dynamiclib -compatibility_version 1 -current_version 1 - 
> install_name /System/Library/Frameworks/WebKit.framework/Versions/A/ 
> Frameworks/WebCore.framework/Versions/A/WebCore -lxml2-WebCore
> /usr/bin/libtool: can't locate file for: -lxml2-WebCore
> /usr/bin/libtool: file: -lxml2-WebCore is not an object file (not  
> allowed in a library)
> ** BUILD FAILED **
>
>
> How do I get this -lxml2-WebCore file that it's looking for?

This error occurs because you've got a space in your build path. This  
should actually be fixed; run WebKitTools/Scripts/update-webkit and  
try again.

If it still doesn't work, rename your build directory.

- Toby

From bwaters at nrao.edu  Tue Jun  7 16:08:49 2005
From: bwaters at nrao.edu (Boyd Waters)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Safari with WebKit, can't drag URLs
Message-ID: <35627DD6-9A41-43ED-9C20-E5B6417C9C5B@nrao.edu>

Just built the WebKit with the XCode 2.1 work-arounds, and sure  
enough my Safari passes the Acid2 test!

But now I cannot drag URLs from the location bar of Safari to (for  
example) the Finder. With the previous WebKit, I was able to drag  
URLs to the Finder to save "webloc" files.

Each time I attempt to drag a URL from the location bar icon (the  
favicon), a message is printed to the console:

> 2005-06-07 17:04:01.570 Safari[7622] *** -[NSCFArray addObject:]:  
> attempt to insert nil
> 2005-06-07 17:04:40.611 Safari[7622] *** -[NSCFArray addObject:]:  
> attempt to insert nil
> 2005-06-07 17:04:43.172 Safari[7622] *** -[NSCFArray addObject:]:  
> attempt to insert nil
> 2005-06-07 17:04:57.394 Safari[7622] *** -[NSCFArray addObject:]:  
> attempt to insert nil
> 2005-06-07 17:05:01.326 Safari[7622] *** -[NSCFArray addObject:]:  
> attempt to insert nil
>

Still, it was easy to build, and it seems to work quite well!

~ boyd

Boyd Waters
National Radio Astronomy Observatory
Socorro, New Mexico
http://www.aoc.nrao.edu/~bwaters


From HanspeterSchaub at mac.com  Tue Jun  7 16:12:53 2005
From: HanspeterSchaub at mac.com (Hanspeter Schaub)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Safari with WebKit, can't drag URLs
In-Reply-To: <35627DD6-9A41-43ED-9C20-E5B6417C9C5B@nrao.edu>
References: <35627DD6-9A41-43ED-9C20-E5B6417C9C5B@nrao.edu>
Message-ID: <5B9F8F74-3E25-4A07-95FC-1268CBEA48C2@mac.com>

I'm finding the same thing happening on my system (10.4.1).  But I  
built it with XCode 2.0.

HP

---------------------------------------------------------------
Hanspeter Schaub

Phone:     (540) 763-8370
Email:    HanspeterSchaub@mac.com
Web:    http://homepage.mac.com/hanspeterschaub




On Jun 7, 2005, at 7:08 PM, Boyd Waters wrote:

> Just built the WebKit with the XCode 2.1 work-arounds, and sure  
> enough my Safari passes the Acid2 test!
>
> But now I cannot drag URLs from the location bar of Safari to (for  
> example) the Finder. With the previous WebKit, I was able to drag  
> URLs to the Finder to save "webloc" files.
>
> Each time I attempt to drag a URL from the location bar icon (the  
> favicon), a message is printed to the console:
>
>
>> 2005-06-07 17:04:01.570 Safari[7622] *** -[NSCFArray addObject:]:  
>> attempt to insert nil
>> 2005-06-07 17:04:40.611 Safari[7622] *** -[NSCFArray addObject:]:  
>> attempt to insert nil
>> 2005-06-07 17:04:43.172 Safari[7622] *** -[NSCFArray addObject:]:  
>> attempt to insert nil
>> 2005-06-07 17:04:57.394 Safari[7622] *** -[NSCFArray addObject:]:  
>> attempt to insert nil
>> 2005-06-07 17:05:01.326 Safari[7622] *** -[NSCFArray addObject:]:  
>> attempt to insert nil
>>
>>
>
> Still, it was easy to build, and it seems to work quite well!
>
> ~ boyd
>
> Boyd Waters
> National Radio Astronomy Observatory
> Socorro, New Mexico
> http://www.aoc.nrao.edu/~bwaters
>
> _______________________________________________
> webkit-dev mailing list
> webkit-dev@opendarwin.org
> http://www.opendarwin.org/mailman/listinfo/webkit-dev
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.macosforge.org/pipermail/webkit-dev/attachments/20050607/eb4ab02e/attachment.html
From bwaters at nrao.edu  Tue Jun  7 16:17:28 2005
From: bwaters at nrao.edu (Boyd Waters)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Safari with WebKit, can't drag URLs
In-Reply-To: <5B9F8F74-3E25-4A07-95FC-1268CBEA48C2@mac.com>
References: <35627DD6-9A41-43ED-9C20-E5B6417C9C5B@nrao.edu>
	<5B9F8F74-3E25-4A07-95FC-1268CBEA48C2@mac.com>
Message-ID: <73BF0174-2B19-449A-9AC6-C11441650D96@nrao.edu>

I'm running with Tiger 10.4.2 build 8C26
  ~ boyd


On Jun 7, 2005, at 5:12 PM, Hanspeter Schaub wrote:

> I'm finding the same thing happening on my system (10.4.1).  But I  
> built it with XCode 2.0.
>
>
> ---------------------------------------------------------------
> Hanspeter Schaub
>
>
> On Jun 7, 2005, at 7:08 PM, Boyd Waters wrote:
>
>> Just built the WebKit with the XCode 2.1 work-arounds, and sure  
>> enough my Safari passes the Acid2 test!
>>
>> But now I cannot drag URLs from the location bar of Safari to (for  
>> example) the Finder. With the previous WebKit, I was able to drag  
>> URLs to the Finder to save "webloc" files.
>>
>> Each time I attempt to drag a URL from the location bar icon (the  
>> favicon), a message is printed to the console:
>>
>>
>>> 2005-06-07 17:04:01.570 Safari[7622] *** -[NSCFArray addObject:]:  
>>> attempt to insert nil
>>> 2005-06-07 17:04:40.611 Safari[7622] *** -[NSCFArray addObject:]:  
>>> attempt to insert nil
>>> 2005-06-07 17:04:43.172 Safari[7622] *** -[NSCFArray addObject:]:  
>>> attempt to insert nil
>>> 2005-06-07 17:04:57.394 Safari[7622] *** -[NSCFArray addObject:]:  
>>> attempt to insert nil
>>> 2005-06-07 17:05:01.326 Safari[7622] *** -[NSCFArray addObject:]:  
>>> attempt to insert nil
>>>
>>>
>>
>> Still, it was easy to build, and it seems to work quite well!
>>
>> ~ boyd
>>
>> Boyd Waters
>> National Radio Astronomy Observatory
>> Socorro, New Mexico
>> http://www.aoc.nrao.edu/~bwaters
>>
>> _______________________________________________
>> webkit-dev mailing list
>> webkit-dev@opendarwin.org
>> http://www.opendarwin.org/mailman/listinfo/webkit-dev
>>
>
> _______________________________________________
> webkit-dev mailing list
> webkit-dev@opendarwin.org
> http://www.opendarwin.org/mailman/listinfo/webkit-dev
>


From gramps at apple.com  Tue Jun  7 16:24:04 2005
From: gramps at apple.com (Don Melton)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Safari with WebKit, can't drag URLs
In-Reply-To: <35627DD6-9A41-43ED-9C20-E5B6417C9C5B@nrao.edu>
References: <35627DD6-9A41-43ED-9C20-E5B6417C9C5B@nrao.edu>
Message-ID: <BE6DDF48-7FC9-4E08-AF9B-CAAB09BBC8B4@apple.com>

Boyd,

Sounds like a bug, alright.  Please jump into Bugzilla and file a  
report on it.  See:

http://webkit.opendarwin.org/quality/reporting.html

... for the guidelines.  Thanks.

-- 
Don Melton
Director, Internet Technologies
Apple Computer


On Jun 7, 2005, at 4:08 PM, Boyd Waters wrote:

> Just built the WebKit with the XCode 2.1 work-arounds, and sure  
> enough my Safari passes the Acid2 test!
>
> But now I cannot drag URLs from the location bar of Safari to (for  
> example) the Finder. With the previous WebKit, I was able to drag  
> URLs to the Finder to save "webloc" files.
>
> Each time I attempt to drag a URL from the location bar icon (the  
> favicon), a message is printed to the console:
>
>
>> 2005-06-07 17:04:01.570 Safari[7622] *** -[NSCFArray addObject:]:  
>> attempt to insert nil
>> 2005-06-07 17:04:40.611 Safari[7622] *** -[NSCFArray addObject:]:  
>> attempt to insert nil
>> 2005-06-07 17:04:43.172 Safari[7622] *** -[NSCFArray addObject:]:  
>> attempt to insert nil
>> 2005-06-07 17:04:57.394 Safari[7622] *** -[NSCFArray addObject:]:  
>> attempt to insert nil
>> 2005-06-07 17:05:01.326 Safari[7622] *** -[NSCFArray addObject:]:  
>> attempt to insert nil
>>
>>
>
> Still, it was easy to build, and it seems to work quite well!
>
> ~ boyd
>
> Boyd Waters
> National Radio Astronomy Observatory
> Socorro, New Mexico
> http://www.aoc.nrao.edu/~bwaters
>
> _______________________________________________
> webkit-dev mailing list
> webkit-dev@opendarwin.org
> http://www.opendarwin.org/mailman/listinfo/webkit-dev
>


From darin at apple.com  Tue Jun  7 16:25:39 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Safari with WebKit, can't drag URLs
In-Reply-To: <35627DD6-9A41-43ED-9C20-E5B6417C9C5B@nrao.edu>
References: <35627DD6-9A41-43ED-9C20-E5B6417C9C5B@nrao.edu>
Message-ID: <73B7A045-3EB0-4D75-B16A-CFEF4AF9FCAC@apple.com>

On Jun 7, 2005, at 4:08 PM, Boyd Waters wrote:

> Just built the WebKit with the XCode 2.1 work-arounds, and sure  
> enough my Safari passes the Acid2 test!
>
> But now I cannot drag URLs from the location bar of Safari to (for  
> example) the Finder. With the previous WebKit, I was able to drag  
> URLs to the Finder to save "webloc" files.
>
> Each time I attempt to drag a URL from the location bar icon (the  
> favicon), a message is printed to the console:
>
>
>> 2005-06-07 17:04:01.570 Safari[7622] *** -[NSCFArray addObject:]:  
>> attempt to insert nil
>> 2005-06-07 17:04:40.611 Safari[7622] *** -[NSCFArray addObject:]:  
>> attempt to insert nil
>> 2005-06-07 17:04:43.172 Safari[7622] *** -[NSCFArray addObject:]:  
>> attempt to insert nil
>> 2005-06-07 17:04:57.394 Safari[7622] *** -[NSCFArray addObject:]:  
>> attempt to insert nil
>> 2005-06-07 17:05:01.326 Safari[7622] *** -[NSCFArray addObject:]:  
>> attempt to insert nil

Looks like a recently-introduced bug (introduced in the preparation  
for making WebKit open source).

Could you file a report in bugzilla? I'll be fixing this shortly.

     -- Darin


From bwaters at nrao.edu  Tue Jun  7 16:32:46 2005
From: bwaters at nrao.edu (Boyd Waters)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Safari with WebKit, can't drag URLs
In-Reply-To: <73B7A045-3EB0-4D75-B16A-CFEF4AF9FCAC@apple.com>
References: <35627DD6-9A41-43ED-9C20-E5B6417C9C5B@nrao.edu>
	<73B7A045-3EB0-4D75-B16A-CFEF4AF9FCAC@apple.com>
Message-ID: <2BFF8F74-4FFB-4933-B93B-1BF5926D33D9@nrao.edu>


On Jun 7, 2005, at 5:25 PM, Darin Adler wrote:

> On Jun 7, 2005, at 4:08 PM, Boyd Waters wrote:
>
>
>> Just built the WebKit with the XCode 2.1 work-arounds, and sure  
>> enough my Safari passes the Acid2 test!
>>
>> But now I cannot drag URLs from the location bar of Safari

> Looks like a recently-introduced bug (introduced in the preparation  
> for making WebKit open source).
>
> Could you file a report in bugzilla? I'll be fixing this shortly.

Done. Bug 3320.

~ boyd


From kevino at theolliviers.com  Tue Jun  7 17:13:11 2005
From: kevino at theolliviers.com (Kevin Ollivier)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] JSCore patch question and wxWebCore
Message-ID: <96BAA4B6-DC66-4A39-8BD4-8ABF25B62CBF@theolliviers.com>

Hi all,

First off, I wanted to say I'm really impressed with Apple's  
commitment to open source. IMHO, the actions you've taken go above  
and beyond the call of duty and show an openness that few companies  
are willing to risk. And I think in the end it will pay off big for  
anyone using WebCore or derivatives. In fact, as the developer of  
wxWebKitCtrl (a WebKit wrapper for wxMac), open sourcing this will  
hopefully help me track down a couple positioning bugs that have  
eluded me thus far. So thank you for doing this! :-)

However, I do have more to say than that. :-) Vaclav Slavik (the  
author of wxWidgets' wxHTML support, among many other things) and I  
have embarked on a rather ambitious project, which is the development  
of a wxWidgets implementation of WebCore. I do recall one of the  
developers saying they'd be open to/interested in a multi-platform  
WebCore. ;-) We'd also like to develop an ActiveX front end as well,  
so that apps outside of wxWidgets apps on Windows can take advantage  
of WebCore. We've been working on it for a couple weeks now and we  
have setup a SVN repository for it at:

http://developer.berlios.de/projects/wxwebcore

We've still got a long ways to go, but we've gotten a fair amount of  
files compiling these past couple weeks (both on Mac and Linux) and  
hope within a month or so that we can move towards a basic prototype.  
Related to this project, I had a couple questions for WebKit developers:

1) We have a patch for JSCore 412 that includes some simple  
compilation fixes like added headers and such to get it to compile on  
Linux. Are you interested in this, and if so, do we just submit it to  
the WebKit bugzilla?

2) Is the WebKit site and mailing list going to be the primary  
discussion and project space for WebCore as well now? As WebKit is a  
superset, I wasn't sure if this was more appropriate here, or if  
WebCore's discussion forum was a more appropriate place.

Anyways, the newly open-sourced WebKit will definitely help us in our  
implementation, and I hope that our work can be useful to the WebKit  
development team as well. It will certainly be of great benefit to  
the wxWidgets project!

We welcome any feedback on the project, and will be happy to try and  
answer any questions you may have.

Thanks,

Kevin

From cmpanas at mac.com  Tue Jun  7 17:43:39 2005
From: cmpanas at mac.com (Christian Panas)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] problem building webkit
In-Reply-To: <7F40A04D-60E7-43F1-877E-2DC439A6A364@opendarwin.org>
References: <67ADCB9D-956F-4C67-8C90-94676EADBCD2@mac.com>
	<7F40A04D-60E7-43F1-877E-2DC439A6A364@opendarwin.org>
Message-ID: <A05B577D-E732-46F9-A048-266798FC3A21@mac.com>

Toby,

Many thanks for the advice. Worked like a charm. I then had to  
comment out the lines in the run-safari script that checked to see if  
the frameworks are there (for some reason, it kept looking  
erroneously in the Deployment folder) to get it to work, but now it's  
all ok, and Safari is blisteringly fast.

Christian

On Jun 7, 2005, at 11:28 PM, Toby Peterson wrote:

> On 07 Jun 2005, at 16.24, Christian Panas wrote:
>
>
>> Ld "/Users/taki/Custom Builds/WebCore.framework/Versions/A/ 
>> WebCore" normal ppc
>>     setenv MACOSX_DEPLOYMENT_TARGET 10.3
>>     cd /Users/taki/WebCore
>>     /usr/bin/g++-4.0 -o "/Users/taki/Custom Builds/ 
>> WebCore.framework/Versions/A/WebCore" "-L/Users/taki/Custom  
>> Builds" -L/Users/taki/Custom -LBuilds/WebCore.build/WebCore.build/ 
>> DerivedSources "-F/Users/taki/Custom Builds" -F/System/Library/ 
>> Frameworks/WebKit.framework/Frameworks -filelist "/Users/taki/ 
>> Custom Builds/WebCore.build/WebCore.build/Objects-normal/ppc/ 
>> WebCore.LinkFileList" -framework ApplicationServices -framework  
>> Carbon -framework Cocoa -framework JavaScriptCore -licucore -lxslt  
>> -arch ppc -Wl,-exported_symbols_list,WebCore.exp -Wl,- 
>> single_module -dynamiclib -compatibility_version 1 - 
>> current_version 1 -install_name /System/Library/Frameworks/ 
>> WebKit.framework/Versions/A/Frameworks/WebCore.framework/Versions/ 
>> A/WebCore -lxml2-WebCore
>> /usr/bin/libtool: can't locate file for: -lxml2-WebCore
>> /usr/bin/libtool: file: -lxml2-WebCore is not an object file (not  
>> allowed in a library)
>> ** BUILD FAILED **
>>
>>
>> How do I get this -lxml2-WebCore file that it's looking for?
>>
>
> This error occurs because you've got a space in your build path.  
> This should actually be fixed; run WebKitTools/Scripts/update- 
> webkit and try again.
>
> If it still doesn't work, rename your build directory.
>
> - Toby
>


From robert at elastica.com  Tue Jun  7 18:38:08 2005
From: robert at elastica.com (Robert Nicholson)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] WebKitTool/checkout errors.
Message-ID: <B18EC88E-33E2-48C1-A30F-41E94BA2FDEF@elastica.com>

After reading dave's blog I tried

Is this protocol error expected?

cvs -d :pserver:anonymous@anoncvs.opensource.apple.com:/cvs/root co - 
P WebKitTools
cvs server: Updating WebKitTools
U WebKitTools/ChangeLog
U WebKitTools/checkout
cvs server: Updating WebKitTools/DumpRenderTree
U WebKitTools/DumpRenderTree/DumpRenderTree.m
U WebKitTools/DumpRenderTree/DumpRenderTreePrefix.h
cvs server: Updating WebKitTools/DumpRenderTree/DumpRenderTree.xcode
U WebKitTools/DumpRenderTree/DumpRenderTree.xcode/.cvsignore
U WebKitTools/DumpRenderTree/DumpRenderTree.xcode/project.pbxproj
cvs server: Updating WebKitTools/Scripts
U WebKitTools/Scripts/build-dumprendertree
U WebKitTools/Scripts/build-webkit
U WebKitTools/Scripts/run-safari
U WebKitTools/Scripts/run-webkit-tests
U WebKitTools/Scripts/update-webkit
annie:~/Programming/Objective-C robert$ WebKitTools/checkout
CVS root is :pserver:anonymous@anoncvs.opensource.apple.com:/cvs/root
Checking out WebKitTools (again), JavaScriptCore, WebCore,  
WebKitLibraries, and WebKit
protocol error: directory '/Network/Source/CVS/Apple/Frameworks/ 
JavaScriptCore' not within root '/cvs/root'

===============================================================
Web Kit sources are now checked out and ready to build.
You can build by projects in Xcode or with the build-webkit
script. The build-webkit script is inside WebKitTools/Scripts
along with other useful scripts; it's a good idea to put that
directory into your shell's search path.
===============================================================

From mailinglists at geeksrus.com  Tue Jun  7 18:39:09 2005
From: mailinglists at geeksrus.com (Steven Riggins)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Reducing samples
Message-ID: <056CEA35-9CCE-498D-B626-8A1791766916@geeksrus.com>

hi folks :)

I built today's webkit and was taking it for a spin.  I have one site  
(a dating site) in which I get replicable crashes in an unknown thread.

I saved an archive of the page, converted it to xml, but it is still  
unreadable as far as reducing goes.

Any tips on the best way to reduce a third-party's page?

Steve

From justin at xiondigital.net  Tue Jun  7 19:27:58 2005
From: justin at xiondigital.net (Justin Haygood)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Porting to Windows
Message-ID: <42A657AE.7090900@xiondigital.net>

I'm trying to port JavaScriptCore to Windows... doesn't look to easy.

KJS/PCRE is much easier to port & combine than JavaScriptCore's KJS/PCRE.

for some reason, the bla_object.lut.h files created from Perl aren't 
liked to well by the compiler I'm using (MSVC 8). Also, is grammar.y 
grammar.h once ran thru bison?

Just some questions to help me in my porting process. Also, if I port a 
file, but not the entire thing, should i go ahead and submit a patch for it?

--Justin Haygood

From cblu at apple.com  Tue Jun  7 19:47:11 2005
From: cblu at apple.com (Chris Blumenberg)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Reducing samples
In-Reply-To: <056CEA35-9CCE-498D-B626-8A1791766916@geeksrus.com>
References: <056CEA35-9CCE-498D-B626-8A1791766916@geeksrus.com>
Message-ID: <0238CFF8-0A49-487E-895D-D7EB33D0CB8E@apple.com>

You may be crashing in a thread owned by Safari since we build Safari  
without symbols. You could try one of our sample apps such as  
MiniBrowser in /Developer/Examples/WebKit. If it doesn't crash, it's  
safe to say that this is a Safari-specific problem. I suggest filing  
a bug and hopefully we can track it down.

-- chris

On Jun 7, 2005, at 6:39 PM, Steven Riggins wrote:

> hi folks :)
>
> I built today's webkit and was taking it for a spin.  I have one  
> site (a dating site) in which I get replicable crashes in an  
> unknown thread.
>
> I saved an archive of the page, converted it to xml, but it is  
> still unreadable as far as reducing goes.
>
> Any tips on the best way to reduce a third-party's page?
>
> Steve
> _______________________________________________
> webkit-dev mailing list
> webkit-dev@opendarwin.org
> http://www.opendarwin.org/mailman/listinfo/webkit-dev
>


From timber at lava.net  Tue Jun  7 21:38:16 2005
From: timber at lava.net (Colin Barrett)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Porting to Windows
In-Reply-To: <42A657AE.7090900@xiondigital.net>
References: <42A657AE.7090900@xiondigital.net>
Message-ID: <3B68CE8E-2153-4658-B517-7B9E11E42CF6@lava.net>

I'm only passingly familiar with it, but it depends on which version  
of bison you have. Bison 1.2 produces "grammar.cpp.h" and Bison 2.0  
produces "grammar.hpp". I think. Toby, or anyone else, feel free to  
weigh in. IANABP (I am not a Bison programmer ;)

- Colin

On Jun 7, 2005, at 4:27 PM, Justin Haygood wrote:

> for some reason, the bla_object.lut.h files created from Perl  
> aren't liked to well by the compiler I'm using (MSVC 8). Also, is  
> grammar.y grammar.h once ran thru bison?
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.macosforge.org/pipermail/webkit-dev/attachments/20050607/1b5cb1a6/attachment.html
From toby at opendarwin.org  Tue Jun  7 21:40:42 2005
From: toby at opendarwin.org (Toby Peterson)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Porting to Windows
In-Reply-To: <3B68CE8E-2153-4658-B517-7B9E11E42CF6@lava.net>
References: <42A657AE.7090900@xiondigital.net>
	<3B68CE8E-2153-4658-B517-7B9E11E42CF6@lava.net>
Message-ID: <C44774C9-0271-483B-BA0A-185FDA10FD75@opendarwin.org>

On 08 Jun 2005, at 00.38, Colin Barrett wrote:

> I'm only passingly familiar with it, but it depends on which  
> version of bison you have. Bison 1.2 produces "grammar.cpp.h" and  
> Bison 2.0 produces "grammar.hpp". I think. Toby, or anyone else,  
> feel free to weigh in. IANABP (I am not a Bison programmer ;)

Yeah, and the shell script phase creates grammar.h from whichever  
file is created.

- Toby

From mjs at apple.com  Tue Jun  7 21:58:48 2005
From: mjs at apple.com (Maciej Stachowiak)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Reducing samples
In-Reply-To: <056CEA35-9CCE-498D-B626-8A1791766916@geeksrus.com>
References: <056CEA35-9CCE-498D-B626-8A1791766916@geeksrus.com>
Message-ID: <842680D2-78B9-4099-AFA9-BE9312AC523B@apple.com>


On Jun 7, 2005, at 6:39 PM, Steven Riggins wrote:

> hi folks :)
>
> I built today's webkit and was taking it for a spin.  I have one  
> site (a dating site) in which I get replicable crashes in an  
> unknown thread.
>
> I saved an archive of the page, converted it to xml, but it is  
> still unreadable as far as reducing goes.
>
> Any tips on the best way to reduce a third-party's page?

One good way to get source to use as starting point on a bug  
reduction is to use the Firefox "save as complete HTML" feature.

Another option is to save off just the HTML file, and then use the  
Safari Activity window to find out and get at the other resources of  
the page, but this requires more manual steps.

Regards,
Maciej

PS Have you filed this bug in bugzilla yet? With a crashing bug, it's  
often possible to figure it out just by looking at the backtrace and  
reproducing the crash in the debugger, without the need for a reduction.



From mjs at apple.com  Tue Jun  7 22:12:25 2005
From: mjs at apple.com (Maciej Stachowiak)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Porting to Windows
In-Reply-To: <42A657AE.7090900@xiondigital.net>
References: <42A657AE.7090900@xiondigital.net>
Message-ID: <20D5E117-3C99-4F95-91A6-9D8A94649939@apple.com>


On Jun 7, 2005, at 7:27 PM, Justin Haygood wrote:

> I'm trying to port JavaScriptCore to Windows... doesn't look to easy.
>
> KJS/PCRE is much easier to port & combine than JavaScriptCore's KJS/ 
> PCRE.

If you tell us more about the specific problems you're having, then  
we can try to help you out.

> for some reason, the bla_object.lut.h files created from Perl  
> aren't liked to well by the compiler I'm using (MSVC 8).

What specific errors do you get?

> Also, is grammar.y grammar.h once ran thru bison?

Bison generates grammar.h and grammar.cpp from grammar.y.

> Just some questions to help me in my porting process. Also, if I  
> port a file, but not the entire thing, should i go ahead and submit  
> a patch for it?

If the code still compiles and works correctly on Mac OS X, then  
sure, a partial patch to fix building on Windows would be fine.  
Having it in the tree would allow others to join in and make further  
progress.

Regards,
Maciej




From robert at elastica.com  Tue Jun  7 22:28:19 2005
From: robert at elastica.com (Robert Nicholson)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] error: WebKitSystemInterface.h: No such file or
	directory
Message-ID: <165AD8F4-33AD-4AC6-8E37-C744F05F376E@elastica.com>

Anybody else get this problem whilst building?

CompileC /Users/robert/.build/WebKit.build/WebKit.build/Objects- 
normal/ppc/WebHistoryItem.o History.subproj/WebHistoryItem.m normal  
ppc objective-c com.apple.compilers.gcc.4_0
     setenv MACOSX_DEPLOYMENT_TARGET 10.3
     cd /Users/robert/Programming/Objective-C/WebKit
     /usr/bin/gcc-4.0 -x objective-c -arch ppc -pipe -Wno-trigraphs - 
fpascal-strings -fasm-blocks -g -Os -Werror -Wmissing-prototypes - 
DNDEBUG -DFRAMEWORK_NAME=WebKit -fmessage-length=0 -fobjc-direct- 
dispatch -fobjc-gc -mtune=G4 -I/Users/robert/.build/WebKit.build/ 
WebKit.build/WebKit.hmap -Wall -W -Wcast-align -Wchar-subscripts - 
Wformat-security -Wmissing-format-attribute -Wpointer-arith -Wwrite- 
strings -Wno-format-y2k -Wno-unused-parameter -F/Users/robert/.build - 
F/System/Library/Frameworks/WebKit.framework/Frameworks -F/System/ 
Library/Frameworks/ApplicationServices.framework/Frameworks -F/System/ 
Library/Frameworks/Carbon.framework/Frameworks -F/System/Library/ 
PrivateFrameworks -F/Users/robert/.build/WebKit.build/WebKit.build/ 
DerivedSources -I/Users/robert/.build/include -I/Users/robert/.build/ 
usr/local/include -Iicu -I/Users/robert/.build/WebKit.build/ 
WebKit.build/DerivedSources -Wbad-function-cast -Wmissing- 
declarations -Wnested-externs -include /Users/robert/.build/ 
WebKit.build/SharedCaches/WebKitPrefix-dchauuscogpubwcnhifqbwhayxnq/ 
WebKitPrefix.h -c /Users/robert/Programming/Objective-C/WebKit/ 
History.subproj/WebHistoryItem.m -o /Users/robert/.build/WebKit.build/ 
WebKit.build/Objects-normal/ppc/WebHistoryItem.o
/Users/robert/Programming/Objective-C/WebKit/History.subproj/ 
WebHistoryItem.m:45:34: error: WebKitSystemInterface.h: No such file  
or directory

From adele at apple.com  Tue Jun  7 22:48:05 2005
From: adele at apple.com (Adele Peterson)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Reducing samples
In-Reply-To: <842680D2-78B9-4099-AFA9-BE9312AC523B@apple.com>
References: <056CEA35-9CCE-498D-B626-8A1791766916@geeksrus.com>
	<842680D2-78B9-4099-AFA9-BE9312AC523B@apple.com>
Message-ID: <EC4C8044-39B5-4382-82CA-F2E7D617859A@apple.com>

Another good technique is to save the source of the page, and stick a  
base tag in the head to help you narrow it down.

<base href "http://www.blah.com">

Some other good tips can be found at http://webkit.opendarwin.org/ 
quality/reduction.html

-Adele

On Jun 7, 2005, at 9:58 PM, Maciej Stachowiak wrote:

>
> On Jun 7, 2005, at 6:39 PM, Steven Riggins wrote:
>
>
>> hi folks :)
>>
>> I built today's webkit and was taking it for a spin.  I have one  
>> site (a dating site) in which I get replicable crashes in an  
>> unknown thread.
>>
>> I saved an archive of the page, converted it to xml, but it is  
>> still unreadable as far as reducing goes.
>>
>> Any tips on the best way to reduce a third-party's page?
>>
>
> One good way to get source to use as starting point on a bug  
> reduction is to use the Firefox "save as complete HTML" feature.
>
> Another option is to save off just the HTML file, and then use the  
> Safari Activity window to find out and get at the other resources  
> of the page, but this requires more manual steps.
>
> Regards,
> Maciej
>
> PS Have you filed this bug in bugzilla yet? With a crashing bug,  
> it's often possible to figure it out just by looking at the  
> backtrace and reproducing the crash in the debugger, without the  
> need for a reduction.
>
>
> _______________________________________________
> webkit-dev mailing list
> webkit-dev@opendarwin.org
> http://www.opendarwin.org/mailman/listinfo/webkit-dev
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.macosforge.org/pipermail/webkit-dev/attachments/20050607/42e0bfaf/attachment.html
From toby at opendarwin.org  Tue Jun  7 23:32:04 2005
From: toby at opendarwin.org (Toby Peterson)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] error: WebKitSystemInterface.h: No such file or
	directory
In-Reply-To: <165AD8F4-33AD-4AC6-8E37-C744F05F376E@elastica.com>
References: <165AD8F4-33AD-4AC6-8E37-C744F05F376E@elastica.com>
Message-ID: <AA259E9B-3222-40EE-A286-EC87A6623B0C@opendarwin.org>

First of all, do you have /Users/robert/.build/usr/local/include/ 
WebKitSystemInterface.h ?

In either case, I'd recommend running WebKitTools/Scripts/update- 
webkit and trying again; a number of changes have been made to the  
build scripts.

- Toby

On 08 Jun 2005, at 01.28, Robert Nicholson wrote:

> Anybody else get this problem whilst building?
>
> CompileC /Users/robert/.build/WebKit.build/WebKit.build/Objects- 
> normal/ppc/WebHistoryItem.o History.subproj/WebHistoryItem.m normal  
> ppc objective-c com.apple.compilers.gcc.4_0
>     setenv MACOSX_DEPLOYMENT_TARGET 10.3
>     cd /Users/robert/Programming/Objective-C/WebKit
>     /usr/bin/gcc-4.0 -x objective-c -arch ppc -pipe -Wno-trigraphs - 
> fpascal-strings -fasm-blocks -g -Os -Werror -Wmissing-prototypes - 
> DNDEBUG -DFRAMEWORK_NAME=WebKit -fmessage-length=0 -fobjc-direct- 
> dispatch -fobjc-gc -mtune=G4 -I/Users/robert/.build/WebKit.build/ 
> WebKit.build/WebKit.hmap -Wall -W -Wcast-align -Wchar-subscripts - 
> Wformat-security -Wmissing-format-attribute -Wpointer-arith -Wwrite- 
> strings -Wno-format-y2k -Wno-unused-parameter -F/Users/ 
> robert/.build -F/System/Library/Frameworks/WebKit.framework/ 
> Frameworks -F/System/Library/Frameworks/ 
> ApplicationServices.framework/Frameworks -F/System/Library/ 
> Frameworks/Carbon.framework/Frameworks -F/System/Library/ 
> PrivateFrameworks -F/Users/robert/.build/WebKit.build/WebKit.build/ 
> DerivedSources -I/Users/robert/.build/include -I/Users/ 
> robert/.build/usr/local/include -Iicu -I/Users/robert/.build/ 
> WebKit.build/WebKit.build/DerivedSources -Wbad-function-cast - 
> Wmissing-declarations -Wnested-externs -include /Users/ 
> robert/.build/WebKit.build/SharedCaches/WebKitPrefix- 
> dchauuscogpubwcnhifqbwhayxnq/WebKitPrefix.h -c /Users/robert/ 
> Programming/Objective-C/WebKit/History.subproj/WebHistoryItem.m -o / 
> Users/robert/.build/WebKit.build/WebKit.build/Objects-normal/ppc/ 
> WebHistoryItem.o
> /Users/robert/Programming/Objective-C/WebKit/History.subproj/ 
> WebHistoryItem.m:45:34: error: WebKitSystemInterface.h: No such  
> file or directory
> _______________________________________________
> webkit-dev mailing list
> webkit-dev@opendarwin.org
> http://www.opendarwin.org/mailman/listinfo/webkit-dev
>


From toby at opendarwin.org  Tue Jun  7 23:35:21 2005
From: toby at opendarwin.org (Toby Peterson)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] WebKitTool/checkout errors.
In-Reply-To: <B18EC88E-33E2-48C1-A30F-41E94BA2FDEF@elastica.com>
References: <B18EC88E-33E2-48C1-A30F-41E94BA2FDEF@elastica.com>
Message-ID: <4E2F34E0-A35D-4F65-81D6-3C4F88D2742D@opendarwin.org>


On 07 Jun 2005, at 21.38, Robert Nicholson wrote:

> Is this protocol error expected?

> annie:~/Programming/Objective-C robert$ WebKitTools/checkout
> CVS root is :pserver:anonymous@anoncvs.opensource.apple.com:/cvs/root
> Checking out WebKitTools (again), JavaScriptCore, WebCore,  
> WebKitLibraries, and WebKit
> protocol error: directory '/Network/Source/CVS/Apple/Frameworks/ 
> JavaScriptCore' not within root '/cvs/root'

Not sure; I don't get it. In any case, the script you should use to  
update is WebKitTools/Scripts/update-webkit

- Toby

From yibinlu at gmail.com  Wed Jun  8 00:01:05 2005
From: yibinlu at gmail.com (Robin (Yibin) Lu)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Webkit can only be built on Tiger?
Message-ID: <300f3db105060800014b0607cd@mail.gmail.com>

I am using Mac OS X 10.3.9. When I was building the webkit, I got an error:
/Users/work/Projects/build/libWebKitSystemInterface.a
=== BUILDING NATIVE TARGET dftables USING BUILD STYLE Deployment ===


=== BUILDING NATIVE TARGET JavaScriptCore USING BUILD STYLE Deployment ===

CompileC /Users/work/Projects/build/JavaScriptCore.build/JavaScriptCore.build/Objects-normal/ppc/WebScriptObject.o
bindings/objc/WebScriptObject.mm normal ppc objective-c++
com.apple.compilers.gcc.3_3
    setenv MACOSX_DEPLOYMENT_TARGET 10.3
    cd /Users/work/Projects/webkit/JavaScriptCore
    /usr/bin/gcc-3.3 -x objective-c++ -arch ppc -pipe -Wno-trigraphs
-fno-exceptions -fno-rtti -fasm-blocks -fpascal-strings -Os -mtune=G4
-Werror -Wmissing-prototypes -Wnon-virtual-dtor -DNDEBUG
-DAPPLE_CHANGES -DHAVE_CONFIG_H -Wall -W -Wcast-align
-Wchar-subscripts -Wformat-security -Wmissing-format-attribute
-Wpointer-arith -Wwrite-strings -Wno-format-y2k -Wno-unused-parameter
-Wno-long-double -fmessage-length=0 -F/Users/work/Projects/build
-I/Users/work/Projects/build/include -Iicu
-I/Users/work/Projects/build/JavaScriptCore.build/JavaScriptCore.build/DerivedSources
-Wp,-header-mapfile,/Users/work/Projects/build/JavaScriptCore.build/JavaScriptCore.build/JavaScriptCore.hmap
-include /Users/work/Projects/build/SharedCaches/JavaScriptCorePrefix-cotkribcgonzbhcwynsiocvroabu/JavaScriptCorePrefix.h
-c /Users/work/Projects/webkit/JavaScriptCore/bindings/objc/WebScriptObject.mm
-o /Users/work/Projects/build/JavaScriptCore.build/JavaScriptCore.build/Objects-normal/ppc/WebScriptObject.o
/Users/work/Projects/webkit/JavaScriptCore/bindings/objc/WebScriptObject.mm:
In function `NSString* -[WebScriptObject
stringRepresentation](WebScriptObject*, objc_selector*)':
/Users/work/Projects/webkit/JavaScriptCore/bindings/objc/WebScriptObject.mm:343:
warning: `NSString' may not respond to `+stringWithCString:encoding:'
/Users/work/Projects/webkit/JavaScriptCore/bindings/objc/WebScriptObject.mm:343:
warning: cannot find method `+stringWithCString:encoding:'; return
type `id' assumed
** BUILD FAILED **

I found that +stringWithCString:encoding only available in Mac OS X
10.4 (http://developer.apple.com/documentation/Cocoa/Reference/Foundation/ObjC_classic/Classes/NSString.html#//apple_ref/doc/uid/20000154-BAJCCGHJ).
Does that mean that I can only use Tiger to build WebKit?

Thanks!

From sdfisher at spamcop.net  Wed Jun  8 00:03:57 2005
From: sdfisher at spamcop.net (Steven Fisher)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Build error: WebKit.build/WebKit.build/DerivedSources
	does not exist
Message-ID: <595D179B-90BB-458D-8C95-5DFB77FA9EE7@spamcop.net>

I'm suffering from a failed build. Looking back, the only suspicious  
thing I see is this:

Ld /Users/sfisher/xcodebuilddir/WebKit.framework/Versions/A/WebKit  
normal ppc
     setenv MACOSX_DEPLOYMENT_TARGET 10.3
     cd /Users/sfisher/cvsroot/WebKit
     /usr/bin/g++-4.0 -o /Users/sfisher/xcodebuilddir/ 
WebKit.framework/Versions/A/WebKit -L/Users/sfisher/xcodebuilddir -F/ 
Users/sfisher/xcodebuilddir -F/System/Library/Frameworks/ 
WebKit.framework/Frameworks -F/System/Library/Frameworks/ 
ApplicationServices.framework/Frameworks -F/System/Library/Frameworks/ 
Carbon.framework/Frameworks -F/System/Library/PrivateFrameworks -F/ 
Users/sfisher/xcodebuilddir/WebKit.build/WebKit.build/DerivedSources - 
filelist /Users/sfisher/xcodebuilddir/WebKit.build/WebKit.build/ 
Objects-normal/ppc/WebKit.LinkFileList -framework ApplicationServices  
-framework Carbon -framework Cocoa -framework JavaScriptCore - 
framework WebCore -licucore -framework Security - 
lWebKitSystemInterface -arch ppc -Wl,- 
exported_symbols_list,WebKit.exp -Wl,-single_module -dynamiclib - 
compatibility_version 1 -current_version 1 -install_name /System/ 
Library/Frameworks/WebKit.framework/Versions/A/WebKit
ld: warning -F: directory name (/Users/sfisher/xcodebuilddir/ 
WebKit.build/WebKit.build/DerivedSources) does not exist

Any ideas? (I last ran update only a couple minutes ago.)

-- 
Steven Fisher; sdfisher@spamcop.net
"You must be the change you wish to see in the world." - Mahatma Gandhi


From toby at opendarwin.org  Wed Jun  8 00:06:32 2005
From: toby at opendarwin.org (Toby Peterson)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Webkit can only be built on Tiger?
In-Reply-To: <300f3db105060800014b0607cd@mail.gmail.com>
References: <300f3db105060800014b0607cd@mail.gmail.com>
Message-ID: <03865529-43E2-46DC-AC5F-F0A012F95B6D@opendarwin.org>

On 08 Jun 2005, at 03.01, Robin (Yibin) Lu wrote:

> Does that mean that I can only use Tiger to build WebKit?

For now, yes.

- Toby


From toby at opendarwin.org  Wed Jun  8 00:09:46 2005
From: toby at opendarwin.org (Toby Peterson)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Build error:
	WebKit.build/WebKit.build/DerivedSources does not exist
In-Reply-To: <595D179B-90BB-458D-8C95-5DFB77FA9EE7@spamcop.net>
References: <595D179B-90BB-458D-8C95-5DFB77FA9EE7@spamcop.net>
Message-ID: <C1B62F31-F11A-46E1-82EC-F76DCCE22BFA@opendarwin.org>

On 08 Jun 2005, at 03.03, Steven Fisher wrote:

> I'm suffering from a failed build. Looking back, the only  
> suspicious thing I see is this:

The error below doesn't seem terribly suspicious. When you say  
"failed build", what do you mean? What errors do you get?

- Toby

> Ld /Users/sfisher/xcodebuilddir/WebKit.framework/Versions/A/WebKit  
> normal ppc
>     setenv MACOSX_DEPLOYMENT_TARGET 10.3
>     cd /Users/sfisher/cvsroot/WebKit
>     /usr/bin/g++-4.0 -o /Users/sfisher/xcodebuilddir/ 
> WebKit.framework/Versions/A/WebKit -L/Users/sfisher/xcodebuilddir - 
> F/Users/sfisher/xcodebuilddir -F/System/Library/Frameworks/ 
> WebKit.framework/Frameworks -F/System/Library/Frameworks/ 
> ApplicationServices.framework/Frameworks -F/System/Library/ 
> Frameworks/Carbon.framework/Frameworks -F/System/Library/ 
> PrivateFrameworks -F/Users/sfisher/xcodebuilddir/WebKit.build/ 
> WebKit.build/DerivedSources -filelist /Users/sfisher/xcodebuilddir/ 
> WebKit.build/WebKit.build/Objects-normal/ppc/WebKit.LinkFileList - 
> framework ApplicationServices -framework Carbon -framework Cocoa - 
> framework JavaScriptCore -framework WebCore -licucore -framework  
> Security -lWebKitSystemInterface -arch ppc -Wl,- 
> exported_symbols_list,WebKit.exp -Wl,-single_module -dynamiclib - 
> compatibility_version 1 -current_version 1 -install_name /System/ 
> Library/Frameworks/WebKit.framework/Versions/A/WebKit
> ld: warning -F: directory name (/Users/sfisher/xcodebuilddir/ 
> WebKit.build/WebKit.build/DerivedSources) does not exist
>
> Any ideas? (I last ran update only a couple minutes ago.)

From mjs at apple.com  Wed Jun  8 00:15:32 2005
From: mjs at apple.com (Maciej Stachowiak)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Webkit can only be built on Tiger?
In-Reply-To: <300f3db105060800014b0607cd@mail.gmail.com>
References: <300f3db105060800014b0607cd@mail.gmail.com>
Message-ID: <A7819EF8-17C3-43DC-A2DB-1EE7AAF46BAF@apple.com>


Yes, the released WebKit only builds on Tiger. However, we're  
interested in getting it building on Panther again.

Regards,
Maciej


From sdfisher at spamcop.net  Wed Jun  8 00:21:09 2005
From: sdfisher at spamcop.net (Steven Fisher)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Build error:
	WebKit.build/WebKit.build/DerivedSources does not exist
In-Reply-To: <C1B62F31-F11A-46E1-82EC-F76DCCE22BFA@opendarwin.org>
References: <595D179B-90BB-458D-8C95-5DFB77FA9EE7@spamcop.net>
	<C1B62F31-F11A-46E1-82EC-F76DCCE22BFA@opendarwin.org>
Message-ID: <51A88F8A-5D6C-4855-824B-687A0B658DC4@spamcop.net>


On Jun 8, 2005, at 3:09 PM, Toby Peterson wrote:

> On 08 Jun 2005, at 03.03, Steven Fisher wrote:
>
>
>> I'm suffering from a failed build. Looking back, the only  
>> suspicious thing I see is this:
>>
>
> The error below doesn't seem terribly suspicious. When you say  
> "failed build", what do you mean? What errors do you get?

I should have been more clear on that. I don't get an error on build,  
and it actually appears to succeed. However, when I try to use the  
run-safari script I get this:

Can't find executable at /Users/sfisher/xcodebuilddir/Deployment/ 
JavaScriptCore.framework/Versions/A/JavaScriptCore; have you built  
successfully?

Given the question, I assumed the build failed. It's possible I'm  
interpreting that wrong. :)

The Deployment directory seems to only contain two aliases:  
libWebKitSystemInterface.a and usr.

-- 
Steven Fisher; sdfisher@spamcop.net
"There is no 'Overkill.' There is only 'open fire' and 'I need to  
reload.'" -- Jevee Ceeta, Schlock Mercenary by Howard Tayler


From toby at opendarwin.org  Wed Jun  8 00:31:59 2005
From: toby at opendarwin.org (Toby Peterson)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Build error:
	WebKit.build/WebKit.build/DerivedSources does not exist
In-Reply-To: <51A88F8A-5D6C-4855-824B-687A0B658DC4@spamcop.net>
References: <595D179B-90BB-458D-8C95-5DFB77FA9EE7@spamcop.net>
	<C1B62F31-F11A-46E1-82EC-F76DCCE22BFA@opendarwin.org>
	<51A88F8A-5D6C-4855-824B-687A0B658DC4@spamcop.net>
Message-ID: <728FA059-2D0E-40E4-A6CA-A0ADABBC06DD@opendarwin.org>

Yeah. I submitted a patch that broke building on Xcode 2.0. :-( I'm  
working on this ATM. As a temporary workaround, you can delete this  
block of code from run-safari:

# Try to find Xcode 2.1 build products; prefer Deployment if both are  
present.
if (-d "$productDir/Deployment") {
     $productDir = "$productDir/Deployment";
} elsif (-d "$productDir/Development") {
     $productDir = "$productDir/Development";
}

- Toby

On 08 Jun 2005, at 03.21, Steven Fisher wrote:

>
> On Jun 8, 2005, at 3:09 PM, Toby Peterson wrote:
>
>
>> On 08 Jun 2005, at 03.03, Steven Fisher wrote:
>>
>>
>>
>>> I'm suffering from a failed build. Looking back, the only  
>>> suspicious thing I see is this:
>>>
>>>
>>
>> The error below doesn't seem terribly suspicious. When you say  
>> "failed build", what do you mean? What errors do you get?
>>
>
> I should have been more clear on that. I don't get an error on  
> build, and it actually appears to succeed. However, when I try to  
> use the run-safari script I get this:
>
> Can't find executable at /Users/sfisher/xcodebuilddir/Deployment/ 
> JavaScriptCore.framework/Versions/A/JavaScriptCore; have you built  
> successfully?
>
> Given the question, I assumed the build failed. It's possible I'm  
> interpreting that wrong. :)
>
> The Deployment directory seems to only contain two aliases:  
> libWebKitSystemInterface.a and usr.
>
> -- 
> Steven Fisher; sdfisher@spamcop.net
> "There is no 'Overkill.' There is only 'open fire' and 'I need to  
> reload.'" -- Jevee Ceeta, Schlock Mercenary by Howard Tayler
>
> _______________________________________________
> webkit-dev mailing list
> webkit-dev@opendarwin.org
> http://www.opendarwin.org/mailman/listinfo/webkit-dev
>


From sdfisher at spamcop.net  Wed Jun  8 01:10:44 2005
From: sdfisher at spamcop.net (Steven Fisher)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Build error:
	WebKit.build/WebKit.build/DerivedSources does not exist
In-Reply-To: <728FA059-2D0E-40E4-A6CA-A0ADABBC06DD@opendarwin.org>
References: <595D179B-90BB-458D-8C95-5DFB77FA9EE7@spamcop.net>
	<C1B62F31-F11A-46E1-82EC-F76DCCE22BFA@opendarwin.org>
	<51A88F8A-5D6C-4855-824B-687A0B658DC4@spamcop.net>
	<728FA059-2D0E-40E4-A6CA-A0ADABBC06DD@opendarwin.org>
Message-ID: <22BFAE13-AEEE-4269-8ED1-971355F2AF03@spamcop.net>

On Jun 8, 2005, at 3:31 PM, Toby Peterson wrote:

> Yeah. I submitted a patch that broke building on Xcode 2.0. :-( I'm  
> working on this ATM. As a temporary workaround, you can delete this  
> block of code from run-safari:
>
> # Try to find Xcode 2.1 build products; prefer Deployment if both  
> are present.
> if (-d "$productDir/Deployment") {
>     $productDir = "$productDir/Deployment";
> } elsif (-d "$productDir/Development") {
>     $productDir = "$productDir/Development";
> }
>
> - Toby

That seemed to do it. Acid2 is now causing a browser crash rather  
than misrendering, so it appears I'm on the latest code. :)

This would be a good entry on the website, actually: "How can I tell  
if Safari's using the new WebKit?" Is there a secret url like  
"about:webkitbuilddate" or somesuch?

-- 
Steven Fisher; sdfisher@spamcop.net
"You must be the change you wish to see in the world." - Mahatma Gandhi


From toby at opendarwin.org  Wed Jun  8 01:13:21 2005
From: toby at opendarwin.org (Toby Peterson)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Build error:
	WebKit.build/WebKit.build/DerivedSources does not exist
In-Reply-To: <22BFAE13-AEEE-4269-8ED1-971355F2AF03@spamcop.net>
References: <595D179B-90BB-458D-8C95-5DFB77FA9EE7@spamcop.net>
	<C1B62F31-F11A-46E1-82EC-F76DCCE22BFA@opendarwin.org>
	<51A88F8A-5D6C-4855-824B-687A0B658DC4@spamcop.net>
	<728FA059-2D0E-40E4-A6CA-A0ADABBC06DD@opendarwin.org>
	<22BFAE13-AEEE-4269-8ED1-971355F2AF03@spamcop.net>
Message-ID: <5081E919-9F5F-4EA3-8AA9-38CEFA0A7DFE@opendarwin.org>

On 08 Jun 2005, at 04.10, Steven Fisher wrote:

> This would be a good entry on the website, actually: "How can I  
> tell if Safari's using the new WebKit?" Is there a secret url like  
> "about:webkitbuilddate" or somesuch?

Probably the quickest way to find out is to look at the bottom of an  
RSS feed. :)

- Toby

From eseidel at apple.com  Wed Jun  8 02:16:09 2005
From: eseidel at apple.com (Eric Seidel)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] WebKit Wiki
Message-ID: <28B72F78-3877-44EF-A675-38041D9B672B@apple.com>

Announcing the WebKit wiki:

http://www.opendarwin.org/wiki/index.php/WebKit

and our first (stolen) content:

http://www.opendarwin.org/wiki/index.php/Tips_For_Building_WebKit

Please add more of your experiences, thoughts, comments, etc. to the  
wiki...

-eric

From yibinlu at gmail.com  Wed Jun  8 02:25:49 2005
From: yibinlu at gmail.com (Robin Lu)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Webkit can only be built on Tiger?
In-Reply-To: <A7819EF8-17C3-43DC-A2DB-1EE7AAF46BAF@apple.com>
References: <300f3db105060800014b0607cd@mail.gmail.com>
	<A7819EF8-17C3-43DC-A2DB-1EE7AAF46BAF@apple.com>
Message-ID: <300f3db10506080225359bec3@mail.gmail.com>

To work around the stringWithCString:encoding is not very hard. The
big problem I have met till now is that 10.3 SDK doesn't come with
libxslt. :(

On 6/8/05, Maciej Stachowiak <mjs@apple.com> wrote:
> 
> Yes, the released WebKit only builds on Tiger. However, we're
> interested in getting it building on Panther again.
> 
> Regards,
> Maciej
> 
>

From cjbehm at gmail.com  Wed Jun  8 05:13:55 2005
From: cjbehm at gmail.com (Chris Behm)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Build error:
	WebKit.build/WebKit.build/DerivedSources does not exist
In-Reply-To: <728FA059-2D0E-40E4-A6CA-A0ADABBC06DD@opendarwin.org>
References: <595D179B-90BB-458D-8C95-5DFB77FA9EE7@spamcop.net>
	<C1B62F31-F11A-46E1-82EC-F76DCCE22BFA@opendarwin.org>
	<51A88F8A-5D6C-4855-824B-687A0B658DC4@spamcop.net>
	<728FA059-2D0E-40E4-A6CA-A0ADABBC06DD@opendarwin.org>
Message-ID: <80635A0E-8587-414D-BDA3-DB6DA7B12A43@gmail.com>

I ran into and fixed that same thing locally. It's a bit of a hack,  
but I just added an additional if clause at the start so my run- 
safari script looks like:

if (-d "$productDir/JavaScriptCore.framework") {
     //do nothing, work around.
} elsif (-d "$productDir/Deployment") {
     $productDir = "$productDir/Deployment";
} elsif (-d "$productDir/Development") {
     $productDir = "$productDir/Development";
}

I figure it'll hold until I either update to Xcode 2.1 or the run- 
safari script gets an official fix ;)

Chris

On Jun 8, 2005, at 3:31 AM, Toby Peterson wrote:

> Yeah. I submitted a patch that broke building on Xcode 2.0. :-( I'm  
> working on this ATM. As a temporary workaround, you can delete this  
> block of code from run-safari:
>
> # Try to find Xcode 2.1 build products; prefer Deployment if both  
> are present.
> if (-d "$productDir/Deployment") {
>     $productDir = "$productDir/Deployment";
> } elsif (-d "$productDir/Development") {
>     $productDir = "$productDir/Development";
> }
>
> - Toby
>
> On 08 Jun 2005, at 03.21, Steven Fisher wrote:
>
>
>>
>> On Jun 8, 2005, at 3:09 PM, Toby Peterson wrote:
>>
>>
>>
>>> On 08 Jun 2005, at 03.03, Steven Fisher wrote:
>>>
>>>
>>>
>>>
>>>> I'm suffering from a failed build. Looking back, the only  
>>>> suspicious thing I see is this:
>>>>
>>>>
>>>>
>>>
>>> The error below doesn't seem terribly suspicious. When you say  
>>> "failed build", what do you mean? What errors do you get?
>>>
>>>
>>
>> I should have been more clear on that. I don't get an error on  
>> build, and it actually appears to succeed. However, when I try to  
>> use the run-safari script I get this:
>>
>> Can't find executable at /Users/sfisher/xcodebuilddir/Deployment/ 
>> JavaScriptCore.framework/Versions/A/JavaScriptCore; have you built  
>> successfully?
>>
>> Given the question, I assumed the build failed. It's possible I'm  
>> interpreting that wrong. :)
>>
>> The Deployment directory seems to only contain two aliases:  
>> libWebKitSystemInterface.a and usr.
>>
>> -- 
>> Steven Fisher; sdfisher@spamcop.net
>> "There is no 'Overkill.' There is only 'open fire' and 'I need to  
>> reload.'" -- Jevee Ceeta, Schlock Mercenary by Howard Tayler
>>
>> _______________________________________________
>> webkit-dev mailing list
>> webkit-dev@opendarwin.org
>> http://www.opendarwin.org/mailman/listinfo/webkit-dev
>>
>>
>
> _______________________________________________
> webkit-dev mailing list
> webkit-dev@opendarwin.org
> http://www.opendarwin.org/mailman/listinfo/webkit-dev
>


From robert at elastica.com  Wed Jun  8 05:53:23 2005
From: robert at elastica.com (Robert Nicholson)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] WebKitTool/checkout errors.
In-Reply-To: <4E2F34E0-A35D-4F65-81D6-3C4F88D2742D@opendarwin.org>
References: <B18EC88E-33E2-48C1-A30F-41E94BA2FDEF@elastica.com>
	<4E2F34E0-A35D-4F65-81D6-3C4F88D2742D@opendarwin.org>
Message-ID: <F11439A0-8972-4C8D-A01B-43E414BDF845@elastica.com>

Problem for me is that I already had a JavaScriptCore directory

On Jun 8, 2005, at 1:35 AM, Toby Peterson wrote:

>
> On 07 Jun 2005, at 21.38, Robert Nicholson wrote:
>
>
>> Is this protocol error expected?
>>
>
>
>> annie:~/Programming/Objective-C robert$ WebKitTools/checkout
>> CVS root is :pserver:anonymous@anoncvs.opensource.apple.com:/cvs/root
>> Checking out WebKitTools (again), JavaScriptCore, WebCore,  
>> WebKitLibraries, and WebKit
>> protocol error: directory '/Network/Source/CVS/Apple/Frameworks/ 
>> JavaScriptCore' not within root '/cvs/root'
>>
>
> Not sure; I don't get it. In any case, the script you should use to  
> update is WebKitTools/Scripts/update-webkit
>
> - Toby
>

From kbroderick at smcvt.edu  Wed Jun  8 05:54:52 2005
From: kbroderick at smcvt.edu (Kevin T. Broderick)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] error: WebKitSystemInterface.h: No such file or
	directory
In-Reply-To: <165AD8F4-33AD-4AC6-8E37-C744F05F376E@elastica.com>
References: <165AD8F4-33AD-4AC6-8E37-C744F05F376E@elastica.com>
Message-ID: <78A641BA-1E7E-445C-8AAC-6244B9738F64@smcvt.edu>

On 8 Jun 2005, at 1:28 AM, Robert Nicholson wrote:

> Anybody else get this problem whilst building?
>
> CompileC /Users/robert/.build/WebKit.build/WebKit.build/Objects- 
> normal/ppc/WebHistoryItem.o History.subproj/WebHistoryItem.m normal  
> ppc objective-c com.apple.compilers.gcc.4_0
>     setenv MACOSX_DEPLOYMENT_TARGET 10.3
>     cd /Users/robert/Programming/Objective-C/WebKit
>     /usr/bin/gcc-4.0 -x objective-c -arch ppc -pipe -Wno-trigraphs - 
> fpascal-strings -fasm-blocks -g -Os -Werror -Wmissing-prototypes - 
> DNDEBUG -DFRAMEWORK_NAME=WebKit -fmessage-length=0 -fobjc-direct- 
> dispatch -fobjc-gc -mtune=G4 -I/Users/robert/.build/WebKit.build/ 
> WebKit.build/WebKit.hmap -Wall -W -Wcast-align -Wchar-subscripts - 
> Wformat-security -Wmissing-format-attribute -Wpointer-arith -Wwrite- 
> strings -Wno-format-y2k -Wno-unused-parameter -F/Users/ 
> robert/.build -F/System/Library/Frameworks/WebKit.framework/ 
> Frameworks -F/System/Library/Frameworks/ 
> ApplicationServices.framework/Frameworks -F/System/Library/ 
> Frameworks/Carbon.framework/Frameworks -F/System/Library/ 
> PrivateFrameworks -F/Users/robert/.build/WebKit.build/WebKit.build/ 
> DerivedSources -I/Users/robert/.build/include -I/Users/ 
> robert/.build/usr/local/include -Iicu -I/Users/robert/.build/ 
> WebKit.build/WebKit.build/DerivedSources -Wbad-function-cast - 
> Wmissing-declarations -Wnested-externs -include /Users/ 
> robert/.build/WebKit.build/SharedCaches/WebKitPrefix- 
> dchauuscogpubwcnhifqbwhayxnq/WebKitPrefix.h -c /Users/robert/ 
> Programming/Objective-C/WebKit/History.subproj/WebHistoryItem.m -o / 
> Users/robert/.build/WebKit.build/WebKit.build/Objects-normal/ppc/ 
> WebHistoryItem.o
> /Users/robert/Programming/Objective-C/WebKit/History.subproj/ 
> WebHistoryItem.m:45:34: error: WebKitSystemInterface.h: No such  
> file or directory


I did.  I tried running the update-webkit script a couple of times to  
no avail, but changing my build pref in XCode from "~/Documents/src/ 
builds/" to "/Users/kbroderick/Documents/src/builds" seems to have  
fixed it, as I can now build successfully.

Kevin Broderick / kbroderick@smcvt.edu


From robert at elastica.com  Wed Jun  8 06:28:54 2005
From: robert at elastica.com (Robert Nicholson)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] error: WebKitSystemInterface.h: No such file or
	directory
In-Reply-To: <AA259E9B-3222-40EE-A286-EC87A6623B0C@opendarwin.org>
References: <165AD8F4-33AD-4AC6-8E37-C744F05F376E@elastica.com>
	<AA259E9B-3222-40EE-A286-EC87A6623B0C@opendarwin.org>
Message-ID: <2A15195F-7F96-4844-8EBE-0D8B35EC5DF4@elastica.com>

Yes I do see that file.

/Users/robert/Programming/Objective-C/WebKit/History.subproj/ 
WebHistoryItem.m:45:34: error: WebKitSystemInterface.h: No such file  
or directory

There's no /usr/local at all

BTW:

My build directory is ~/.build

for some reason the build script keeps on creating a ~ directory at  
the same level as WebKitTools

On Jun 8, 2005, at 1:32 AM, Toby Peterson wrote:

> First of all, do you have /Users/robert/.build/usr/local/include/ 
> WebKitSystemInterface.h ?
>
> In either case, I'd recommend running WebKitTools/Scripts/update- 
> webkit and trying again; a number of changes have been made to the  
> build scripts.
>
> - Toby
>
> On 08 Jun 2005, at 01.28, Robert Nicholson wrote:
>
>
>> Anybody else get this problem whilst building?
>>
>> CompileC /Users/robert/.build/WebKit.build/WebKit.build/Objects- 
>> normal/ppc/WebHistoryItem.o History.subproj/WebHistoryItem.m  
>> normal ppc objective-c com.apple.compilers.gcc.4_0
>>     setenv MACOSX_DEPLOYMENT_TARGET 10.3
>>     cd /Users/robert/Programming/Objective-C/WebKit
>>     /usr/bin/gcc-4.0 -x objective-c -arch ppc -pipe -Wno-trigraphs  
>> -fpascal-strings -fasm-blocks -g -Os -Werror -Wmissing-prototypes - 
>> DNDEBUG -DFRAMEWORK_NAME=WebKit -fmessage-length=0 -fobjc-direct- 
>> dispatch -fobjc-gc -mtune=G4 -I/Users/robert/.build/WebKit.build/ 
>> WebKit.build/WebKit.hmap -Wall -W -Wcast-align -Wchar-subscripts - 
>> Wformat-security -Wmissing-format-attribute -Wpointer-arith - 
>> Wwrite-strings -Wno-format-y2k -Wno-unused-parameter -F/Users/ 
>> robert/.build -F/System/Library/Frameworks/WebKit.framework/ 
>> Frameworks -F/System/Library/Frameworks/ 
>> ApplicationServices.framework/Frameworks -F/System/Library/ 
>> Frameworks/Carbon.framework/Frameworks -F/System/Library/ 
>> PrivateFrameworks -F/Users/robert/.build/WebKit.build/WebKit.build/ 
>> DerivedSources -I/Users/robert/.build/include -I/Users/ 
>> robert/.build/usr/local/include -Iicu -I/Users/robert/.build/ 
>> WebKit.build/WebKit.build/DerivedSources -Wbad-function-cast - 
>> Wmissing-declarations -Wnested-externs -include /Users/ 
>> robert/.build/WebKit.build/SharedCaches/WebKitPrefix- 
>> dchauuscogpubwcnhifqbwhayxnq/WebKitPrefix.h -c /Users/robert/ 
>> Programming/Objective-C/WebKit/History.subproj/WebHistoryItem.m - 
>> o /Users/robert/.build/WebKit.build/WebKit.build/Objects-normal/ 
>> ppc/WebHistoryItem.o
>> /Users/robert/Programming/Objective-C/WebKit/History.subproj/ 
>> WebHistoryItem.m:45:34: error: WebKitSystemInterface.h: No such  
>> file or directory
>> _______________________________________________
>> webkit-dev mailing list
>> webkit-dev@opendarwin.org
>> http://www.opendarwin.org/mailman/listinfo/webkit-dev
>>
>>
>
>

From robert at elastica.com  Wed Jun  8 06:40:21 2005
From: robert at elastica.com (Robert Nicholson)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] error: WebKitSystemInterface.h: No such file or
	directory
In-Reply-To: <78A641BA-1E7E-445C-8AAC-6244B9738F64@smcvt.edu>
References: <165AD8F4-33AD-4AC6-8E37-C744F05F376E@elastica.com>
	<78A641BA-1E7E-445C-8AAC-6244B9738F64@smcvt.edu>
Message-ID: <62628548-0988-4137-AC4B-E811E43678BA@elastica.com>

In my case too

main::(WebKitTools/Scripts/build-webkit:72):
72:     `mkdir -p "${productDir}/usr/local/include"`;

`ditto WebKitSystemInterface.h "${productDir}/usr/local/include/ 
WebKitSystemInterface.h"`
does not work

if I use

~/.build

but it does if I use

/Users/robert/.build

FYI

after a with ~/.build

annie:~/.build robert$ ls -alg
total 240
drwxr-xr-x   10 robert    340 Jun  8 08:35 .
drwxr-xr-x   47 robert   1598 Jun  8 08:02 ..
drwxr-xr-x    6 robert    204 Jun  8 08:02 JavaScriptCore.build
drwxr-xr-x    6 robert    204 Jun  8 08:04 JavaScriptCore.framework
drwxr-xr-x    4 robert    136 Jun  8 08:04 WebCore.build
drwxr-xr-x    6 robert    204 Jun  8 08:14 WebCore.framework
drwxr-xr-x    4 robert    136 Jun  8 08:14 WebKit.build
drwxr-xr-x    6 robert    204 Jun  8 08:14 WebKit.framework
-rwxr-xr-x    1 robert  24648 Jun  8 08:02 dftables
-rwxr-xr-x    1 robert  93304 Jun  8 08:04 testkjs

after with /Users/robert/.build

mkdir seems to create a directory ~

nnie:~/Programming/Objective-c robert$ ls -al '~'
total 0
drwxr-xr-x    3 robert  robert   102 Jun  8 08:37 .
drwxr-xr-x   36 robert  robert  1224 Jun  8 08:37 ..
drwxr-xr-x    3 robert  robert   102 Jun  8 08:37 .build

annie:~/.build robert$ ls -alg
total 896
drwxr-xr-x   13 robert     442 Jun  8 08:38 .
drwxr-xr-x   47 robert    1598 Jun  8 08:02 ..
drwxr-xr-x    4 robert     136 Jun  8 08:38 Deployment
drwxr-xr-x    6 robert     204 Jun  8 08:02 JavaScriptCore.build
drwxr-xr-x    6 robert     204 Jun  8 08:04 JavaScriptCore.framework
drwxr-xr-x    4 robert     136 Jun  8 08:04 WebCore.build
drwxr-xr-x    6 robert     204 Jun  8 08:14 WebCore.framework
drwxr-xr-x    4 robert     136 Jun  8 08:14 WebKit.build
drwxr-xr-x    6 robert     204 Jun  8 08:14 WebKit.framework
-rwxr-xr-x    1 robert   24648 Jun  8 08:02 dftables
-rw-r--r--    1 robert  332208 Jun  8 08:38 libWebKitSystemInterface.a
-rwxr-xr-x    1 robert   93304 Jun  8 08:04 testkjs
drwxr-xr-x    3 robert     102 Jun  8 08:38 usr


On Jun 8, 2005, at 7:54 AM, Kevin T. Broderick wrote:

> On 8 Jun 2005, at 1:28 AM, Robert Nicholson wrote:
>
>
>> Anybody else get this problem whilst building?
>>
>> CompileC /Users/robert/.build/WebKit.build/WebKit.build/Objects- 
>> normal/ppc/WebHistoryItem.o History.subproj/WebHistoryItem.m  
>> normal ppc objective-c com.apple.compilers.gcc.4_0
>>     setenv MACOSX_DEPLOYMENT_TARGET 10.3
>>     cd /Users/robert/Programming/Objective-C/WebKit
>>     /usr/bin/gcc-4.0 -x objective-c -arch ppc -pipe -Wno-trigraphs  
>> -fpascal-strings -fasm-blocks -g -Os -Werror -Wmissing-prototypes - 
>> DNDEBUG -DFRAMEWORK_NAME=WebKit -fmessage-length=0 -fobjc-direct- 
>> dispatch -fobjc-gc -mtune=G4 -I/Users/robert/.build/WebKit.build/ 
>> WebKit.build/WebKit.hmap -Wall -W -Wcast-align -Wchar-subscripts - 
>> Wformat-security -Wmissing-format-attribute -Wpointer-arith - 
>> Wwrite-strings -Wno-format-y2k -Wno-unused-parameter -F/Users/ 
>> robert/.build -F/System/Library/Frameworks/WebKit.framework/ 
>> Frameworks -F/System/Library/Frameworks/ 
>> ApplicationServices.framework/Frameworks -F/System/Library/ 
>> Frameworks/Carbon.framework/Frameworks -F/System/Library/ 
>> PrivateFrameworks -F/Users/robert/.build/WebKit.build/WebKit.build/ 
>> DerivedSources -I/Users/robert/.build/include -I/Users/ 
>> robert/.build/usr/local/include -Iicu -I/Users/robert/.build/ 
>> WebKit.build/WebKit.build/DerivedSources -Wbad-function-cast - 
>> Wmissing-declarations -Wnested-externs -include /Users/ 
>> robert/.build/WebKit.build/SharedCaches/WebKitPrefix- 
>> dchauuscogpubwcnhifqbwhayxnq/WebKitPrefix.h -c /Users/robert/ 
>> Programming/Objective-C/WebKit/History.subproj/WebHistoryItem.m - 
>> o /Users/robert/.build/WebKit.build/WebKit.build/Objects-normal/ 
>> ppc/WebHistoryItem.o
>> /Users/robert/Programming/Objective-C/WebKit/History.subproj/ 
>> WebHistoryItem.m:45:34: error: WebKitSystemInterface.h: No such  
>> file or directory
>>
>
>
> I did.  I tried running the update-webkit script a couple of times  
> to no avail, but changing my build pref in XCode from "~/Documents/ 
> src/builds/" to "/Users/kbroderick/Documents/src/builds" seems to  
> have fixed it, as I can now build successfully.
>
> Kevin Broderick / kbroderick@smcvt.edu
>
>

From kbroderick at smcvt.edu  Wed Jun  8 06:44:45 2005
From: kbroderick at smcvt.edu (Kevin T. Broderick)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Mouse-scroll speed different with new WebKit
	components?
Message-ID: <6A96BA7A-C993-468E-9C74-14E6A12A28ED@smcvt.edu>

I've managed to build the new WebKit (updated as of this morning),  
and I noticed that scrolling with the mouse wheel seems to happen  
faster with the new WebKit than with the frameworks shipped with  
10.4.1.  I'm running 10.4.1, compiled the new WebKit with XCode 2.0,  
and confirmed the difference by opening the same RSS feed in both  
"normal-Safari" and "updated-Safari"; three clicks on the wheel with  
"normal-Safari" scroll just far enough to hide the first article's  
abstract, whereas three clicks on "updated-Safari" hide almost three  
abstracts.

Should I go ahead and file a bug on this?


Kevin Broderick / kbroderick@smcvt.edu


From robert at elastica.com  Wed Jun  8 06:47:32 2005
From: robert at elastica.com (Robert Nicholson)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] error: WebKitSystemInterface.h: No such file or
	directory
In-Reply-To: <62628548-0988-4137-AC4B-E811E43678BA@elastica.com>
References: <165AD8F4-33AD-4AC6-8E37-C744F05F376E@elastica.com>
	<78A641BA-1E7E-445C-8AAC-6244B9738F64@smcvt.edu>
	<62628548-0988-4137-AC4B-E811E43678BA@elastica.com>
Message-ID: <C2F4CF0E-2101-42EB-BCAE-60858FB95AFA@elastica.com>

Also I get the following warning when it's finished building

Ld /Users/robert/.build/WebKit.framework/Versions/A/WebKit normal ppc
     setenv MACOSX_DEPLOYMENT_TARGET 10.3
     cd /Users/robert/Programming/Objective-C/WebKit
     /usr/bin/g++-4.0 -o /Users/robert/.build/WebKit.framework/ 
Versions/A/WebKit -L/Users/robert/.build -F/Users/robert/.build -F/ 
System/Library/Frameworks/WebKit.framework/Frameworks -F/System/ 
Library/Frameworks/ApplicationServices.framework/Frameworks -F/System/ 
Library/Frameworks/Carbon.framework/Frameworks -F/System/Library/ 
PrivateFrameworks -F/Users/robert/.build/WebKit.build/WebKit.build/ 
DerivedSources -filelist /Users/robert/.build/WebKit.build/ 
WebKit.build/Objects-normal/ppc/WebKit.LinkFileList -framework  
ApplicationServices -framework Carbon -framework Cocoa -framework  
JavaScriptCore -framework WebCore -licucore -framework Security - 
lWebKitSystemInterface -arch ppc -Wl,- 
exported_symbols_list,WebKit.exp -Wl,-single_module -dynamiclib - 
compatibility_version 1 -current_version 1 -install_name /System/ 
Library/Frameworks/WebKit.framework/Versions/A/WebKit
ld: warning -F: directory name (/Users/robert/.build/WebKit.build/ 
WebKit.build/DerivedSources) does not exist

On Jun 8, 2005, at 8:40 AM, Robert Nicholson wrote:

> In my case too
>
> main::(WebKitTools/Scripts/build-webkit:72):
> 72:     `mkdir -p "${productDir}/usr/local/include"`;
>
> `ditto WebKitSystemInterface.h "${productDir}/usr/local/include/ 
> WebKitSystemInterface.h"`
> does not work
>
> if I use
>
> ~/.build
>
> but it does if I use
>
> /Users/robert/.build
>
> FYI
>
> after a with ~/.build
>
> annie:~/.build robert$ ls -alg
> total 240
> drwxr-xr-x   10 robert    340 Jun  8 08:35 .
> drwxr-xr-x   47 robert   1598 Jun  8 08:02 ..
> drwxr-xr-x    6 robert    204 Jun  8 08:02 JavaScriptCore.build
> drwxr-xr-x    6 robert    204 Jun  8 08:04 JavaScriptCore.framework
> drwxr-xr-x    4 robert    136 Jun  8 08:04 WebCore.build
> drwxr-xr-x    6 robert    204 Jun  8 08:14 WebCore.framework
> drwxr-xr-x    4 robert    136 Jun  8 08:14 WebKit.build
> drwxr-xr-x    6 robert    204 Jun  8 08:14 WebKit.framework
> -rwxr-xr-x    1 robert  24648 Jun  8 08:02 dftables
> -rwxr-xr-x    1 robert  93304 Jun  8 08:04 testkjs
>
> after with /Users/robert/.build
>
> mkdir seems to create a directory ~
>
> nnie:~/Programming/Objective-c robert$ ls -al '~'
> total 0
> drwxr-xr-x    3 robert  robert   102 Jun  8 08:37 .
> drwxr-xr-x   36 robert  robert  1224 Jun  8 08:37 ..
> drwxr-xr-x    3 robert  robert   102 Jun  8 08:37 .build
>
> annie:~/.build robert$ ls -alg
> total 896
> drwxr-xr-x   13 robert     442 Jun  8 08:38 .
> drwxr-xr-x   47 robert    1598 Jun  8 08:02 ..
> drwxr-xr-x    4 robert     136 Jun  8 08:38 Deployment
> drwxr-xr-x    6 robert     204 Jun  8 08:02 JavaScriptCore.build
> drwxr-xr-x    6 robert     204 Jun  8 08:04 JavaScriptCore.framework
> drwxr-xr-x    4 robert     136 Jun  8 08:04 WebCore.build
> drwxr-xr-x    6 robert     204 Jun  8 08:14 WebCore.framework
> drwxr-xr-x    4 robert     136 Jun  8 08:14 WebKit.build
> drwxr-xr-x    6 robert     204 Jun  8 08:14 WebKit.framework
> -rwxr-xr-x    1 robert   24648 Jun  8 08:02 dftables
> -rw-r--r--    1 robert  332208 Jun  8 08:38 libWebKitSystemInterface.a
> -rwxr-xr-x    1 robert   93304 Jun  8 08:04 testkjs
> drwxr-xr-x    3 robert     102 Jun  8 08:38 usr
>
>
> On Jun 8, 2005, at 7:54 AM, Kevin T. Broderick wrote:
>
>
>> On 8 Jun 2005, at 1:28 AM, Robert Nicholson wrote:
>>
>>
>>
>>> Anybody else get this problem whilst building?
>>>
>>> CompileC /Users/robert/.build/WebKit.build/WebKit.build/Objects- 
>>> normal/ppc/WebHistoryItem.o History.subproj/WebHistoryItem.m  
>>> normal ppc objective-c com.apple.compilers.gcc.4_0
>>>     setenv MACOSX_DEPLOYMENT_TARGET 10.3
>>>     cd /Users/robert/Programming/Objective-C/WebKit
>>>     /usr/bin/gcc-4.0 -x objective-c -arch ppc -pipe -Wno- 
>>> trigraphs -fpascal-strings -fasm-blocks -g -Os -Werror -Wmissing- 
>>> prototypes -DNDEBUG -DFRAMEWORK_NAME=WebKit -fmessage-length=0 - 
>>> fobjc-direct-dispatch -fobjc-gc -mtune=G4 -I/Users/robert/.build/ 
>>> WebKit.build/WebKit.build/WebKit.hmap -Wall -W -Wcast-align - 
>>> Wchar-subscripts -Wformat-security -Wmissing-format-attribute - 
>>> Wpointer-arith -Wwrite-strings -Wno-format-y2k -Wno-unused- 
>>> parameter -F/Users/robert/.build -F/System/Library/Frameworks/ 
>>> WebKit.framework/Frameworks -F/System/Library/Frameworks/ 
>>> ApplicationServices.framework/Frameworks -F/System/Library/ 
>>> Frameworks/Carbon.framework/Frameworks -F/System/Library/ 
>>> PrivateFrameworks -F/Users/robert/.build/WebKit.build/ 
>>> WebKit.build/DerivedSources -I/Users/robert/.build/include -I/ 
>>> Users/robert/.build/usr/local/include -Iicu -I/Users/ 
>>> robert/.build/WebKit.build/WebKit.build/DerivedSources -Wbad- 
>>> function-cast -Wmissing-declarations -Wnested-externs -include / 
>>> Users/robert/.build/WebKit.build/SharedCaches/WebKitPrefix- 
>>> dchauuscogpubwcnhifqbwhayxnq/WebKitPrefix.h -c /Users/robert/ 
>>> Programming/Objective-C/WebKit/History.subproj/WebHistoryItem.m - 
>>> o /Users/robert/.build/WebKit.build/WebKit.build/Objects-normal/ 
>>> ppc/WebHistoryItem.o
>>> /Users/robert/Programming/Objective-C/WebKit/History.subproj/ 
>>> WebHistoryItem.m:45:34: error: WebKitSystemInterface.h: No such  
>>> file or directory
>>>
>>>
>>
>>
>> I did.  I tried running the update-webkit script a couple of times  
>> to no avail, but changing my build pref in XCode from "~/Documents/ 
>> src/builds/" to "/Users/kbroderick/Documents/src/builds" seems to  
>> have fixed it, as I can now build successfully.
>>
>> Kevin Broderick / kbroderick@smcvt.edu
>>
>>
>>
> _______________________________________________
> webkit-dev mailing list
> webkit-dev@opendarwin.org
> http://www.opendarwin.org/mailman/listinfo/webkit-dev
>

From proton at wiretapped.net  Wed Jun  8 06:55:01 2005
From: proton at wiretapped.net (Andrew Wellington)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Mouse-scroll speed different with new WebKit
	components?
In-Reply-To: <6A96BA7A-C993-468E-9C74-14E6A12A28ED@smcvt.edu>
References: <6A96BA7A-C993-468E-9C74-14E6A12A28ED@smcvt.edu>
Message-ID: <3D9828B1-1C58-49D6-AABC-468B82C3A00F@wiretapped.net>

This is intended behaviour:

 From IRC earlier today:
16:28 < hyatt> anyone using the new web kit with a mouse wheel?
16:28 < hyatt> we fixed mouse wheel scrolling so that it moves a  
greater distance now
16:28 < hyatt> so wheeling feels much faster

Andrew

On 08/06/2005, at 11:44 PM, Kevin T. Broderick wrote:

> I've managed to build the new WebKit (updated as of this morning),  
> and I noticed that scrolling with the mouse wheel seems to happen  
> faster with the new WebKit than with the frameworks shipped with  
> 10.4.1.  I'm running 10.4.1, compiled the new WebKit with XCode  
> 2.0, and confirmed the difference by opening the same RSS feed in  
> both "normal-Safari" and "updated-Safari"; three clicks on the  
> wheel with "normal-Safari" scroll just far enough to hide the first  
> article's abstract, whereas three clicks on "updated-Safari" hide  
> almost three abstracts.
>
> Should I go ahead and file a bug on this?


From justin at xiondigital.net  Wed Jun  8 08:41:40 2005
From: justin at xiondigital.net (Justin Haygood)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Win32 Build Errors: JavaScriptCore/KJS/array_object.cpp
Message-ID: <42A711B4.3020704@xiondigital.net>

Here is the entire output of the build, with all errors and warnings 
returned by MSVC 8. Alot of them look alot like this. This is from the 
Visual Studio 2005 Beta 2 DVD edition of MSVC, not the Express Editions 
that some people have, so the full Platform SDK is available to build 
against.

1>------ Build started: Project: JavaScriptCore, Configuration: Debug 
Win32 ------
1>Compiling...
1>array_object.cpp
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\ustring.h(93) : warning 
C4244: 'return' : conversion from 'const unsigned short' to 'unsigned 
char', possible loss of data
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\ustring.h(150) : warning 
C4244: 'return' : conversion from 'unsigned short' to 'unsigned char', 
possible loss of data
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\simple_number.h(38) : 
warning C4311: 'type cast' : pointer truncation from 'const 
KJS::ValueImp *' to 'long'
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\simple_number.h(39) : 
warning C4311: 'type cast' : pointer truncation from 'const 
KJS::ValueImp *' to 'long'
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\simple_number.h(39) : 
warning C4311: 'type cast' : pointer truncation from 'const 
KJS::ValueImp *' to 'long'
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\simple_number.h(47) : 
warning C4312: 'type cast' : conversion from 'long' to 'KJS::ValueImp *' 
of greater size
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\value.h(455) : warning 
C4800: 'long' : forcing value to bool 'true' or 'false' (performance 
warning)
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\property_map.h(52) : 
warning C4099: 'KJS::PropertyMapHashTableEntry' : type name first seen 
using 'class' now seen using 'struct'
1>        c:\documents and settings\justin haygood\my documents\visual 
studio 2005\projects\webkit-win32\javascriptcore\kjs\ustring.h(206) : 
see declaration of 'KJS::PropertyMapHashTableEntry'
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\object.h(66) : warning 
C4099: 'KJS::ClassInfo' : type name first seen using 'class' now seen 
using 'struct'
1>        c:\documents and settings\justin haygood\my documents\visual 
studio 2005\projects\webkit-win32\javascriptcore\kjs\value.h(68) : see 
declaration of 'KJS::ClassInfo'
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(5) : 
warning C4099: 'KJS::HashEntry' : type name first seen using 'class' now 
seen using 'struct'
1>        c:\documents and settings\justin haygood\my documents\visual 
studio 2005\projects\webkit-win32\javascriptcore\kjs\object.h(50) : see 
declaration of 'KJS::HashEntry'
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(6) : 
error C2552: 'KJS::arrayTableEntries' : non-aggregates cannot be 
initialized with initializer list
1>        'KJS::HashEntry' : Types with user defined constructors are 
not aggregate
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(6) : 
error C2275: 'KJS::Function' : illegal use of this type as an expression
1>        c:\documents and settings\justin haygood\my documents\visual 
studio 2005\projects\webkit-win32\javascriptcore\kjs\function.h(38) : 
see declaration of 'KJS::Function'
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(7) : 
error C2552: 'KJS::arrayTableEntries' : non-aggregates cannot be 
initialized with initializer list
1>        'KJS::HashEntry' : Types with user defined constructors are 
not aggregate
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(7) : 
error C2275: 'KJS::Function' : illegal use of this type as an expression
1>        c:\documents and settings\justin haygood\my documents\visual 
studio 2005\projects\webkit-win32\javascriptcore\kjs\function.h(38) : 
see declaration of 'KJS::Function'
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(8) : 
error C2552: 'KJS::arrayTableEntries' : non-aggregates cannot be 
initialized with initializer list
1>        'KJS::HashEntry' : Types with user defined constructors are 
not aggregate
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(8) : 
error C2275: 'KJS::Function' : illegal use of this type as an expression
1>        c:\documents and settings\justin haygood\my documents\visual 
studio 2005\projects\webkit-win32\javascriptcore\kjs\function.h(38) : 
see declaration of 'KJS::Function'
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(9) : 
error C2552: 'KJS::arrayTableEntries' : non-aggregates cannot be 
initialized with initializer list
1>        'KJS::HashEntry' : Types with user defined constructors are 
not aggregate
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(9) : 
error C2275: 'KJS::Function' : illegal use of this type as an expression
1>        c:\documents and settings\justin haygood\my documents\visual 
studio 2005\projects\webkit-win32\javascriptcore\kjs\function.h(38) : 
see declaration of 'KJS::Function'
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(9) : 
error C2036: 'const KJS::HashEntry *' : unknown size
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(10) : 
error C2552: 'KJS::arrayTableEntries' : non-aggregates cannot be 
initialized with initializer list
1>        'KJS::HashEntry' : Types with user defined constructors are 
not aggregate
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(11) : 
error C2552: 'KJS::arrayTableEntries' : non-aggregates cannot be 
initialized with initializer list
1>        'KJS::HashEntry' : Types with user defined constructors are 
not aggregate
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(12) : 
error C2552: 'KJS::arrayTableEntries' : non-aggregates cannot be 
initialized with initializer list
1>        'KJS::HashEntry' : Types with user defined constructors are 
not aggregate
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(12) : 
error C2275: 'KJS::Function' : illegal use of this type as an expression
1>        c:\documents and settings\justin haygood\my documents\visual 
studio 2005\projects\webkit-win32\javascriptcore\kjs\function.h(38) : 
see declaration of 'KJS::Function'
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(13) : 
error C2552: 'KJS::arrayTableEntries' : non-aggregates cannot be 
initialized with initializer list
1>        'KJS::HashEntry' : Types with user defined constructors are 
not aggregate
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(13) : 
error C2275: 'KJS::Function' : illegal use of this type as an expression
1>        c:\documents and settings\justin haygood\my documents\visual 
studio 2005\projects\webkit-win32\javascriptcore\kjs\function.h(38) : 
see declaration of 'KJS::Function'
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(14) : 
error C2552: 'KJS::arrayTableEntries' : non-aggregates cannot be 
initialized with initializer list
1>        'KJS::HashEntry' : Types with user defined constructors are 
not aggregate
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(14) : 
error C2275: 'KJS::Function' : illegal use of this type as an expression
1>        c:\documents and settings\justin haygood\my documents\visual 
studio 2005\projects\webkit-win32\javascriptcore\kjs\function.h(38) : 
see declaration of 'KJS::Function'
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(14) : 
error C2036: 'const KJS::HashEntry *' : unknown size
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(15) : 
error C2552: 'KJS::arrayTableEntries' : non-aggregates cannot be 
initialized with initializer list
1>        'KJS::HashEntry' : Types with user defined constructors are 
not aggregate
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(15) : 
error C2275: 'KJS::Function' : illegal use of this type as an expression
1>        c:\documents and settings\justin haygood\my documents\visual 
studio 2005\projects\webkit-win32\javascriptcore\kjs\function.h(38) : 
see declaration of 'KJS::Function'
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(16) : 
error C2552: 'KJS::arrayTableEntries' : non-aggregates cannot be 
initialized with initializer list
1>        'KJS::HashEntry' : Types with user defined constructors are 
not aggregate
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(16) : 
error C2275: 'KJS::Function' : illegal use of this type as an expression
1>        c:\documents and settings\justin haygood\my documents\visual 
studio 2005\projects\webkit-win32\javascriptcore\kjs\function.h(38) : 
see declaration of 'KJS::Function'
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(16) : 
error C2036: 'const KJS::HashEntry *' : unknown size
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(17) : 
error C2552: 'KJS::arrayTableEntries' : non-aggregates cannot be 
initialized with initializer list
1>        'KJS::HashEntry' : Types with user defined constructors are 
not aggregate
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(18) : 
error C2552: 'KJS::arrayTableEntries' : non-aggregates cannot be 
initialized with initializer list
1>        'KJS::HashEntry' : Types with user defined constructors are 
not aggregate
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(19) : 
error C2552: 'KJS::arrayTableEntries' : non-aggregates cannot be 
initialized with initializer list
1>        'KJS::HashEntry' : Types with user defined constructors are 
not aggregate
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(19) : 
error C2275: 'KJS::Function' : illegal use of this type as an expression
1>        c:\documents and settings\justin haygood\my documents\visual 
studio 2005\projects\webkit-win32\javascriptcore\kjs\function.h(38) : 
see declaration of 'KJS::Function'
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(20) : 
error C2552: 'KJS::arrayTableEntries' : non-aggregates cannot be 
initialized with initializer list
1>        'KJS::HashEntry' : Types with user defined constructors are 
not aggregate
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(20) : 
error C2275: 'KJS::Function' : illegal use of this type as an expression
1>        c:\documents and settings\justin haygood\my documents\visual 
studio 2005\projects\webkit-win32\javascriptcore\kjs\function.h(38) : 
see declaration of 'KJS::Function'
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(21) : 
error C2552: 'KJS::arrayTableEntries' : non-aggregates cannot be 
initialized with initializer list
1>        'KJS::HashEntry' : Types with user defined constructors are 
not aggregate
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(21) : 
error C2275: 'KJS::Function' : illegal use of this type as an expression
1>        c:\documents and settings\justin haygood\my documents\visual 
studio 2005\projects\webkit-win32\javascriptcore\kjs\function.h(38) : 
see declaration of 'KJS::Function'
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(24) : 
warning C4099: 'KJS::HashTable' : type name first seen using 'class' now 
seen using 'struct'
1>        c:\documents and settings\justin haygood\my documents\visual 
studio 2005\projects\webkit-win32\javascriptcore\kjs\object.h(49) : see 
declaration of 'KJS::HashTable'
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(24) : 
error C2079: 'arrayTable' uses undefined class 'KJS::HashTable'
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.lut.h(24) : 
error C2078: too many initializers
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\lookup.h(35) : warning 
C4099: 'KJS::HashEntry' : type name first seen using 'class' now seen 
using 'struct'
1>        c:\documents and settings\justin haygood\my documents\visual 
studio 2005\projects\webkit-win32\javascriptcore\kjs\object.h(50) : see 
declaration of 'KJS::HashEntry'
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\lookup.h(70) : warning 
C4099: 'KJS::HashTable' : type name first seen using 'class' now seen 
using 'struct'
1>        c:\documents and settings\justin haygood\my documents\visual 
studio 2005\projects\webkit-win32\javascriptcore\kjs\object.h(49) : see 
declaration of 'KJS::HashTable'
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.cpp(392) : 
error C2440: 'initializing' : cannot convert from 'int *__w64 ' to 
'const KJS::HashTable *'
1>        Types pointed to are unrelated; conversion requires 
reinterpret_cast, C-style cast or function-style cast
1>c:\documents and settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\array_object.cpp(424) : 
error C2664: 'KJS::lookupGetFunction' : cannot convert parameter 3 from 
'int *__w64 ' to 'const KJS::HashTable *'
1>        Types pointed to are unrelated; conversion requires 
reinterpret_cast, C-style cast or function-style cast
1>Build log was saved at "file://c:\Documents and Settings\Justin 
Haygood\My Documents\Visual Studio 
2005\Projects\WebKit-Win32\JavaScriptCore\Debug\BuildLog.htm"
1>JavaScriptCore - 35 error(s), 13 warning(s)
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ==========

From justin at xiondigital.net  Wed Jun  8 09:25:16 2005
From: justin at xiondigital.net (Justin Haygood)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Win32 Port Tracking Bug
Message-ID: <42A71BEC.5020205@xiondigital.net>

I went ahead and made a "tracking bug" for a port to Win32. My goal is 
to have Win32 to have a working port by the end of the year, and build 
it in lockstep with the official MacOS X port. This makes sure that the 
Win32 version will have the same updates as the OS X version, and once 
done, actual bugs can be fixed against both simultaneously.

http://bugzilla.opendarwin.org/show_bug.cgi?id=3356

From mas63 at cornell.edu  Wed Jun  8 11:40:29 2005
From: mas63 at cornell.edu (Mike Solomon)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] debug patch for run-safari
Message-ID: <3B6D7174-4536-4662-B5FF-852009C067AA@cornell.edu>

pretty trivial, but bit me.  enjoy.

[msolomon]phoenix:~/Projects/WebKitTools/Scripts> cvs diff -u3 run- 
safari
Index: run-safari
===================================================================
RCS file: /cvs/root/WebKitTools/Scripts/run-safari,v
retrieving revision 1.4
diff -u -3 -r1.4 run-safari
--- run-safari  2005/06/08 09:00:52     1.4
+++ run-safari  2005/06/08 18:40:59
@@ -54,6 +54,7 @@
my @testDirs = ( "$productDir", "$productDir/Deployment",  
"$productDir/Development" );
my $found = 0;
for my $testDir (@testDirs) {
+       next if ($debug && $testDir =~ m/Deployment$/);
         # Check to see that frameworks are there.
         print "Looking for frameworks in $testDir ...\n";


From justin at xiondigital.net  Wed Jun  8 14:22:56 2005
From: justin at xiondigital.net (Justin Haygood)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Almost done with JavaScriptCore!
Message-ID: <42A761B0.1060903@xiondigital.net>

Almost done with JavaScriptCore!

Only problems are:

the .lut.h files aren't being liked, cept for lexer.lut.h:

List:
array_object.lut.h
data_object.lut.h
math_object.lut.h
number_object.lut.h
string_object.lut.h

Please note the files calling them might have other errors, but MSVC8 
gives up on each one.. too many fatal errors.

They all die with the *exact same errors, *so fixing one should be 
enough to fix all of them.

The errors are:

Error    #    error C2552: 'KJS::{bla}TableEntries' : non-aggregates 
cannot be initialized with initializer list    c:\documents and 
settings\justin haygood\my documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\{bla}_object.lut.h    6   

Error    #    error C2275: 'KJS::Function' : illegal use of this type as 
an expression    c:\documents and settings\justin haygood\my 
documents\visual studio 
2005\projects\webkit-win32\javascriptcore\kjs\{bla}_object.lut.h    6   

And so on all the way for every line the {bla}_object.lut.h list

Each lut file was created using the perl create_hash_table file command, 
using Perl 5.8.6.


Collector.cpp uses stuff dealing mach and posix threads. posix threads 
good, mach threads bad.. very bad. Posix threads are good since Red Hat 
has a pthreads implementation for Windows, which is a wrapper around the 
Windows threading functions.



From timber at lava.net  Wed Jun  8 19:00:15 2005
From: timber at lava.net (Colin Barrett)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] error: WebKitSystemInterface.h: No such file or
	directory
In-Reply-To: <2A15195F-7F96-4844-8EBE-0D8B35EC5DF4@elastica.com>
References: <165AD8F4-33AD-4AC6-8E37-C744F05F376E@elastica.com>
	<AA259E9B-3222-40EE-A286-EC87A6623B0C@opendarwin.org>
	<2A15195F-7F96-4844-8EBE-0D8B35EC5DF4@elastica.com>
Message-ID: <8F78D153-1B15-44F3-8C17-E7E07C6160E3@lava.net>

Change your build directory in Xcode to not have a ~ in it. Someone  
should file an rdar on this. *slaps the Xcode team*  All it takes to  
fix this is to call one method in NSString. :-\

- Colin

On Jun 8, 2005, at 3:28 AM, Robert Nicholson wrote:

> Yes I do see that file.
>
> /Users/robert/Programming/Objective-C/WebKit/History.subproj/ 
> WebHistoryItem.m:45:34: error: WebKitSystemInterface.h: No such  
> file or directory
>
> There's no /usr/local at all
>
> BTW:
>
> My build directory is ~/.build
>
> for some reason the build script keeps on creating a ~ directory at  
> the same level as WebKitTools

From kimmok at iki.fi  Wed Jun  8 21:55:50 2005
From: kimmok at iki.fi (Kimmo Kinnunen)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Porting Gtk+WebCore
Message-ID: <42A7CBD6.5040501@iki.fi>

Hi,
I understand there might be interest in hosting Gtk+WebCore under 
opendarwin, possibly merging some changes back to the real WebKit. I 
think this is quite good idea.

Does anybody have any ideas how should this proceed? There's not much 
change in the core that could benefit WebKit on OS X. From other 
platforms' point of view, there's probably the ARM fixes, some linux 
compilation fixes and maybe Gtk+ KWQ.

Status of the Gtk+WebCore:
  - JavaScriptCore 413
  - WebCore 145.1

  - Running on Linux (x86 and ARM), FreeBSD, using Gtk+
  - Proof of concept support for Cairo
  - Runs also on Win32 with Gtk+ (VC6 I believe), no GDI image renderer
    though
  - Lots of crashes, mostly from our Kit-side.

The problem ofcourse with the Gtk+WebCore project was that there's no 
platform to integrate in, so every service, like networking and 
graphics, come from assorted libraries.

Still, porting WebKit to other platforms has questions that puzzle me:

The build system seems to completely rely on OS X. Is there any plans to 
use makefiles, autotools or something? From OS X developer point of 
view, I'd speculate that the whole hassle with autotools is pretty 
inferior to what you got there.. If there was a multiplatform WebKit, 
what kind of infrastructure would there be?

KWQ side of WebKit is also heavliy OSX dependent. Any ideas how to make 
this different? Especially refactoring the bridge and generalizing the 
KWQ widgets to support Carbon, Gtk+, Windows widgets needs a bit of thought.

I think the main issues are defining how the WebKit portability project 
relates to the Apple's WebKit. Anyway, I can happily help porting the 
Gtk+WebCore. It'd be great even if the project was just hosted at 
opendarwin, because then it might attract more people actually working 
on it.

Kimmo


From darin at apple.com  Wed Jun  8 22:55:03 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] debug patch for run-safari
In-Reply-To: <3B6D7174-4536-4662-B5FF-852009C067AA@cornell.edu>
References: <3B6D7174-4536-4662-B5FF-852009C067AA@cornell.edu>
Message-ID: <7B45AB2A-D063-4DEA-A166-F774323EFCF7@apple.com>

On Jun 8, 2005, at 11:40 AM, Mike Solomon wrote:

> pretty trivial, but bit me.  enjoy.

I didn't use this fix completely as-is, but I am about to land  
something similar. Thanks!

     -- Darin

PS: Next time please use webkit-reviews for patch review.

From darin at apple.com  Thu Jun  9 06:25:11 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] recent KJS_CHECK_EXCEPTION change (needs improvement?)
Message-ID: <645534B0-1C3F-40DD-A870-D964CD3EF5D2@apple.com>

I was looking at the recent change to KJS_CHECK_EXCEPTION, and I was  
wondering if it's correct.

It looks to me like each level is going to overwrite the source file  
and line number set by the level below it. So the code needs to  
change to attach a new source file and line number only if it's not  
already set on the exception being propagated.

What do you think?

     -- Darin


From opendarwin.org at bdash.net.nz  Thu Jun  9 06:38:55 2005
From: opendarwin.org at bdash.net.nz (Mark Rowe)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] recent KJS_CHECK_EXCEPTION change (needs
	improvement?)
In-Reply-To: <645534B0-1C3F-40DD-A870-D964CD3EF5D2@apple.com>
References: <645534B0-1C3F-40DD-A870-D964CD3EF5D2@apple.com>
Message-ID: <406EC14C-BCF2-477E-97A3-B247429CB80C@bdash.net.nz>


On 10/06/2005, at 01:25 , Darin Adler wrote:

> I was looking at the recent change to KJS_CHECK_EXCEPTION, and I  
> was wondering if it's correct.
>
> It looks to me like each level is going to overwrite the source  
> file and line number set by the level below it. So the code needs  
> to change to attach a new source file and line number only if it's  
> not already set on the exception being propagated.
>
> What do you think?

Very true.  I'll send a patch through for review shortly.

Regards,

--
Mark Rowe
<http://bdash.net.nz/>


From justin at xiondigital.net  Thu Jun  9 13:35:39 2005
From: justin at xiondigital.net (Justin Haygood)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] JavaScriptCore Conservative Garbage Collector
Message-ID: <42A8A81B.4090106@xiondigital.net>

I want to know pretty much what the reason behind each of these are, so 
I can better implement it using another also portable threading library 
(NSPR):

markCurrentThreadConservatively()
markOtherThreadConservatively(Thread *thread)

What does mark conversatively mean? NSPR doesn't have a way to access 
the stack objects of each thread, so I'm in a bit of a bind. The NSPR 
threading library does have pretty much everything else a threading 
library needs, and is very clean.




From bwaters at nrao.edu  Thu Jun  9 18:21:36 2005
From: bwaters at nrao.edu (Boyd Waters)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Safari with new WebKit double-clickable distribution
Message-ID: <4E8A34CE-D36A-4B81-B66D-E820F7B6D2E6@nrao.edu>

Thanks to all involved in making this improved WebKit available.

I have modified the "WebKitTools/Scripts/run-safari" script by  
wrapping it as a double-clickable application, which includes a build  
of the WebKit CVS (pulled on Tuesday).

Web developers who do not wish to build the WebKit from source, but  
want to test content against this version, can use this as easily as  
they might use any other Macintosh GUI application.

A disk image is available at

http://www.aoc.nrao.edu/~bwaters/projects/mac/SafariOnAcid.dmg

md5sum
7367c911425d888b81cb66549bf62eb2  SafariOnAcid.dmg

I have tested this distribution on Tiger, but I believe it should  
work on OS X 10.3.9...

Please try this out, and make improvements as necessary!

Regards,

~ boyd

Boyd Waters
National Radio Astronomy Observatory
Socorro, New Mexico


From darin at apple.com  Thu Jun  9 20:45:07 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] JavaScriptCore Conservative Garbage Collector
In-Reply-To: <42A8A81B.4090106@xiondigital.net>
References: <42A8A81B.4090106@xiondigital.net>
Message-ID: <4C8CD215-FD55-4D11-A0A9-191DFFCC4FDA@apple.com>

On Jun 9, 2005, at 1:35 PM, Justin Haygood wrote:

> What does mark conversatively mean? NSPR doesn't have a way to  
> access the stack objects of each thread, so I'm in a bit of a bind.  
> The NSPR threading library does have pretty much everything else a  
> threading library needs, and is very clean.

Marking conservatively means marking every object that is pointed to  
by any value on the stack (or in registers). What "conservative"  
refers to here is that a value on the stack might look like a  
pointer, but actually be a value of another type that just happens to  
look like a pointer, or even uninitialized data. Thus an object  
that's actually garbage might not get collected, hence the collector  
is "conservative" in keeping it alive.

You'll need a threading library that does give a way to find the  
stack of each thread, so you may not be able to use NSPR.

     -- Darin


From darin at apple.com  Thu Jun  9 21:05:36 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] JavaScriptCore Conservative Garbage Collector
In-Reply-To: <4C8CD215-FD55-4D11-A0A9-191DFFCC4FDA@apple.com>
References: <42A8A81B.4090106@xiondigital.net>
	<4C8CD215-FD55-4D11-A0A9-191DFFCC4FDA@apple.com>
Message-ID: <E0FCFB36-5428-457E-85A9-46D46898A015@apple.com>

On Jun 9, 2005, at 8:45 PM, Darin Adler wrote:

> On Jun 9, 2005, at 1:35 PM, Justin Haygood wrote:
>
>> What does mark conversatively mean? NSPR doesn't have a way to  
>> access the stack objects of each thread, so I'm in a bit of a  
>> bind. The NSPR threading library does have pretty much everything  
>> else a threading library needs, and is very clean.
>
> Marking conservatively means marking every object that is pointed  
> to by any value on the stack (or in registers). What "conservative"  
> refers to here is that a value on the stack might look like a  
> pointer, but actually be a value of another type that just happens  
> to look like a pointer, or even uninitialized data. Thus an object  
> that's actually garbage might not get collected, hence the  
> collector is "conservative" in keeping it alive.

The Wikipedia page <http://en.wikipedia.org/wiki/Garbage_collection_% 
28computer_science%29> mentions this. Look for "partly conservative"  
in the page.

Some super-great things about the conservative garbage collector are  
that it eliminates: the need for smart pointer wrappers for  
JavaScript objects, the need for a few flags that every object used  
to have (besides the mark bit), ambiguity about when to use smart  
pointer wrappers and when not to, and most if not all subtle rules  
about how to use the JavaScript object pointers properly. It made the  
library faster when we first switched to it, largely because of the  
time not spent doing ref and deref all the time. And it will make  
things even faster when we take further advantage of simplifications  
it made possible.

We can get much better performance for code that doesn't involve  
wrappers. C++ compilers don't do so great at optimizing when there  
are objects that have a single pointer in them -- the fact that the  
this pointer is a pointer to that pointer tends to make them not  
generate code that's as good as simple pointer manipulation.

     -- Darin


From darin at apple.com  Thu Jun  9 21:48:55 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] JSCore patch question and wxWebCore
In-Reply-To: <96BAA4B6-DC66-4A39-8BD4-8ABF25B62CBF@theolliviers.com>
References: <96BAA4B6-DC66-4A39-8BD4-8ABF25B62CBF@theolliviers.com>
Message-ID: <192B8416-C1E2-4F29-B1B9-7DC6B5BB3AC6@apple.com>

On Jun 7, 2005, at 5:13 PM, Kevin Ollivier wrote:

> 1) We have a patch for JSCore 412 that includes some simple  
> compilation fixes like added headers and such to get it to compile  
> on Linux. Are you interested in this, and if so, do we just submit  
> it to the WebKit bugzilla?

Yes, please do.

> 2) Is the WebKit site and mailing list going to be the primary  
> discussion and project space for WebCore as well now? As WebKit is  
> a superset, I wasn't sure if this was more appropriate here, or if  
> WebCore's discussion forum was a more appropriate place.

Yes, sorry about the name confusion.

I'm expecting Maciej Stachowiak to send out some more information  
about ports and he might respond to more points in your email.

     -- Darin



From darin at apple.com  Thu Jun  9 21:50:17 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Porting Gtk+WebCore
In-Reply-To: <42A7CBD6.5040501@iki.fi>
References: <42A7CBD6.5040501@iki.fi>
Message-ID: <B8C42D22-B735-447F-91C6-7E21BDB6D260@apple.com>

On Jun 8, 2005, at 9:55 PM, Kimmo Kinnunen wrote:

> I think the main issues are defining how the WebKit portability  
> project relates to the Apple's WebKit. Anyway, I can happily help  
> porting the Gtk+WebCore. It'd be great even if the project was just  
> hosted at opendarwin, because then it might attract more people  
> actually working on it.

Maciej's planning to send mail with some thoughts on this soon. I  
just wanted to send you a reply to let you know that we got your  
message and we're not ignoring it.

     -- Darin


From mjs at apple.com  Thu Jun  9 22:28:52 2005
From: mjs at apple.com (Maciej Stachowiak)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] JavaScriptCore Conservative Garbage Collector
In-Reply-To: <42A8A81B.4090106@xiondigital.net>
References: <42A8A81B.4090106@xiondigital.net>
Message-ID: <EA26CDDB-FEBD-433B-B1D3-CAB4DD30A91B@apple.com>


On Jun 9, 2005, at 1:35 PM, Justin Haygood wrote:

> I want to know pretty much what the reason behind each of these  
> are, so I can better implement it using another also portable  
> threading library (NSPR):
>
> markCurrentThreadConservatively()
> markOtherThreadConservatively(Thread *thread)
>
> What does mark conversatively mean? NSPR doesn't have a way to  
> access the stack objects of each thread, so I'm in a bit of a bind.  
> The NSPR threading library does have pretty much everything else a  
> threading library needs, and is very clean.

Hi Justin,

Besides Darin's comments, I'll add the following:

All you really need to get a JavaScriptCore that works with WebCore  
is markCurrentThreadConservatively(). All the logic for marking other  
threads could be left out. The reason is that WebCore uses  
JavaScriptCore in a completely single-threaded way. The reason we  
take care of marking objects pointed to from other threads is that on  
Mac OS X, other pieces of the system use JavaScriptCore, sometimes in  
a multithreaded way. In fact, CFNetwork, the http loader library we  
use way down under the covers, uses it to parse PAC files on  
background threads. So we need the collector to be threadsafe. But  
this should not be needed if you only want to use JavaScriptCore from  
WebCore.

So, you could probably #ifdef out all the support for marking other  
threads.

I believe the one non-portable construct you will need to find a way  
to do is how to get the stack base of the main thread (or alternately  
the currently running thread, both should be the same). I know that  
on other platforms such as Linux there is a direct call to do this  
that doesn't involve the threading library. I'm not sure about the  
situation on Windows.

Regards,
Maciej

P.S. I see that you've been doing a lot of work to get stuff building  
and working on Windows. I think it would be great to start getting  
your changes in incrementally. Please send patches for the individual  
issues you've addressed to webkit-changes whenever ready (or point to  
a bug report if you put them in bugzilla).


From mjs at apple.com  Thu Jun  9 22:38:55 2005
From: mjs at apple.com (Maciej Stachowiak)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] JSCore patch question and wxWebCore
In-Reply-To: <96BAA4B6-DC66-4A39-8BD4-8ABF25B62CBF@theolliviers.com>
References: <96BAA4B6-DC66-4A39-8BD4-8ABF25B62CBF@theolliviers.com>
Message-ID: <CF710F99-6CD2-4A87-94A9-7EFA01A8EB12@apple.com>


On Jun 7, 2005, at 5:13 PM, Kevin Ollivier wrote:

> First off, I wanted to say I'm really impressed with Apple's  
> commitment to open source. IMHO, the actions you've taken go above  
> and beyond the call of duty and show an openness that few companies  
> are willing to risk.

Thanks for saying so. I think all the great testing and code  
submissions we have been getting will really help people at Apple and  
other companies to understand the strength of the open source  
development model.

> However, I do have more to say than that. :-) Vaclav Slavik (the  
> author of wxWidgets' wxHTML support, among many other things) and I  
> have embarked on a rather ambitious project, which is the  
> development of a wxWidgets implementation of WebCore. I do recall  
> one of the developers saying they'd be open to/interested in a  
> multi-platform WebCore. ;-) We'd also like to develop an ActiveX  
> front end as well, so that apps outside of wxWidgets apps on  
> Windows can take advantage of WebCore. We've been working on it for  
> a couple weeks now and we have setup a SVN repository for it at:
>
> http://developer.berlios.de/projects/wxwebcore
>
> We've still got a long ways to go, but we've gotten a fair amount  
> of files compiling these past couple weeks (both on Mac and Linux)  
> and hope within a month or so that we can move towards a basic  
> prototype.

Hey, that's great news. We're definitely interested in ports to other  
platforms, and we'll be working to restructure our tree to make this  
feasible. We want to make kwq into a true multiplatform porting layer  
which can adapt to multiple operation systems and GUI toolkits.

> Related to this project, I had a couple questions for WebKit  
> developers:
>
> 1) We have a patch for JSCore 412 that includes some simple  
> compilation fixes like added headers and such to get it to compile  
> on Linux. Are you interested in this, and if so, do we just submit  
> it to the WebKit bugzilla?

Sure, we'd love to see these changes. The very best way to do it  
would be to file an appropriate bug in bugzilla, attach a patch, and  
send email to webkit-changes when it's ready for review. If the patch  
is large and covers multiple separate issues, then splitting it would  
help a lot.

> 2) Is the WebKit site and mailing list going to be the primary  
> discussion and project space for WebCore as well now? As WebKit is  
> a superset, I wasn't sure if this was more appropriate here, or if  
> WebCore's discussion forum was a more appropriate place.

Yes, this list is going to be the main forum for discussion of  
WebKit, WebCore and JavaScriptCore development.

> Anyways, the newly open-sourced WebKit will definitely help us in  
> our implementation, and I hope that our work can be useful to the  
> WebKit development team as well. It will certainly be of great  
> benefit to the wxWidgets project!

Cool, we sure hope it helps, and we'd totally be happy to see your  
work in our tree.

Regards,
Maciej


From mjs at apple.com  Thu Jun  9 22:52:12 2005
From: mjs at apple.com (Maciej Stachowiak)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] JavaScriptCore Conservative Garbage Collector
In-Reply-To: <EA26CDDB-FEBD-433B-B1D3-CAB4DD30A91B@apple.com>
References: <42A8A81B.4090106@xiondigital.net>
	<EA26CDDB-FEBD-433B-B1D3-CAB4DD30A91B@apple.com>
Message-ID: <F739CEA4-0FEF-400F-97B9-A89D28D4E163@apple.com>


On Jun 9, 2005, at 10:28 PM, Maciej Stachowiak wrote:

> P.S. I see that you've been doing a lot of work to get stuff  
> building and working on Windows. I think it would be great to start  
> getting your changes in incrementally. Please send patches for the  
> individual issues you've addressed to webkit-changes whenever ready  
> (or point to a bug report if you put them in bugzilla).

Actually I cited the wrong list here, webkit-reviews is the place to  
send patches. Webkit-changes is the place to find out about commits  
as they go in. Ignore the man behind the curtain.

Regards,
Maciej


From mjs at apple.com  Fri Jun 10 00:02:48 2005
From: mjs at apple.com (Maciej Stachowiak)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Porting Gtk+WebCore
In-Reply-To: <42A7CBD6.5040501@iki.fi>
References: <42A7CBD6.5040501@iki.fi>
Message-ID: <6B25C835-9F0B-4E63-8F1A-DC713D7C837D@apple.com>


On Jun 8, 2005, at 9:55 PM, Kimmo Kinnunen wrote:

> Hi,
> I understand there might be interest in hosting Gtk+WebCore under  
> opendarwin, possibly merging some changes back to the real WebKit.  
> I think this is quite good idea.

Yes, we'd love to see this happen! We're very interested in making  
our tree multiplatform and multitoolkit, and the Gtk+ port is very  
high on the list since it already exists. :-)

>
> Does anybody have any ideas how should this proceed? There's not  
> much change in the core that could benefit WebKit on OS X. From  
> other platforms' point of view, there's probably the ARM fixes,  
> some linux compilation fixes and maybe Gtk+ KWQ.

We haven't yet worked out the details. But I think the ARM and Linux  
compilation fixes are a no-brainer to go in (as long as the code also  
still compiles on OS X) and if you sent patches along those lines,  
we'd gladly take them.

> Status of the Gtk+WebCore:
>  - JavaScriptCore 413
>  - WebCore 145.1
>
>  - Running on Linux (x86 and ARM), FreeBSD, using Gtk+
>  - Proof of concept support for Cairo
>  - Runs also on Win32 with Gtk+ (VC6 I believe), no GDI image renderer
>    though
>  - Lots of crashes, mostly from our Kit-side.
>
> The problem of course with the Gtk+WebCore project was that there's  
> no platform to integrate in, so every service, like networking and  
> graphics, come from assorted libraries.

Yep, that's unsurprising. It's fine to depend on external libraries  
for these, for the Gtk port.

> Still, porting WebKit to other platforms has questions that puzzle me:
>
> The build system seems to completely rely on OS X. Is there any  
> plans to use makefiles, autotools or something? From OS X developer  
> point of view, I'd speculate that the whole hassle with autotools  
> is pretty inferior to what you got there.. If there was a  
> multiplatform WebKit, what kind of infrastructure would there be?

This is a question that some of us on the Safari/WebKit team have  
thought about, but we're not sure which way to go yet. As I see it,  
there's two basic options:

A) Use autotools on every possible platform, even Mac OS X. We used  
to do this way long ago towards the start of the project, and over  
time we converted to Xcode because of all the nice things we get from  
it. So in some ways this would be more of a pain for the existing  
WebKit developers at Apple.

B) Use Xcode projects on OS X, and autotools for ports to more  
traditional unix systems (Linux, FreeBSD, etc). The major downside to  
this is that to make any kind of build change (even just adding a new  
file), you would have to do it twice. And not only that you would  
really need a Mac even if that is not your primary dev platform,  
since the Xcode project file format is not really human-editable.

We're really not sure yet which of these is better. I think it might  
be best to start with B, and consider converting to A someday if  
there are enough active developers on non-Mac platforms.

> KWQ side of WebKit is also heavliy OSX dependent. Any ideas how to  
> make this different? Especially refactoring the bridge and  
> generalizing the KWQ widgets to support Carbon, Gtk+, Windows  
> widgets needs a bit of thought.

There's really several different things in the KWQ directory:

1) Fairly platform-agnostic replacements for things like data  
structures and QString (QDict is one exception here, but we'll be  
changing that to not rely on CFDictionary any more). These could just  
be used for any platform that uses KWQ instead of the real Qt.

2) Completely platform/toolkit specific implementations of the Qt  
widgets. We'd need separate implementations of these per port - I'm  
not sure how much of the code if any is shareable across ports.

3) Bridging logic, for binding to an API wrapper layer. This is  
mostly KWQKHTMLPart and WebCoreBridge. Unfortunately these have

4) Bridging to system APIs that are implemented in WebKit, stuff like  
WebTextRenderer.m. This might not be needed at all for other ports.  
I'm not really sure.

> I think the main issues are defining how the WebKit portability  
> project relates to the Apple's WebKit. Anyway, I can happily help  
> porting the Gtk+WebCore. It'd be great even if the project was just  
> hosted at opendarwin, because then it might attract more people  
> actually working on it.

That would be awesome. We'd definitely be happy to host it here, and  
we would do our best to encourage more contributors.

Regards,
Maciej


From kent.sandvik at gmail.com  Fri Jun 10 02:19:07 2005
From: kent.sandvik at gmail.com (Kent Sandvik)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Porting Gtk+WebCore
In-Reply-To: <6B25C835-9F0B-4E63-8F1A-DC713D7C837D@apple.com>
References: <42A7CBD6.5040501@iki.fi>
	<6B25C835-9F0B-4E63-8F1A-DC713D7C837D@apple.com>
Message-ID: <d5c0543705061002192619b4ea@mail.gmail.com>

On 6/10/05, Maciej Stachowiak <mjs@apple.com> wrote:

> This is a question that some of us on the Safari/WebKit team have
> thought about, but we're not sure which way to go yet. As I see it,
> there's two basic options:
> 
> A) Use autotools on every possible platform, even Mac OS X. We used
> to do this way long ago towards the start of the project, and over
> time we converted to Xcode because of all the nice things we get from
> it. So in some ways this would be more of a pain for the existing
> WebKit developers at Apple.
> 
> B) Use Xcode projects on OS X, and autotools for ports to more
> traditional unix systems (Linux, FreeBSD, etc). The major downside to
> this is that to make any kind of build change (even just adding a new
> file), you would have to do it twice. And not only that you would
> really need a Mac even if that is not your primary dev platform,
> since the Xcode project file format is not really human-editable.
> 
> We're really not sure yet which of these is better. I think it might
> be best to start with B, and consider converting to A someday if
> there are enough active developers on non-Mac platforms.

Yes, that makes sense. The issue indeed is to keep these two  build
systems in sync, especially in cases where a developer does not have
access to a Mac platform for updating the Xcode projects...

The qmake tool from Trolltech also used to be able to export from a
canonical build-rule format to Makefiles and Xcode project files (at
least when I worked on the Mac side over at Trolltech, don't know how
well they support XCode 2.0/2.1 today.. might work fine). So that's an
option. qmake and SCons are examples of starting from a meta-level
description and build platform-dependent Makefile and project
environments.

I don't know of any good and reliable ways to convert back and forth
between GNU automake and XCode projects.

--Kent

PS: I'm looking at porting WebCore on top of DirectFB/LiTE
(www.directfb.org), been working on LiTE recently to make it a very
quick way to build  toolkits on top of DirecDB, especially for
embedded systems, and WebCore/KWQ would be a nice test ground for it,
would be interesting to look at Qt code for the conversion part, too
-- been a while since I last hacked Qt.

From kent.sandvik at gmail.com  Fri Jun 10 02:24:14 2005
From: kent.sandvik at gmail.com (Kent Sandvik)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Porting Gtk+WebCore
In-Reply-To: <6B25C835-9F0B-4E63-8F1A-DC713D7C837D@apple.com>
References: <42A7CBD6.5040501@iki.fi>
	<6B25C835-9F0B-4E63-8F1A-DC713D7C837D@apple.com>
Message-ID: <d5c0543705061002247e125396@mail.gmail.com>

On 6/10/05, Maciej Stachowiak <mjs@apple.com> wrote:
> There's really several different things in the KWQ directory:
> 
> 1) Fairly platform-agnostic replacements for things like data
> structures and QString (QDict is one exception here, but we'll be
> changing that to not rely on CFDictionary any more). These could just
> be used for any platform that uses KWQ instead of the real Qt.

Hmm, CF Lite (Core Foundation Lite)? The only issue I see is the
license that is neither BSD nor LGPL for the CFLite sources... But
those could then be ported across various platforms, already working
for Linux), and the data structures and so forth are nice, string
classes that support Unicode, unless there's too much overlap between
KQW and CFLite...

--Kent

From kent.sandvik at gmail.com  Fri Jun 10 02:29:18 2005
From: kent.sandvik at gmail.com (Kent Sandvik)
Date: Tue Oct  9 17:52:52 2007
Subject: [webkit-dev] Porting Gtk+WebCore
In-Reply-To: <6B25C835-9F0B-4E63-8F1A-DC713D7C837D@apple.com>
References: <42A7CBD6.5040501@iki.fi>
	<6B25C835-9F0B-4E63-8F1A-DC713D7C837D@apple.com>
Message-ID: <d5c054370506100229592b21e4@mail.gmail.com>

On 6/10/05, Maciej Stachowiak <mjs@apple.com> wrote:
> 2) Completely platform/toolkit specific implementations of the Qt
> widgets. We'd need separate implementations of these per port - I'm
> not sure how much of the code if any is shareable across ports.

I have not checked KWQ inside out, but if a large part of the widget
drawing is based on graphics primitives, then the layer would mostly
be to map the draw routines -- assuming WebCore should have a uniform
look on widgets. Or if the attempt is to map the web widgets to native
ones for preserving the look and feel, then of course another solution
is needed.

In my LiTE/DirectFB case, I could happily just implement the drawing
functions, to make widgets there's a need for a platform widget layer.

Qt used to do as much as possible primitive drawing to emulate the
platform widgets -- fortunately the MacOSX side changed, it was a drag
to try to catch up with the tiny pixel changes in Aqua from release to
release...

--Kent

From kevino at theolliviers.com  Fri Jun 10 08:07:45 2005
From: kevino at theolliviers.com (Kevin Ollivier)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] JSCore patch question and wxWebCore
In-Reply-To: <CF710F99-6CD2-4A87-94A9-7EFA01A8EB12@apple.com>
References: <96BAA4B6-DC66-4A39-8BD4-8ABF25B62CBF@theolliviers.com>
	<CF710F99-6CD2-4A87-94A9-7EFA01A8EB12@apple.com>
Message-ID: <369965BA-A378-4DF5-8198-B69E43BD8310@theolliviers.com>

Hi Maciej,

On Jun 9, 2005, at 10:38 PM, Maciej Stachowiak wrote:

[snip]

> Hey, that's great news. We're definitely interested in ports to  
> other platforms, and we'll be working to restructure our tree to  
> make this feasible. We want to make kwq into a true multiplatform  
> porting layer which can adapt to multiple operation systems and GUI  
> toolkits.

Wow, great! Factoring out all the common bits of KWQ, JSCore, etc.  
will make maintaining our port (and starting new ones) that much easier!

>
>> Related to this project, I had a couple questions for WebKit  
>> developers:
>>
>> 1) We have a patch for JSCore 412 that includes some simple  
>> compilation fixes like added headers and such to get it to compile  
>> on Linux. Are you interested in this, and if so, do we just submit  
>> it to the WebKit bugzilla?
>>
>
> Sure, we'd love to see these changes. The very best way to do it  
> would be to file an appropriate bug in bugzilla, attach a patch,  
> and send email to webkit-changes when it's ready for review. If the  
> patch is large and covers multiple separate issues, then splitting  
> it would help a lot.

It's not very big at all. :-) We specifically targeted issues that we  
felt wouldn't cause any conflicts or problems with the Mac OS X  
version of JSCore.

We did have to, for example, remove some CF-based classes and replace  
them with more portable ones, but I'll explain more about that in a  
later message.

I need to port the patch to the CVS HEAD version and make sure it  
still applies cleanly though, so I'll do that then submit it.

>
>> 2) Is the WebKit site and mailing list going to be the primary  
>> discussion and project space for WebCore as well now? As WebKit is  
>> a superset, I wasn't sure if this was more appropriate here, or if  
>> WebCore's discussion forum was a more appropriate place.
>>
>
> Yes, this list is going to be the main forum for discussion of  
> WebKit, WebCore and JavaScriptCore development.
>
>
>> Anyways, the newly open-sourced WebKit will definitely help us in  
>> our implementation, and I hope that our work can be useful to the  
>> WebKit development team as well. It will certainly be of great  
>> benefit to the wxWidgets project!
>>
>
> Cool, we sure hope it helps, and we'd totally be happy to see your  
> work in our tree.

Thanks! It's great to see Apple supporting and encouraging these  
initiatives!

Kevin

From kevino at theolliviers.com  Fri Jun 10 08:32:13 2005
From: kevino at theolliviers.com (Kevin Ollivier)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] Porting Gtk+WebCore
In-Reply-To: <6B25C835-9F0B-4E63-8F1A-DC713D7C837D@apple.com>
References: <42A7CBD6.5040501@iki.fi>
	<6B25C835-9F0B-4E63-8F1A-DC713D7C837D@apple.com>
Message-ID: <189BF388-8542-4D4E-9AE6-AF0521D8E22F@theolliviers.com>

Hi Maciej,

On Jun 10, 2005, at 12:02 AM, Maciej Stachowiak wrote:

[snip]

> This is a question that some of us on the Safari/WebKit team have  
> thought about, but we're not sure which way to go yet. As I see it,  
> there's two basic options:
>
> A) Use autotools on every possible platform, even Mac OS X. We used  
> to do this way long ago towards the start of the project, and over  
> time we converted to Xcode because of all the nice things we get  
> from it. So in some ways this would be more of a pain for the  
> existing WebKit developers at Apple.
>
> B) Use Xcode projects on OS X, and autotools for ports to more  
> traditional unix systems (Linux, FreeBSD, etc). The major downside  
> to this is that to make any kind of build change (even just adding  
> a new file), you would have to do it twice. And not only that you  
> would really need a Mac even if that is not your primary dev  
> platform, since the Xcode project file format is not really human- 
> editable.
>
> We're really not sure yet which of these is better. I think it  
> might be best to start with B, and consider converting to A someday  
> if there are enough active developers on non-Mac platforms.

What we're using for wxWebCore is a program called Bakefile (http:// 
bakefile.sf.net). It is already being used to generate the wxWidgets  
makefiles, and as you may be aware, wxWidgets has a massive build  
system and supports a large variety of different compilers and  
platforms. So there's some proof that this software works. :-) The  
only compilers/tools I can think that aren't "officially" supported  
are (unfortunately) XCode, and CodeWarrior. We manually maintain  
makefiles for those compilers at the moment. However, a version of  
Bakefile with basic XCode support does exist in their CVS, so it's  
not as if no one is working to resolve these issues.

The nice part about this system is, while it's multiplatform, most  
developers can just work with the generated makefiles for their  
compiler/platform and don't have to install additional tools. You  
only need Bakefile if you want to regenerate makefiles from the  
original Bakefile.

I think this would be ideal for the multiplatform components because  
you can create a Bakefile template for the multiplatform bits with  
all the common defines, sources, etc. that should build everywhere,  
and each port can simply include that Bakefile into their own port.  
That way, they can choose which compilers/platforms they support, and  
build makefiles for those, while at the same time whatever they  
choose they don't have to write a separate makefile to build the  
cross-platform bits.

Here's our wxWebCore Bakeilfe. As you can see, it's an XML-based script:

http://svn.berlios.de/viewcvs/wxwebcore/wxwebcore/trunk/wxwebcore.bkl? 
rev=190&view=markup

I tried building our JSCore on Windows the other day, and it took  
literally just a couple minutes to modify the bakefile not to build  
WebCore sources and create a full-fledged MSVC DSP/DSW project. Of  
course, MSVC doesn't have access to "stdint.h" and there's the  
threading issues that others have mentioned, so it didn't build out  
of the box. ;-/ Yet. ;-)

>
>> KWQ side of WebKit is also heavliy OSX dependent. Any ideas how to  
>> make this different? Especially refactoring the bridge and  
>> generalizing the KWQ widgets to support Carbon, Gtk+, Windows  
>> widgets needs a bit of thought.
>>
>
> There's really several different things in the KWQ directory:
>
> 1) Fairly platform-agnostic replacements for things like data  
> structures and QString (QDict is one exception here, but we'll be  
> changing that to not rely on CFDictionary any more). These could  
> just be used for any platform that uses KWQ instead of the real Qt.
>
> 2) Completely platform/toolkit specific implementations of the Qt  
> widgets. We'd need separate implementations of these per port - I'm  
> not sure how much of the code if any is shareable across ports.

In my experience, not much. I don't think it's really worth going  
through these files and trying to separate out common bits.

> 3) Bridging logic, for binding to an API wrapper layer. This is  
> mostly KWQKHTMLPart and WebCoreBridge. Unfortunately these have
>
> 4) Bridging to system APIs that are implemented in WebKit, stuff  
> like WebTextRenderer.m. This might not be needed at all for other  
> ports. I'm not really sure.

 From looking at GTK+WebCore and our own port, I personally think  
each port needs to make that decision separately, and it's fairly  
dependent on what the API being ported to already supports. At first  
I wanted to mimic the WebCore API simply to make merging/porting code  
changes a bit easier, but I found that wx and Cocoa/ObjC are of  
course different toolkits and different solutions should sometimes be  
used for each. So sometimes there is overlap, sometimes not, but I  
think it's fair to say classes like that won't always be needed for  
other ports or may be implemented in a very different manner.

I think pulling out the common bits and changing them to .cpp files  
(and many can just have their filename changed :-) would be a great  
start towards easing maintenance of the various
ports. You could probably just add a "common" subdirectory under kwq,  
as well as one for each port "cocoa", "gtk", "wx"... In any case, the  
less stuff we have to be worried about getting out of sync, the better!

Thanks,

Kevin

>
>> I think the main issues are defining how the WebKit portability  
>> project relates to the Apple's WebKit. Anyway, I can happily help  
>> porting the Gtk+WebCore. It'd be great even if the project was  
>> just hosted at opendarwin, because then it might attract more  
>> people actually working on it.
>>
>
> That would be awesome. We'd definitely be happy to host it here,  
> and we would do our best to encourage more contributors.
>
> Regards,
> Maciej
>
> _______________________________________________
> webkit-dev mailing list
> webkit-dev@opendarwin.org
> http://www.opendarwin.org/mailman/listinfo/webkit-dev
>


From kevino at theolliviers.com  Fri Jun 10 08:59:51 2005
From: kevino at theolliviers.com (Kevin Ollivier)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] Porting Gtk+WebCore
In-Reply-To: <d5c0543705061002247e125396@mail.gmail.com>
References: <42A7CBD6.5040501@iki.fi>
	<6B25C835-9F0B-4E63-8F1A-DC713D7C837D@apple.com>
	<d5c0543705061002247e125396@mail.gmail.com>
Message-ID: <39BDC6C0-46AB-413A-9058-799B19DF8079@theolliviers.com>

Hi Kent,

On Jun 10, 2005, at 2:24 AM, Kent Sandvik wrote:

> On 6/10/05, Maciej Stachowiak <mjs@apple.com> wrote:
>
>> There's really several different things in the KWQ directory:
>>
>> 1) Fairly platform-agnostic replacements for things like data
>> structures and QString (QDict is one exception here, but we'll be
>> changing that to not rely on CFDictionary any more). These could just
>> be used for any platform that uses KWQ instead of the real Qt.
>>
>
> Hmm, CF Lite (Core Foundation Lite)? The only issue I see is the
> license that is neither BSD nor LGPL for the CFLite sources... But
> those could then be ported across various platforms, already working
> for Linux), and the data structures and so forth are nice, string
> classes that support Unicode, unless there's too much overlap between
> KQW and CFLite...

BTW, I wanted to point out that when we started wxWebCore, we  
evaluated using CFLite, only to find that the software no longer  
builds outside of OS X/Darwin (even w/patches applied) and hasn't for  
some time.

In order to get it to build, I had to go back to using the CFLite  
sources from initial Panther releases, which was the version used in  
the CFLite tutorial on the ADC web site. (even some subsequent 10.3.x  
releases of CFLite didn't build) In addition, in newer versions,  
there are now several places where CFLite references private OS X/ 
Darwin headers. ;-/ It's possible we could have got it to work  
somehow, but we decided that we couldn't use CFLite for our port if  
it wasn't being maintained in a cross-platform manner.

It would, of course, be great if CFLite were made to work cross- 
platform again and have Windows support added. But IMHO, looking at  
the sources, it's probably an easier task to remove CF from common  
bits of KWQ and JSCore (as there isn't a whole lot) than it is to  
have someone maintaining CFLite cross-platform and being sure it  
builds on Windows as well, etc. There's lots of CF code in the  
platform-specific part, but that's closely tied with Cocoa, so we had  
to re-implement those bits anyways, and it was easier just to use our  
own APIs for that. So far, that's been our experience.

Thanks,

Kevin

From darin at apple.com  Fri Jun 10 09:59:40 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] Porting Gtk+WebCore
In-Reply-To: <39BDC6C0-46AB-413A-9058-799B19DF8079@theolliviers.com>
References: <42A7CBD6.5040501@iki.fi>
	<6B25C835-9F0B-4E63-8F1A-DC713D7C837D@apple.com>
	<d5c0543705061002247e125396@mail.gmail.com>
	<39BDC6C0-46AB-413A-9058-799B19DF8079@theolliviers.com>
Message-ID: <9BEEB8D4-1A2F-4E46-82F6-5C771C4F0952@apple.com>

On Jun 10, 2005, at 8:59 AM, Kevin Ollivier wrote:

> IMHO, looking at the sources, it's probably an easier task to  
> remove CF from common bits of KWQ and JSCore (as there isn't a  
> whole lot) than it is to have someone maintaining CFLite cross- 
> platform and being sure it builds on Windows as well, etc. There's  
> lots of CF code in the platform-specific part, but that's closely  
> tied with Cocoa, so we had to re-implement those bits anyways, and  
> it was easier just to use our own APIs for that. So far, that's  
> been our experience.

I agree completely with this. When we've talked about this internally  
in the Safari and WebKit team at Apple, we've had this approach in  
mind. It's great to use CF code when it's about connecting to the  
platform, but I believe we can remove use of CF in common parts  
easily without causing any troubles on the Mac OS X platform.

     -- Darin


From darin at apple.com  Fri Jun 10 10:49:44 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] build-related improvements I'm thinking of
Message-ID: <56A08F21-AB35-40D1-8BC4-9C20C80A9753@apple.com>

Here are a few things I'd like to improve that are build-related:

     1) The run-webkit-tests script doesn't work yet for Xcode 2.1  
users. Should be easy to fix and I want to do that.

     2) I want to figure out why many of the Mozilla JavaScript tests  
are failing for people other than the Safari team. For us, the  
expected and actual results currently match on TOT, but for most  
others there are many unexpected successes and many unexpected  
failures. Need to fix that.

     3) I don't like the way you have to pass the build style into  
every script now -- if you want to use Development build style you  
have to pass it to every single command, and run-safari has a pretty  
weak heuristic where it looks in multiple directories that could lead  
to running the wrong Safari binary. I want to put a "default build  
style" file inside the product build directory, have a script to set  
that, and have all the other scripts obey that unless you explicitly  
specify Development or Deployment style. Other details: I want the  
script that changes build styles to clean out the build directories  
if you are using Xcode 2.0 but not if you are using Xcode 2.1.

     4) I want to update the building page <http:// 
webkit.opendarwin.org/building/build.html> to remove step 1, since  
setting the build preference for Xcode is no longer necessary.

I'm posting this to the list today in case someone has other ideas  
and wants to stop me or advise me.

I wonder if I should put any of these into Bugzilla.

     -- Darin


From dlazaro at well.com  Fri Jun 10 12:49:10 2005
From: dlazaro at well.com (=?ISO-8859-1?Q?David_L=E1zaro_Saz?=)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] Xcode editor settings
Message-ID: <B987CBF2-3A89-4571-95F6-87712BF138E5@well.com>

Hi there,

I'm wondering how did you (the original WebKit developers) recommend  
to configure Xcode (I'm using 2.1) in order to edit WebKit files.  
Right now it's very strange for me because there is something in the  
coding style that really doesn't reflect my own. Lines are wider than  
wide, for example, as message sends are almost never broken in  
multiple lines.

Maybe is that I have to get used to it, or that my PowerBook 15  
screen is smaller than the ones in which it was developed, don't  
know. So I think it would help us knowing what layout and preferences  
are you using or recommending in order to adapt my environment.

I also think that that "never break a message" should be in the  
coding guidelines if it is the preferred form.

Cheers,

David.


From pjrgois at oniduo.pt  Fri Jun 10 13:10:19 2005
From: pjrgois at oniduo.pt (=?ISO-8859-1?Q?Paulo_Jorge_Rodrigues_G=F3is?=)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] Magnifying glass on downloads window does not select
	file in Finder while downloading
Message-ID: <36B3248E-6EA8-4CE0-B000-E06F444F9FE0@oniduo.pt>

1. In the Download window of Safari the little magnifying glass next  
to a listed downloading file, does not highlight the corresponding  
file on Finder wille the download is still in progress.

2. Also some internet-enabled image files don't get unwrapped out of  
the Safari .download package container after the download has  
finished. This occours when the Post-processing option "Don't move  
Internet-enabled images to Trash" (accessible through Disk Utility  
preferences) is checked.

Paulo Jorge Rodrigues G?is

pjrgois@oniduo.pt


-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2363 bytes
Desc: not available
Url : http://lists.macosforge.org/pipermail/webkit-dev/attachments/20050610/47c8b156/smime.bin
From darin at apple.com  Fri Jun 10 13:15:40 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] Xcode editor settings
In-Reply-To: <B987CBF2-3A89-4571-95F6-87712BF138E5@well.com>
References: <B987CBF2-3A89-4571-95F6-87712BF138E5@well.com>
Message-ID: <2C9B0CF2-99DD-4FB4-BB37-C6C788B712ED@apple.com>

On Jun 10, 2005, at 12:49 PM, David L?zaro Saz wrote:

> I'm wondering how did you (the original WebKit developers)  
> recommend to configure Xcode (I'm using 2.1) in order to edit  
> WebKit files. Right now it's very strange for me because there is  
> something in the coding style that really doesn't reflect my own.  
> Lines are wider than wide, for example, as message sends are almost  
> never broken in multiple lines.

The only important settings are to set Indentation as follows:

     - do *not* insert tabs instead of spaces
     - tab width: 8 (won't matter once we expunge all the tabs, but  
that could take a while)
     - indent width: 4

But I don't think this addresses the issue we are talking about. I  
think you're correct if you're saying that some of our source code  
has lines that are long and don't fit on a small screen.

> Maybe is that I have to get used to it, or that my PowerBook 15  
> screen is smaller than the ones in which it was developed, don't  
> know. So I think it would help us knowing what layout and  
> preferences are you using or recommending in order to adapt my  
> environment.

Some of us do use computers with screens that size, but most use much  
bigger screens. I do a lot of my work on a PowerBook 17".

> I also think that that "never break a message" should be in the  
> coding guidelines if it is the preferred form.

I'm not sure I'd put it quite like that. We will put parameters to  
function calls on different lines if the line gets super long, but I  
agree it would be good to somehow address this in the coding guidelines.

As far as personal preferences are concerned, if there is a function  
call line that's very long, I prefer to make it shorter by  
introducing some named local variables before breaking it across  
multiple lines. Often naming the parameters can provide additional  
documentation about what's intended.

     -- Darin


From darin at apple.com  Fri Jun 10 13:17:55 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] Magnifying glass on downloads window does not
	select	file in Finder while downloading
In-Reply-To: <36B3248E-6EA8-4CE0-B000-E06F444F9FE0@oniduo.pt>
References: <36B3248E-6EA8-4CE0-B000-E06F444F9FE0@oniduo.pt>
Message-ID: <880C1402-9AD2-4BF4-A53A-6D8918532B88@apple.com>

On Jun 10, 2005, at 1:10 PM, Paulo Jorge Rodrigues G?is wrote:

> 1. In the Download window of Safari the little magnifying glass  
> next to a listed downloading file, does not highlight the  
> corresponding file on Finder wille the download is still in progress.
>
> 2. Also some internet-enabled image files don't get unwrapped out  
> of the Safari .download package container after the download has  
> finished. This occours when the Post-processing option "Don't move  
> Internet-enabled images to Trash" (accessible through Disk Utility  
> preferences) is checked.

This mailing list is not for bug reports. Web Kit reports should go  
to bugzilla.opendarwin.org.

These are Safari bug reports. Safari itself is not part of the WebKit  
Open Source Project, and Safari bug reports should go to <http:// 
bugreport.apple.com>. The open source contributors reading this list  
can't fix these kinds of Safari bugs that are truly bugs in the  
application rather than in the Web Kit.

     -- Darin


From patrick.forget2 at gmail.com  Fri Jun 10 14:08:13 2005
From: patrick.forget2 at gmail.com (Patrick Forget)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] Win32 port / KWQ
Message-ID: <1870a4aa050610140827019bc2@mail.gmail.com>

Hello everyone,

A year ago I have try to port WebCore (1.25) to the Windows platform. For 
this, I took the file in /kwq and try to convert them to C++ using native 
windows call for the widget. However, I have gave up a few month later 
because I did find the job way too difficult (and also lost some interest on 
this project).

If I recall, most of Objective-C files were converted to C++ (even if there 
is no implementation). I do have a working implementation (at least partial) 
for KWQWidget, KWQButton, KWQPainter using the Win32 api.

I will not have any time on myself to work on project for the next month 
(vacations and some other stuff are more important). But still, it may be 
useful to give the code so at least I didn't work for nothing, and it may 
also spare some time on other people by providing a starting point.

Hope I can help

Patrick
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.macosforge.org/pipermail/webkit-dev/attachments/20050610/cb495282/attachment.html
From justin at xiondigital.net  Fri Jun 10 14:48:01 2005
From: justin at xiondigital.net (Justin Haygood)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] PCRE
Message-ID: <42AA0A91.2070801@xiondigital.net>

I want to make a suggestion to Apple: can ya'll update the PCRE in CVS 
HEAD to PCRE 5.0 (6.0 is too complex, and 5.0 has a fully working Win32 
implementation)?

This would make it easier to keep my local copy of WebKit in sync with 
CVS HEAD.. not having to use different versions of a library ya'll use 
just to compile :-D.

--Justin Haygood

From dlazaro at well.com  Fri Jun 10 14:52:02 2005
From: dlazaro at well.com (=?ISO-8859-1?Q?David_L=E1zaro_Saz?=)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] Xcode editor settings
In-Reply-To: <2C9B0CF2-99DD-4FB4-BB37-C6C788B712ED@apple.com>
References: <B987CBF2-3A89-4571-95F6-87712BF138E5@well.com>
	<2C9B0CF2-99DD-4FB4-BB37-C6C788B712ED@apple.com>
Message-ID: <7435C32B-9F5A-4962-8CF8-B0F674C32692@well.com>


On 10/06/2005, at 22:15, Darin Adler wrote:

> I'm not sure I'd put it quite like that. We will put parameters to  
> function calls on different lines if the line gets super long, but  
> I agree it would be good to somehow address this in the coding  
> guidelines.

Yes, because that is a preference that could vary wildly between  
different developers. I, for one, write almost vertical code.  I  
sometimes joke calling it Chinese notation.

There's also another curiosity that I'd like to know: why is the  
WebKit project divided in folders with the .subproj extension and  
only a .pbproj project file available? Isn't that too NeXT for such a  
modern project as the WebKit?

Thanks for your previous answers,

David.


From darin at apple.com  Fri Jun 10 14:55:17 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] PCRE
In-Reply-To: <42AA0A91.2070801@xiondigital.net>
References: <42AA0A91.2070801@xiondigital.net>
Message-ID: <0AB0E83E-6F74-42AC-903C-01CD94F8A1DE@apple.com>

On Jun 10, 2005, at 2:48 PM, Justin Haygood wrote:

> I want to make a suggestion to Apple: can ya'll update the PCRE in  
> CVS HEAD to PCRE 5.0 (6.0 is too complex, and 5.0 has a fully  
> working Win32 implementation)?

Well, our variant of PCRE has UTF-16 support. We can't just merge to  
a newer PCRE -- someone has to roll the changes in. I think it's a  
great project to do. And anyone could do it -- there's nothing Apple- 
specific about such a project.

Another great thing to do would be to contribute the UTF-16 support  
to the PCRE maintainer and see if he wants to support that.

In addition, we need to change many things in PCRE to implement the  
JavaScript specification, so there's a lot more work needed in this  
area. And we might even end up moving to another regular-expression  
library.

     -- Darin


From darin at apple.com  Fri Jun 10 15:08:53 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] Xcode editor settings
In-Reply-To: <7435C32B-9F5A-4962-8CF8-B0F674C32692@well.com>
References: <B987CBF2-3A89-4571-95F6-87712BF138E5@well.com>
	<2C9B0CF2-99DD-4FB4-BB37-C6C788B712ED@apple.com>
	<7435C32B-9F5A-4962-8CF8-B0F674C32692@well.com>
Message-ID: <E3C01BCA-CEBC-403C-8657-F001FD9A88B3@apple.com>

On Jun 10, 2005, at 2:52 PM, David L?zaro Saz wrote:

> There's also another curiosity that I'd like to know: why is the  
> WebKit project divided in folders with the .subproj extension and  
> only a .pbproj project file available? Isn't that too NeXT for such  
> a modern project as the WebKit?

That's because the engineer who started that particular framework,  
Richard Williamson, chose that style. And it's not so easy to change  
such things with cvs. I suspect that if we go over to Subversion we  
will rename those directories, since it will then be easy to do so  
without damaging project history.

I'd like to find a nice place on our website or Wiki to keep track of  
"renaming ideas". I often have files and classes I'd like to rename,  
and I want to float those names with the community for a while before  
doing the name changes.

     -- Darin


From justin at xiondigital.net  Fri Jun 10 15:15:37 2005
From: justin at xiondigital.net (Justin Haygood)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] Widget / Drawing API thoughts
Message-ID: <42AA1109.6030602@xiondigital.net>

Even though I'm nowhere near there yet (got to get JSCore working first 
;) ), here is an idea:

Have KWQ use cross-platform C/C++ implementations, keeping everything as 
high level as possible, and use C++ inheritence to inherit from platform 
specific implementations.

for instance, QRegion can be implemented sans Cocoa for the stuff that 
is already cross platform, but inherit from a KWQRegion which has 
different implementations for Cocoa, Win32, GTK+, Qt (hey, why not?), 
wxWidgets, etc...

possible directory layout:

KWQ\
    Platform\
          Cocoa\
             C++ / Objective C sources for Cocoa
          GTK+\
             C++ / C sources for GTK+
          wxWidgets\
             C++ sources for wxWidgets
          Win32\
             C++ / C sources for Win32
    \C++ sources which are fairly cross platform (there's plenty)

And possibly do this for other places as well... to separate Cocoa calls 
from the rest.

From dlazaro at well.com  Fri Jun 10 15:21:01 2005
From: dlazaro at well.com (=?ISO-8859-1?Q?David_L=E1zaro_Saz?=)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] Xcode editor settings
In-Reply-To: <E3C01BCA-CEBC-403C-8657-F001FD9A88B3@apple.com>
References: <B987CBF2-3A89-4571-95F6-87712BF138E5@well.com>
	<2C9B0CF2-99DD-4FB4-BB37-C6C788B712ED@apple.com>
	<7435C32B-9F5A-4962-8CF8-B0F674C32692@well.com>
	<E3C01BCA-CEBC-403C-8657-F001FD9A88B3@apple.com>
Message-ID: <5CA02D13-A3B4-40E3-A873-875924398568@well.com>


On 11/06/2005, at 0:08, Darin Adler wrote:

> That's because the engineer who started that particular framework,  
> Richard Williamson, chose that style. And it's not so easy to  
> change such things with cvs. I suspect that if we go over to  
> Subversion we will rename those directories, since it will then be  
> easy to do so without damaging project history.

Yes, Subversion would be much nicer. Although a rename is still a  
delete followed by an add, the capability of following history  
through renaming is worth millions in flexibility and refactoring  
capabilities.

For what is worth, I've been testing the new Xcode 2.1 support for  
storing bundles in Subversion today with some old projects and that  
was the last piece I needed for a full repository conversion. It has  
worked without a glitch so far.

> I'd like to find a nice place on our website or Wiki to keep track  
> of "renaming ideas". I often have files and classes I'd like to  
> rename, and I want to float those names with the community for a  
> while before doing the name changes.

Community-driven refactoring? Nice.

The day that Xcode supports full refactoring and full plug-ins--model  
editor, view and editor extending, for example--I'll be so happy that  
I'm sure it will hurt.

Cheers,

David.


From justin at xiondigital.net  Fri Jun 10 18:24:42 2005
From: justin at xiondigital.net (Justin Haygood)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] PCRE 6.0 in JavaScriptCore
Message-ID: <42AA3D5A.20702@xiondigital.net>

I'm going to undertake getting PCRE 6.0 merged into JavaScriptCore, and 
merging the UTF-16 support improvements from JSCore PCRE to PCRE 6.0. 
This would be mutual for both projects:

1. JSCore gets newer/better PCRE
2. PCRE gets better support.

In fact, my local Win32 build already builds against it, so no code 
needs to be changed on the KJS side of JSCore.

From justin at xiondigital.net  Fri Jun 10 18:27:01 2005
From: justin at xiondigital.net (Justin Haygood)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] w00t, regression tests from testkjs on Win32
Message-ID: <42AA3DE5.3080003@xiondigital.net>

For a very quick port of KJS to Win32 from JavaScriptCore, here's the 
results:

Test List: All tests
Skip List: ecma/Date
967 test(s) selected, 962 test(s) completed, 319 failures reported 
(33.16% failed)
Engine command line: testkjs.exe
OS type:
Testcase execution time: 7 minutes, 13 seconds.
Tests completed on Fri Jun 10 21:17:47 2005.

Most of that time was spent clicking Don't Send in the Watson error 
reporter. 131 regressions failed, so the rest (188) are crashes. When 
and where they crash, I don't know. But its my job to find out and bring 
Win32 JavaScriptCore in sync with OS X JavaScriptCore in stability.

From justin at xiondigital.net  Sat Jun 11 08:57:40 2005
From: justin at xiondigital.net (Justin Haygood)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] Suggestion: Bonsai
Message-ID: <42AB09F4.2090705@xiondigital.net>

Is it possible to have a Bonsai server setup somewhere so that its easy 
to see CVS changes? http://www.mozilla.org/bonsai.html is the URL for 
bonsai.

From mike at maibaum.org  Sat Jun 11 09:01:15 2005
From: mike at maibaum.org (Michael Maibaum)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] Porting Gtk+WebCore
In-Reply-To: <39BDC6C0-46AB-413A-9058-799B19DF8079@theolliviers.com>
References: <42A7CBD6.5040501@iki.fi>
	<6B25C835-9F0B-4E63-8F1A-DC713D7C837D@apple.com>
	<d5c0543705061002247e125396@mail.gmail.com>
	<39BDC6C0-46AB-413A-9058-799B19DF8079@theolliviers.com>
Message-ID: <FE10EE26-6184-411C-9FB4-BE08E5ED86E5@maibaum.org>


On 10 Jun 2005, at 16:59, Kevin Ollivier wrote:

> Hi Kent,
>
> On Jun 10, 2005, at 2:24 AM, Kent Sandvik wrote:
>
>
>> On 6/10/05, Maciej Stachowiak <mjs@apple.com> wrote:
>>
>>
>>> There's really several different things in the KWQ directory:
>>>
>>> 1) Fairly platform-agnostic replacements for things like data
>>> structures and QString (QDict is one exception here, but we'll be
>>> changing that to not rely on CFDictionary any more). These could  
>>> just
>>> be used for any platform that uses KWQ instead of the real Qt.
>>>
>>>
>>
>> Hmm, CF Lite (Core Foundation Lite)? The only issue I see is the
>> license that is neither BSD nor LGPL for the CFLite sources... But
>> those could then be ported across various platforms, already working
>> for Linux), and the data structures and so forth are nice, string
>> classes that support Unicode, unless there's too much overlap between
>> KQW and CFLite...
>>
>
> BTW, I wanted to point out that when we started wxWebCore, we  
> evaluated using CFLite, only to find that the software no longer  
> builds outside of OS X/Darwin (even w/patches applied) and hasn't  
> for some time.
>
> In order to get it to build, I had to go back to using the CFLite  
> sources from initial Panther releases, which was the version used  
> in the CFLite tutorial on the ADC web site. (even some subsequent  
> 10.3.x releases of CFLite didn't build) In addition, in newer  
> versions, there are now several places where CFLite references  
> private OS X/Darwin headers. ;-/ It's possible we could have got it  
> to work somehow, but we decided that we couldn't use CFLite for our  
> port if it wasn't being maintained in a cross-platform manner.
>
> It would, of course, be great if CFLite were made to work cross- 
> platform again and have Windows support added. But IMHO, looking at  
> the sources, it's probably an easier task to remove CF from common  
> bits of KWQ and JSCore (as there isn't a whole lot) than it is to  
> have someone maintaining CFLite cross-platform and being sure it  
> builds on Windows as well, etc. There's lots of CF code in the  
> platform-specific part, but that's closely tied with Cocoa, so we  
> had to re-implement those bits anyways, and it was easier just to  
> use our own APIs for that. So far, that's been our experience.



I just wanted to point out the efforts at OpendDarwin on  
libFoundation - http://libfoundation.opendarwin.org/ I know it has at  
least partial NSString support and is being built and tested against  
the Apple Foundation API specification. I have no idea if this is  
actually useful at this point, but ...

Michael

From kevino at theolliviers.com  Sat Jun 11 09:05:58 2005
From: kevino at theolliviers.com (Kevin Ollivier)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] Widget / Drawing API thoughts
In-Reply-To: <42AA1109.6030602@xiondigital.net>
References: <42AA1109.6030602@xiondigital.net>
Message-ID: <6D90642E-EFC0-4D32-BF5C-07D39A568F69@theolliviers.com>

Hi Justin,
On Jun 10, 2005, at 3:15 PM, Justin Haygood wrote:

> Even though I'm nowhere near there yet (got to get JSCore working  
> first ;) ), here is an idea:
>
> Have KWQ use cross-platform C/C++ implementations, keeping  
> everything as high level as possible, and use C++ inheritence to  
> inherit from platform specific implementations.
>
> for instance, QRegion can be implemented sans Cocoa for the stuff  
> that is already cross platform, but inherit from a KWQRegion which  
> has different implementations for Cocoa, Win32, GTK+, Qt (hey, why  
> not?), wxWidgets, etc...

I definitely agree something like this would be very helpful, but I'm  
curious as to why you'd want to inherit the platform-specific  
implementation from the base implementation, rather than vice-versa.

For example, what would be great for us is that the common classes  
all have KWQ(something)Base classes with virtual methods, from which  
we derive toolkit-specific implementations. This is helpful because  
even for completely "toolkit neutral" classes, like KWQBrush, we  
sometimes need to have a way of converting that to or from, say, a  
wxBrush that we can use. So with this approach, we could just add our  
accessor functions to a toolkit-specific implementation, and reuse  
the rest from the common implementation. For classes with no real way  
of having a 'toolkit-independent' implementation, base classes could  
just be stubs.

Doing things this way, we don't need to create a custom  
implementation if we don't need it - we just reuse the base class.  
But if we want to extend it in any way, we can just by deriving from  
it, and the only thing we ever need to worry about maintaining are  
our own extensions. :-) This will do a lot, IMHO, to keep  
implementations synchronized. This is actually how wxWidgets goes  
about maintaining all those different implementations.

Thanks,

Kevin

>
> possible directory layout:
>
> KWQ\
>    Platform\
>          Cocoa\
>             C++ / Objective C sources for Cocoa
>          GTK+\
>             C++ / C sources for GTK+
>          wxWidgets\
>             C++ sources for wxWidgets
>          Win32\
>             C++ / C sources for Win32
>    \C++ sources which are fairly cross platform (there's plenty)
>
> And possibly do this for other places as well... to separate Cocoa  
> calls from the rest.
> _______________________________________________
> webkit-dev mailing list
> webkit-dev@opendarwin.org
> http://www.opendarwin.org/mailman/listinfo/webkit-dev
>


From finlay.dobbie at gmail.com  Sat Jun 11 09:41:07 2005
From: finlay.dobbie at gmail.com (Finlay Dobbie)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] Porting Gtk+WebCore
In-Reply-To: <FE10EE26-6184-411C-9FB4-BE08E5ED86E5@maibaum.org>
References: <42A7CBD6.5040501@iki.fi>
	<6B25C835-9F0B-4E63-8F1A-DC713D7C837D@apple.com>
	<d5c0543705061002247e125396@mail.gmail.com>
	<39BDC6C0-46AB-413A-9058-799B19DF8079@theolliviers.com>
	<FE10EE26-6184-411C-9FB4-BE08E5ED86E5@maibaum.org>
Message-ID: <ab20c92d05061109417690f60d@mail.gmail.com>

On 6/11/05, Michael Maibaum <mike@maibaum.org> wrote:
> I just wanted to point out the efforts at OpendDarwin on
> libFoundation - http://libfoundation.opendarwin.org/ I know it has at
> least partial NSString support and is being built and tested against
> the Apple Foundation API specification. I have no idea if this is
> actually useful at this point, but ...

It's not. But don't let that stop you contributing! :-)

 -- Finlay

From mjs at apple.com  Sat Jun 11 12:53:55 2005
From: mjs at apple.com (Maciej Stachowiak)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] Suggestion: Bonsai
In-Reply-To: <42AB09F4.2090705@xiondigital.net>
References: <42AB09F4.2090705@xiondigital.net>
Message-ID: <E78237E8-CDDC-4906-86F7-1DDF422F0AB0@apple.com>


On Jun 11, 2005, at 8:57 AM, Justin Haygood wrote:

> Is it possible to have a Bonsai server setup somewhere so that its  
> easy to see CVS changes? http://www.mozilla.org/bonsai.html is the  
> URL for bonsai.

Yep, that's one of the enhancements we'd like to add.

Regards,
Maciej



From justin at xiondigital.net  Sat Jun 11 15:16:48 2005
From: justin at xiondigital.net (Justin Haygood)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] Stuck... again (Conserative GC)
Message-ID: <42AB62D0.8060805@xiondigital.net>

the Win32 API simply does not allow getting the base stack address of a 
thread, because:

1. not stable.. Windows *WILL* and *DOES* move that base address at will.
2. Its exclusively chosen and managed by Windows itself.. no ands, buts, 
or ors about it.

In fact, the only way to get it is via the *IoGetInitialStack(*); 
function, which isn't calleable by user space functions (its a kernel 
driver function, only defined in ntddk.h, and last time i checked, we 
don't want a browser running in kernel-space.

What would be an alternative way to implement a conservative GC that I 
can use?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.macosforge.org/pipermail/webkit-dev/attachments/20050611/ea4ea5c4/attachment.html
From darin at apple.com  Sun Jun 12 01:56:56 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] Stuck... again (Conserative GC)
In-Reply-To: <42AB62D0.8060805@xiondigital.net>
References: <42AB62D0.8060805@xiondigital.net>
Message-ID: <2A9B175D-9344-4111-A5F7-DEF6213BE33E@apple.com>

On Jun 11, 2005, at 3:16 PM, Justin Haygood wrote:

> the Win32 API simply does not allow getting the base stack address  
> of a thread, because:
>
> 1. not stable.. Windows WILL and DOES move that base address at will.
> 2. Its exclusively chosen and managed by Windows itself.. no ands,  
> buts, or ors about it.
>
> In fact, the only way to get it is via the IoGetInitialStack();  
> function, which isn't calleable by user space functions (its a  
> kernel driver function, only defined in ntddk.h, and last time i  
> checked, we don't want a browser running in kernel-space.
>
> What would be an alternative way to implement a conservative GC  
> that I can use?

To do the garbage collection we need to be able to walk all the  
addresses on the stack at one particular point in time.

The base address moving should not be an obstacle; it doesn't matter  
what it was in the past or what it will be in the future. All that  
matters is what the base is right at the moment garbage collection is  
occurring. On the other hand, I'm not even sure what it means to move  
the stack's base address.

The base address being chosen and managed by Windows doesn't sound  
like an obstacle either. That's equally true on the Mac OS X platform  
and other Unix platforms. Of course the OS chooses the base address  
for the stack -- that's normal.

Walking the stack is definitely possible on Windows. Keep trying and  
I'm sure you can find out how. I'm sorry this is proving so difficult  
to research.

     -- Darin


From mjs at apple.com  Sun Jun 12 02:16:31 2005
From: mjs at apple.com (Maciej Stachowiak)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] Stuck... again (Conserative GC)
In-Reply-To: <42AB62D0.8060805@xiondigital.net>
References: <42AB62D0.8060805@xiondigital.net>
Message-ID: <D8059205-457C-40FD-98DA-050CB35E3FCD@apple.com>


On Jun 11, 2005, at 3:16 PM, Justin Haygood wrote:

> the Win32 API simply does not allow getting the base stack address  
> of a thread, because:
>
> 1. not stable.. Windows WILL and DOES move that base address at will.

This part seems unlikely - I could imagine moving the physical  
address of the stack, but what would be the point of moving the  
virtual address? Further, this would break any code that kept a  
pointer to anything on the stack.

But as Darin pointed out, it doesn't matter, because you only need to  
get it at one particular point in time, it does not need to be stable  
for all time.

> 2. Its exclusively chosen and managed by Windows itself.. no ands,  
> buts, or ors about it.

It's ok that Windows chooses it - it's chosen by the OS on pretty  
much all platforms. We don't need to change the stack base, just to  
get it.

> What would be an alternative way to implement a conservative GC  
> that I can use?

My suggestion for how to research this would be to look at the code  
for the Boehm garbage collector. This is a portable conservative GC  
implementation for C++, so they must have some way of getting the  
range of the stack on windows. I'm not sure if the Boehm GC is  
threadsafe, but as I pointed out it should be sufficient to just get  
the stack base for the current thread or for the main thread, and to  
disable marking of other threads.

http://www.hpl.hp.com/personal/Hans_Boehm/gc/

I took a quick peek in the source and it does appear to have a way to  
get the stack base on win32.

Regards,
Maciej


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.macosforge.org/pipermail/webkit-dev/attachments/20050612/a2bbdb5c/attachment.html
From justin at xiondigital.net  Sun Jun 12 09:21:34 2005
From: justin at xiondigital.net (Justin Haygood)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] Stuck... again (Conserative GC)
In-Reply-To: <D8059205-457C-40FD-98DA-050CB35E3FCD@apple.com>
References: <42AB62D0.8060805@xiondigital.net>
	<D8059205-457C-40FD-98DA-050CB35E3FCD@apple.com>
Message-ID: <42AC610E.2030306@xiondigital.net>

Thank you, I got it fixed.

At least the license of the Boehm GC allows blatent copy/pasting into 
LGPLed sources ;-) .

If it works, expect a patch by the end of the week.


Maciej Stachowiak wrote:

>
> On Jun 11, 2005, at 3:16 PM, Justin Haygood wrote:
>
>> the Win32 API simply does not allow getting the base stack address of 
>> a thread, because:
>>
>> 1. not stable.. Windows *WILL* and *DOES* move that base address at will.
>
>
> This part seems unlikely - I could imagine moving the physical address 
> of the stack, but what would be the point of moving the virtual 
> address? Further, this would break any code that kept a pointer to 
> anything on the stack.
>
> But as Darin pointed out, it doesn't matter, because you only need to 
> get it at one particular point in time, it does not need to be stable 
> for all time.
>
>> 2. Its exclusively chosen and managed by Windows itself.. no ands, 
>> buts, or ors about it.
>
>
> It's ok that Windows chooses it - it's chosen by the OS on pretty much 
> all platforms. We don't need to change the stack base, just to get it.
>
>> What would be an alternative way to implement a conservative GC that 
>> I can use?
>
>
> My suggestion for how to research this would be to look at the code 
> for the Boehm garbage collector. This is a portable conservative GC 
> implementation for C++, so they must have some way of getting the 
> range of the stack on windows. I'm not sure if the Boehm GC is 
> threadsafe, but as I pointed out it should be sufficient to just get 
> the stack base for the current thread or for the main thread, and to 
> disable marking of other threads.
>
> http://www.hpl.hp.com/personal/Hans_Boehm/gc/
>
> I took a quick peek in the source and it does appear to have a way to 
> get the stack base on win32.
>
> Regards,
> Maciej
>
>

From justin at xiondigital.net  Sun Jun 12 09:33:22 2005
From: justin at xiondigital.net (Justin Haygood)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] Stuck... again (Conserative GC)
In-Reply-To: <42AB62D0.8060805@xiondigital.net>
References: <42AB62D0.8060805@xiondigital.net>
Message-ID: <42AC63D2.2090104@xiondigital.net>

Ouch, crash in markStackObjectsConservatively()

The following two lines essentially cause the crash:

  char **p = (char **)start;
  char **e = (char **)end;

start and end work, and according to the debugger have the correct values.

p and e also have correct values, BUT also the debugger has this to say 
about them:

p: expression can't be evaluated
e: Bad Ptr

Maybe a Windows only quirk?

From darin at apple.com  Sun Jun 12 21:17:51 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] "review" flag now enabled in Bugzilla
Message-ID: <10D61961-2E11-4F4A-8036-42D3047AD81C@apple.com>

There's now a "review" flag enabled in Bugzilla for attachments. This  
lets you set a flag "review?" on an attachment to a bug, and  
optionally choose a preferred reviewer. Later a reviewer can set the  
flag "review+" or "review-" on the attachment.

I'll eventually put some notes about how to use this on the website.

It's a good idea to attach a patch to a bug and set the "review?"  
flag on the attachment before sending a patch to webkit-reviews. In  
fact, we might eventually require things be done that way so that we  
can easily keep track of all the patches that still need review.

     -- Darin


From opendarwin.org at mitzpettel.com  Mon Jun 13 01:18:51 2005
From: opendarwin.org at mitzpettel.com (Mitz Pettel)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] No line-number debug symbols in WebCore
Message-ID: <79C8008B-C8F3-4CD1-AA83-12C8CC04ABA9@mitzpettel.com>

It looks like WebCore is built with almost no SLINE symbols (don't  
have that problem with WebKit). Is there a separate symbols file to  
load into gdb to enable source-level debugging for WebCore, or a  
build setting that can be changed in order to generate line numbers  
in WebCore?

Thanks,
-- Mitz Pettel


From mjs at apple.com  Mon Jun 13 02:01:15 2005
From: mjs at apple.com (Maciej Stachowiak)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] No line-number debug symbols in WebCore
In-Reply-To: <79C8008B-C8F3-4CD1-AA83-12C8CC04ABA9@mitzpettel.com>
References: <79C8008B-C8F3-4CD1-AA83-12C8CC04ABA9@mitzpettel.com>
Message-ID: <BB210349-AE02-40EC-9110-8CCE3B80AB56@apple.com>


On Jun 13, 2005, at 1:18 AM, Mitz Pettel wrote:

> It looks like WebCore is built with almost no SLINE symbols (don't  
> have that problem with WebKit). Is there a separate symbols file to  
> load into gdb to enable source-level debugging for WebCore, or a  
> build setting that can be changed in order to generate line numbers  
> in WebCore?
>

Make a debug build, and you should have all the line numbers.

  - Maciej


From opendarwin.org at mitzpettel.com  Mon Jun 13 06:42:09 2005
From: opendarwin.org at mitzpettel.com (Mitz Pettel)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] No line-number debug symbols in WebCore
In-Reply-To: <BB210349-AE02-40EC-9110-8CCE3B80AB56@apple.com>
References: <79C8008B-C8F3-4CD1-AA83-12C8CC04ABA9@mitzpettel.com>
	<BB210349-AE02-40EC-9110-8CCE3B80AB56@apple.com>
Message-ID: <BA7AE807-0D42-4140-84BF-D2BF694B8475@mitzpettel.com>


On Jun 13, 2005, at 12:01 PM, Maciej Stachowiak wrote:

> Make a debug build, and you should have all the line numbers.
>
>  - Maciej

Thanks!

I set out to find out how to do it. I noticed the debug option of  
build-webkit, but then I saw that <http://webkit.opendarwin.org/ 
building/build.html> talks about set-webkit-configuration, which I  
didn't have. I figured I need to update my WebKitTools, but  
anoncvs.opensource.apple.com seems to be dead or unreachable now :-\

-- Mitz Pettel

From darin at apple.com  Sun Jun 12 21:17:51 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] "review" flag now enabled in Bugzilla
Message-ID: <10D61961-2E11-4F4A-8036-42D3047AD81C@apple.com>

There's now a "review" flag enabled in Bugzilla for attachments. This  
lets you set a flag "review?" on an attachment to a bug, and  
optionally choose a preferred reviewer. Later a reviewer can set the  
flag "review+" or "review-" on the attachment.

I'll eventually put some notes about how to use this on the website.

It's a good idea to attach a patch to a bug and set the "review?"  
flag on the attachment before sending a patch to webkit-reviews. In  
fact, we might eventually require things be done that way so that we  
can easily keep track of all the patches that still need review.

     -- Darin


From roland.geisler at nokia.com  Mon Jun 13 14:40:42 2005
From: roland.geisler at nokia.com (roland.geisler@nokia.com)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] Greetings from the Series 60 mobile browser team at
	Nokia
Message-ID: <6E2B2C4FBED4D84D80F52ECD1579D06823E7A0@bsebe101.NOE.Nokia.com>


RE: Recent press release: http://press.nokia.com/PR/200506/998214_5.html

Hi,

I'm heading marketing and strategy at Nokia for Series 60's new mobile browser that will be built upon WebCore/KHTML and JavaScriptCore/KJS. I am writing you this email to thank you for having built the Konqueror and Safari browser with the two components WebCore/KHTML and JavaScriptCore/KJS. I would like to introduce myself and some members from our core development team, and explain why we at Nokia have selected your code base for our future Series 60 mobile browser. I also hope that this will start a mutual dialogue among us that will support all of our projects in the future.

Not all of you might be familiar with Series 60. Series 60 is a smart phone software platform developed by Nokia, which enables feature rich applications on mobile devices. Series 60 is based on the Symbian OS and is written in C++. More information can be found from http://www.forum.nokia.com
and http://www.series60.com/.

I copied some of our core development team members on this email so you have their names and contact information. Antti Koivisto, whom you might know already, is one of the co-authors of KHTML and has been working for Nokia Research Center for the past few years and recently joined our mobile browser development team in Boston. David Carson and Deepika Chauhan are two of the original developers of the Nokia mobile browser. Zalan Bujtas, Prabhakar Marnadi, Yongjun Zhang and Sachin Padma have been working with mobile browsers for some years at Nokia in Helsinki and Boston. Keith Hollis has several years experience working with mobile browsers and has recently joined our team in Boston, earlier he was the principal person leading the port of the Opera web browser to the Symbian OS at Opera Software. Guido Grassel, Kimmo Kinnunen and Andrei Popescu are working at our Nokia Research Center in Helsinki (http://www.nokia.com/research/) where we have built the GTK port of Apple's WebCore that we released last year - http://gtk-webcore.sourceforge.net/.

The high performance, low memory consumption and small code footprint of KHTML and KJS make these components ideal for resource-constrained mobile devices. Clean architecture and good design create a good base for future development of mobile features. In addition, Web compliance was another important criteria for us. Congratulations to the KDE Konqueror developer team for building such a great browser.

Big thanks at this point also go to the Apple Safari team that has tremendously improved KHTML and KJS in many areas, in particular in Web compliance and performance.  WebCore and JavaScriptCore also offer a cleaner separation to the underlying operating system. For these reasons we at Nokia chose WebCore and JavaScriptCore as the code base for our Series 60 mobile browser.

Our plan is that the new Series 60 mobile browser will be available as a standard Series 60 application during the first half of 2006. 

We at Nokia are excited to use WebCore/KHTML and JavaScriptCore/KJS for our future Series 60 mobile browser. I hope that we can start a dialogue with your community and the Apple Safari team on how to "mobilize" WebCore/KHTML and JavaScriptCore/KJS to create the best Web browser based on open-source components for mobile devices. 

Best regards,

Roland Geisler
Head of Marketing & Strategy, Series 60 Browser
Nokia

PS: Please forward this email to any contributor whom I may have missed.




From roland.geisler at nokia.com  Mon Jun 13 14:52:33 2005
From: roland.geisler at nokia.com (roland.geisler@nokia.com)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] Greetings from the Series 60 mobile browser team at
	Nokia
Message-ID: <6E2B2C4FBED4D84D80F52ECD1579D06823E7A3@bsebe101.NOE.Nokia.com>


This email contains email addresses in the cc of the Nokia browser developers as mentioned below.

RE: Recent press release: http://press.nokia.com/PR/200506/998214_5.html

Hi,

I'm heading marketing and strategy at Nokia for Series 60's new mobile browser that will be built upon WebCore/KHTML and JavaScriptCore/KJS. I am writing you this email to thank you for having built the Konqueror and Safari browser with the two components WebCore/KHTML and JavaScriptCore/KJS. I would like to introduce myself and some members from our core development team, and explain why we at Nokia have selected your code base for our future Series 60 mobile browser. I also hope that this will start a mutual dialogue among us that will support all of our projects in the future.

Not all of you might be familiar with Series 60. Series 60 is a smart phone software platform developed by Nokia, which enables feature rich applications on mobile devices. Series 60 is based on the Symbian OS and is written in C++. More information can be found from http://www.forum.nokia.com
and http://www.series60.com/.

I copied some of our core development team members on this email so you have their names and contact information. Antti Koivisto, whom you might know already, is one of the co-authors of KHTML and has been working for Nokia Research Center for the past few years and recently joined our mobile browser development team in Boston. David Carson and Deepika Chauhan are two of the original developers of the Nokia mobile browser. Zalan Bujtas, Prabhakar Marnadi, Yongjun Zhang and Sachin Padma have been working with mobile browsers for some years at Nokia in Helsinki and Boston. Keith Hollis has several years experience working with mobile browsers and has recently joined our team in Boston, earlier he was the principal person leading the port of the Opera web browser to the Symbian OS at Opera Software. Guido Grassel, Kimmo Kinnunen and Andrei Popescu are working at our Nokia Research Center in Helsinki (http://www.nokia.com/research/) where we have built the GTK port of Apple's WebCore that we released last year - http://gtk-webcore.sourceforge.net/.

The high performance, low memory consumption and small code footprint of KHTML and KJS make these components ideal for resource-constrained mobile devices. Clean architecture and good design create a good base for future development of mobile features. In addition, Web compliance was another important criteria for us. Congratulations to the KDE Konqueror developer team for building such a great browser.

Big thanks at this point also go to the Apple Safari team that has tremendously improved KHTML and KJS in many areas, in particular in Web compliance and performance.  WebCore and JavaScriptCore also offer a cleaner separation to the underlying operating system. For these reasons we at Nokia chose WebCore and JavaScriptCore as the code base for our Series 60 mobile browser.

Our plan is that the new Series 60 mobile browser will be available as a standard Series 60 application during the first half of 2006. 

We at Nokia are excited to use WebCore/KHTML and JavaScriptCore/KJS for our future Series 60 mobile browser. I hope that we can start a dialogue with your community and the Apple Safari team on how to "mobilize" WebCore/KHTML and JavaScriptCore/KJS to create the best Web browser based on open-source components for mobile devices. 

Best regards,

Roland Geisler
Head of Marketing & Strategy, Series 60 Browser
Nokia

PS: Please forward this email to any contributor whom I may have missed.





From gerald.bauer at mac.com  Mon Jun 13 19:19:02 2005
From: gerald.bauer at mac.com (Gerald Bauer)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] JavaScript Extension for XML (E4X) Additon to KSJ -
 Any Plans? Any Comments?
Message-ID: <42AE3E96.80904@mac.com>

Hello,

   I was wondering if there are any plans or if there's anyone 
interested in adding support for E4X to WebKit's JavaScript engine.

  What is E4X? 

    E4X stands for JavaScript Extension for XML or ECMAScript for XML. 
E4X is a simple extension for Javascript that adds direct support for 
XML to JavaScript. E4X is a international ECMA standard and the next 
version of Mozilla's Firefox browser (that is, v1.1) will include E4X 
support.

   Here are some links about E4X:

   o Introduction to E4X by Jon Udell @ 
http://weblog.infoworld.com/udell/2004/09/29.html
   o Objectifying XML - E4X for Firefox 1.1 by Kurt Cagle @ 
http://www.understandingxml.com/archives/2005/06/objectifying_xm.html
   o Standard ECMA-357: ECMAScript for XML (E4X) Specification @ 
http://www.ecma-international.org/publications/standards/Ecma-357.htm
 
   - Gerald

From robin.berjon at expway.fr  Mon Jun 13 18:31:23 2005
From: robin.berjon at expway.fr (Robin Berjon)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] Greetings from the Series 60 mobile browser team
	at Nokia
In-Reply-To: <6E2B2C4FBED4D84D80F52ECD1579D06823E7A0@bsebe101.NOE.Nokia.com>
References: <6E2B2C4FBED4D84D80F52ECD1579D06823E7A0@bsebe101.NOE.Nokia.com>
Message-ID: <42AE336B.8090807@expway.fr>

Hi Roland,

roland.geisler@nokia.com wrote:
> I'm heading marketing and strategy at Nokia for Series 60's new
> mobile browser that will be built upon WebCore/KHTML and
> JavaScriptCore/KJS. I am writing you this email to thank you for
> having built the Konqueror and Safari browser with the two components
> WebCore/KHTML and JavaScriptCore/KJS.

This is great news! As a developer for both OSX and S60 platforms, I 
look forward to the result. I am curious on one point (at least) 
however: the new WebKit website mentions SVG as one of the projects to 
integrate based on KSVG2, and compound documents are a really hot topic 
for us content and service developers these days. So if the KSVG2 merge 
into KHTML happens, would you be interested in including that on S60 
platforms as well? I would assume you might wish to subset it in which 
case I wonder what your plans may be in that regard or anything you 
might be looking for. I'd certainly love to see that happen, and would 
help if possible.

Thanks for any information,

-- 
Robin Berjon
   Senior Research Scientist
   Expway, http://expway.com/



From dp at toshoklabs.com  Tue Jun 14 08:00:01 2005
From: dp at toshoklabs.com (dp)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] clean build dies
Message-ID: <59353BE5-7005-4DC8-A3E1-71456B19F83A@toshoklabs.com>


I can't get a clean checkout and build to work. Manually compiling  
the first project (JavaScriptCore) by cd'ing into it and cc'ing seems  
to work. ideas?

-dp


% WebKitTools/Scripts/build-webkit
Updating /Users/dp/applewebkit/WebKitBuild/Deployment/ 
libWebKitSystemInterface.a
Updating /Users/dp/applewebkit/WebKitBuild/Deployment/usr/local/ 
include/WebKitSystemInterface.h
deprecated option: -buildstyle is no longer supported in xcodebuild.  
Use -configuration instead.
(NOTE: project JavaScriptCore was written by an older version of  
Xcode (39) -- temporarily upgrading it to version 42 (without  
modifying project file))

=== BUILDING NATIVE TARGET dftables WITH CONFIGURATION Deployment ===

CompileC /Users/dp/applewebkit/WebKitBuild/JavaScriptCore.build/ 
Deployment/dftables.build/Objects-normal/ppc/dftables.o pcre/ 
dftables.c normal ppc c com.apple.compilers.gcc.4_0
     mkdir /Users/dp/applewebkit/WebKitBuild/JavaScriptCore.build/ 
Deployment/dftables.build/Objects-normal/ppc
     cd /Users/dp/applewebkit/JavaScriptCore
     setenv MACOSX_DEPLOYMENT_TARGET 10.3
     cc -x c -arch ppc -pipe -Wno-trigraphs -fpascal-strings -fasm- 
blocks -g -Os -fmessage-length=0 -mtune=G4 -fvisibility=hidden -I/ 
Users/dp/applewebkit/WebKitBuild/JavaScriptCore.build/Deployment/ 
dftables.build/dftables.hmap -mdynamic-no-pic -F/Users/dp/applewebkit/ 
WebKitBuild/Deployment -I/Users/dp/applewebkit/WebKitBuild/Deployment/ 
include -I/Users/dp/applewebkit/WebKitBuild/JavaScriptCore.build/ 
Deployment/dftables.build/DerivedSources -c /Users/dp/applewebkit/ 
JavaScriptCore/pcre/dftables.c -o /Users/dp/applewebkit/WebKitBuild/ 
JavaScriptCore.build/Deployment/dftables.build/Objects-normal/ppc/ 
dftables.o
error: couldn't exec cc: No such file or directory
** BUILD FAILED **




-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2363 bytes
Desc: not available
Url : http://lists.macosforge.org/pipermail/webkit-dev/attachments/20050614/0c10b202/smime.bin
From devlists at softchaos.com  Tue Jun 14 12:11:06 2005
From: devlists at softchaos.com (Matt Gough)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] Avoiding unstable versions?
Message-ID: <E5C80DA9-204D-4EAF-A212-63DDD59A101C@softchaos.com>

I just did my daily update, build and run-safari on WebKit and it  
seems to have some layout issues and debugging code left in (lots of  
blue outlines around things):

e.g: www.apple.com currently looks like this:

http://www.softchaos.com/wkissues/01.jpg

1. Is there a way to avoid updating to incomplete/unstable checkins.  
i.e are there any tags that are applied to the cvs repository when it  
is in a known 'good' state.

2. For future reference, what is responsible for turning those blue  
outlines on/off. They would be useful at times.

Matt Gough
Softchaos Limited

From darin at apple.com  Tue Jun 14 14:13:40 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] Avoiding unstable versions?
In-Reply-To: <E5C80DA9-204D-4EAF-A212-63DDD59A101C@softchaos.com>
References: <E5C80DA9-204D-4EAF-A212-63DDD59A101C@softchaos.com>
Message-ID: <7417F69F-7443-4EDB-88F9-51B5FF215A5D@apple.com>

On Jun 14, 2005, at 12:11 PM, Matt Gough wrote:

> I just did my daily update, build and run-safari on WebKit and it  
> seems to have some layout issues and debugging code left in (lots  
> of blue outlines around things):
>
> e.g: www.apple.com currently looks like this:
>
> http://www.softchaos.com/wkissues/01.jpg

This is the symptom of a build issue someone told me about. I'm  
really sorry that nobody posted anything to the list about it. You  
need to throw away your build directory and do a clean build, and the  
problem will just go away.

> 1. Is there a way to avoid updating to incomplete/unstable  
> checkins. i.e are there any tags that are applied to the cvs  
> repository when it is in a known 'good' state.

We always try to keep the tree in the good state, and we don't have  
anything like this.

> 2. For future reference, what is responsible for turning those blue  
> outlines on/off. They would be useful at times.

Since this was a bug symptom, you can't do exactly this, but it just  
boils down to a mistake that made all the items think they had a CSS  
border style. You might be able to do that with your own CSS file.

     -- Darin


From sergtrejo at gmail.com  Wed Jun 15 04:05:47 2005
From: sergtrejo at gmail.com (Sergio Trejo)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] WebKit on Windows?
Message-ID: <7c3d693605061504055d7c963d@mail.gmail.com>

Apologies in advance if this question has been asked before (couldn't
find it in the archives but maybe I missed it). With the Nokia
announcement, I am wondering if WebKit can run on Windows (or if not,
are there plans to bring it to Windows?) and thus if core Widgets
could therefore be created for OS X, Windows and Nokia Series 60?

-Serg

From guido.grassel at nokia.com  Wed Jun 15 04:22:00 2005
From: guido.grassel at nokia.com (guido.grassel@nokia.com)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] WebKit on Windows?
Message-ID: <83CD3A5F85DE7D43B6A5CC37CCBAEECE38D905@esebe104.NOE.Nokia.com>

Dear Serg,

Check-out the Gtk-WebCore project on SF.
This project already has something working 
on Windows. However, their port is based on
Gtk for Win , hence, it is not a native
port. A native port would be really cool.

I understand a Windows port is feasible 
because WebCore architecture nicely 
separates out platform / OS dependencies.
Gtk+WebCore takes this separation a 
step further.

The URL is
http://gtk-webcore.sourceforge.net/

BR
- Guido

---------------------------------------
Guido Grassel, Nokia Research Center
email: guido.grassel@nokia.com
mobile: +358 50 48 37297

 


> -----Original Message-----
> From: webkit-dev-bounces@opendarwin.org
> [mailto:webkit-dev-bounces@opendarwin.org]On Behalf Of ext 
> Sergio Trejo
> Sent: 15 June, 2005 14:06
> To: webkit-dev@opendarwin.org
> Subject: [webkit-dev] WebKit on Windows?
> 
> 
> Apologies in advance if this question has been asked before (couldn't
> find it in the archives but maybe I missed it). With the Nokia
> announcement, I am wondering if WebKit can run on Windows (or if not,
> are there plans to bring it to Windows?) and thus if core Widgets
> could therefore be created for OS X, Windows and Nokia Series 60?
> 
> -Serg
> _______________________________________________
> webkit-dev mailing list
> webkit-dev@opendarwin.org
> http://www.opendarwin.org/mailman/listinfo/webkit-dev
> 

From speck at vitality.dk  Wed Jun 15 10:17:06 2005
From: speck at vitality.dk (Peter Speck)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] Crasher debug
Message-ID: <FB974243-E292-43D5-9402-99AB356BA697@vitality.dk>

Hi,

I have a page which uses a lot of synchronized XmlHttpRequests, and  
which sometimes crashes JavascriptCore. It is not reproducible in the  
sense that it crashes at after the same set/number of GUI actions,  
but it is reproducible in that it crashes sooner or later.   
Therefore, I don't have any idea of how I can make a simple test case.

The symptoms are always the same. Some function in KJS calls  
something in DOM (often attrId) which produces a bus error.
Dumps below are from the code from CVS from a couple of hours ago.

How do I proceed with debugging this problem?  It seems like it  
crashes when accessing the dom of the xml document returned by  
xmlhttprequest, but how do I find out more specific what js it  
executes when it crashes?


Safari in 10.4.0 had the problem, and crashed very often.
CVS version and Safari in (latest osx not to be disclosed) crashes  
less often, but still.

Date/Time:      2005-06-15 18:59:19.062 +0200
OS Version:     10.4.2 (Build 8C29)
Report Version: 3

Command: Safari
Path:    /Applications/Safari.app/Contents/MacOS/Safari
Parent:  bash [10185]

Version:        2.0 (412.2)
Build Version:  1
Project Name:   WebBrowser
Source Version: 4120200

PID:    15646
Thread: 0

Exception:  EXC_BAD_ACCESS (0x0001)
Codes:      KERN_PROTECTION_FAILURE (0x0002) at 0x0000019c

Thread 0 Crashed:
0   com.apple.WebCore            0x01e67220  
DOM::DocumentImpl::htmlMode() const + 16 (dom_docimpl.h:368)
1   com.apple.WebCore            0x01cd1fb0 DOM::DocumentImpl::attrId 
(DOM::DOMStringImpl*, DOM::DOMStringImpl*, bool) + 240  
(dom_docimpl.cpp:2097)
2   com.apple.WebCore            0x01cdd864  
DOM::ElementImpl::getAttributeNS(DOM::DOMString const&,  
DOM::DOMString const&) const + 100 (dom_elementimpl.cpp:284)
3   com.apple.WebCore            0x01e4f8ec  
DOM::ElementImpl::getAttribute(DOM::DOMString const&) const + 52  
(dom_elementimpl.h:174)
4   com.apple.WebCore            0x01bd9f88  
KJS::DOMElementProtoFunc::tryCall(KJS::ExecState*, KJS::Object&,  
KJS::List const&) + 440 (kjs_dom.cpp:1227)
5   com.apple.WebCore            0x01bcad64 KJS::DOMFunction::call 
(KJS::ExecState*, KJS::Object&, KJS::List const&) + 84  
(kjs_binding.cpp:76)
6   com.apple.JavaScriptCore     0x01533b40  
KJS::FunctionCallNode::evaluate(KJS::ExecState*) + 932 (nodes.cpp:754)
7   com.apple.JavaScriptCore     0x01532d4c  
KJS::ArgumentListNode::evaluateList(KJS::ExecState*) + 112 (nodes.cpp: 
610)
8   com.apple.JavaScriptCore     0x01533004  
KJS::ArgumentsNode::evaluateList(KJS::ExecState*) + 92 (nodes.cpp:647)
9   com.apple.JavaScriptCore     0x01533888  
KJS::FunctionCallNode::evaluate(KJS::ExecState*) + 236 (nodes.cpp:724)
10  com.apple.JavaScriptCore     0x0153a658  
KJS::ExprStatementNode::execute(KJS::ExecState*) + 96 (nodes.cpp:1793)
11  com.apple.JavaScriptCore     0x0154281c  
KJS::SourceElementsNode::execute(KJS::ExecState*) + 644 (nodes.cpp:2871)
12  com.apple.JavaScriptCore     0x0153a3b8 KJS::BlockNode::execute 
(KJS::ExecState*) + 196 (nodes.cpp:1756)
13  com.apple.JavaScriptCore     0x01520e8c  
KJS::DeclaredFunctionImp::execute(KJS::ExecState*) + 84 (function.cpp: 
303)
14  com.apple.JavaScriptCore     0x01520100 KJS::FunctionImp::call 
(KJS::ExecState*, KJS::Object&, KJS::List const&) + 728 (function.cpp: 
111)
15  com.apple.JavaScriptCore     0x01533b40  
KJS::FunctionCallNode::evaluate(KJS::ExecState*) + 932 (nodes.cpp:754)
16  com.apple.JavaScriptCore     0x0153a658  
KJS::ExprStatementNode::execute(KJS::ExecState*) + 96 (nodes.cpp:1793)
17  com.apple.JavaScriptCore     0x01538ed4 KJS::StatListNode::execute 
(KJS::ExecState*) + 88 (nodes.cpp:1529)
18  com.apple.JavaScriptCore     0x0153e8ec  
KJS::CaseClauseNode::evalStatements(KJS::ExecState*) + 104 (nodes.cpp: 
2281)
19  com.apple.JavaScriptCore     0x0153f414  
KJS::CaseBlockNode::evalBlock(KJS::ExecState*, KJS::Value const&) +  
616 (nodes.cpp:2400)
20  com.apple.JavaScriptCore     0x0153fd64 KJS::SwitchNode::execute 
(KJS::ExecState*) + 344 (nodes.cpp:2483)
21  com.apple.JavaScriptCore     0x0154281c  
KJS::SourceElementsNode::execute(KJS::ExecState*) + 644 (nodes.cpp:2871)
22  com.apple.JavaScriptCore     0x0153a3b8 KJS::BlockNode::execute 
(KJS::ExecState*) + 196 (nodes.cpp:1756)
23  com.apple.JavaScriptCore     0x01520e8c  
KJS::DeclaredFunctionImp::execute(KJS::ExecState*) + 84 (function.cpp: 
303)
24  com.apple.JavaScriptCore     0x01520100 KJS::FunctionImp::call 
(KJS::ExecState*, KJS::Object&, KJS::List const&) + 728 (function.cpp: 
111)
25  com.apple.JavaScriptCore     0x01533b40  
KJS::FunctionCallNode::evaluate(KJS::ExecState*) + 932 (nodes.cpp:754)
26  com.apple.JavaScriptCore     0x0153a658  
KJS::ExprStatementNode::execute(KJS::ExecState*) + 96 (nodes.cpp:1793)
27  com.apple.JavaScriptCore     0x015426c4  
KJS::SourceElementsNode::execute(KJS::ExecState*) + 300 (nodes.cpp:2865)
28  com.apple.JavaScriptCore     0x0153a3b8 KJS::BlockNode::execute 
(KJS::ExecState*) + 196 (nodes.cpp:1756)
29  com.apple.JavaScriptCore     0x01520e8c  
KJS::DeclaredFunctionImp::execute(KJS::ExecState*) + 84 (function.cpp: 
303)
30  com.apple.JavaScriptCore     0x01520100 KJS::FunctionImp::call 
(KJS::ExecState*, KJS::Object&, KJS::List const&) + 728 (function.cpp: 
111)
31  com.apple.JavaScriptCore     0x01548290 KJS::Object::call 
(KJS::ExecState*, KJS::Object&, KJS::List const&) + 764 (object.cpp:105)
32  com.apple.WebCore            0x01be4f34  
KJS::JSAbstractEventListener::handleEvent(DOM::EventImpl*, bool) +  
656 (kjs_events.cpp:109)
33  com.apple.WebCore            0x01be5320  
KJS::JSLazyEventListener::handleEvent(DOM::EventImpl*, bool) + 92  
(kjs_events.cpp:247)
34  com.apple.WebCore            0x01bcaa40  
DOM::EventListener::handleEventImpl(DOM::EventImpl*, bool) + 68  
(dom2_events.cpp:61)
35  com.apple.WebCore            0x01cec360  
DOM::NodeImpl::handleLocalEvents(DOM::EventImpl*, bool) + 352  
(dom_nodeimpl.cpp:909)
36  com.apple.WebCore            0x01cecf48  
DOM::NodeImpl::dispatchGenericEvent(DOM::EventImpl*, int&) + 516  
(dom_nodeimpl.cpp:532)
37  com.apple.WebCore            0x01ced680  
DOM::NodeImpl::dispatchEvent(DOM::EventImpl*, int&, bool) + 264  
(dom_nodeimpl.cpp:481)
38  com.apple.WebCore            0x01b9e09c  
KHTMLView::dispatchMouseEvent(int, DOM::NodeImpl*, bool, int,  
QMouseEvent*, bool, int) + 2340 (khtmlview.cpp:1924)
39  com.apple.WebCore            0x01b9f5d0  
KHTMLView::viewportMouseDoubleClickEvent(QMouseEvent*) + 600  
(khtmlview.cpp:850)
40  com.apple.WebCore            0x01b25670 KWQKHTMLPart::mouseUp 
(NSEvent*) + 316 (KWQKHTMLPart.mm:2662)
41  com.apple.WebCore            0x01b81a54 -[WebCoreBridge mouseUp:]  
+ 52 (WebCoreBridge.mm:874)
42  com.apple.WebKit             0x0107f768 -[WebHTMLView mouseUp:] +  
160 (WebHTMLView.m:2943)
43  com.apple.AppKit             0x93679d98 -[NSWindow sendEvent:] +  
4728
44  com.apple.Safari             0x0001d6bc 0x1000 + 116412
45  com.apple.AppKit             0x93622f5c -[NSApplication  
sendEvent:] + 4172
46  com.apple.Safari             0x0001a6a4 0x1000 + 104100
47  com.apple.AppKit             0x9361a3f0 -[NSApplication run] + 508
48  com.apple.AppKit             0x9370ac1c NSApplicationMain + 452
49  com.apple.Safari             0x00002700 0x1000 + 5888
50  com.apple.Safari             0x00057190 0x1000 + 352656

Thread 1:
0   libSystem.B.dylib            0x9000a778 mach_msg_trap + 8
1   libSystem.B.dylib            0x9000a6bc mach_msg + 60
2   com.apple.CoreFoundation     0x9074b3d8 __CFRunLoopRun + 832
3   com.apple.CoreFoundation     0x9074acdc CFRunLoopRunSpecific + 268
4   com.apple.Foundation         0x9288c164 -[NSRunLoop  
runMode:beforeDate:] + 172
5   com.apple.Foundation         0x9288c09c -[NSRunLoop run] + 76
6   com.apple.WebKit             0x010c0620 +[WebFileDatabase  
_syncLoop:] + 400 (WebFileDatabase.m:295)
7   com.apple.Foundation         0x9287d1d4 forkThreadForFunction + 108
8   libSystem.B.dylib            0x9002c3d4 _pthread_body + 96

Thread 2:
0   libSystem.B.dylib            0x9000a778 mach_msg_trap + 8
1   libSystem.B.dylib            0x9000a6bc mach_msg + 60
2   com.apple.CoreFoundation     0x9074b3d8 __CFRunLoopRun + 832
3   com.apple.CoreFoundation     0x9074acdc CFRunLoopRunSpecific + 268
4   com.apple.Foundation         0x928a4680 +[NSURLConnection 
(NSURLConnectionInternal) _resourceLoadLoop:] + 264
5   com.apple.Foundation         0x9287d1d4 forkThreadForFunction + 108
6   libSystem.B.dylib            0x9002c3d4 _pthread_body + 96

Thread 3:
0   libSystem.B.dylib            0x9000a778 mach_msg_trap + 8
1   libSystem.B.dylib            0x9000a6bc mach_msg + 60
2   com.apple.CoreFoundation     0x9074b3d8 __CFRunLoopRun + 832
3   com.apple.CoreFoundation     0x9074acdc CFRunLoopRunSpecific + 268
4   com.apple.Foundation         0x928a57c0 +[NSURLCache  
_diskCacheSyncLoop:] + 152
5   com.apple.Foundation         0x9287d1d4 forkThreadForFunction + 108
6   libSystem.B.dylib            0x9002c3d4 _pthread_body + 96

Thread 4:
0   libSystem.B.dylib            0x9002ca98  
semaphore_wait_signal_trap + 8
1   libSystem.B.dylib            0x9003127c pthread_cond_wait + 508
2   com.apple.Foundation         0x92884340 -[NSConditionLock  
lockWhenCondition:] + 68
3   com.apple.Syndication        0x9aca2ab0 -[AsyncDB _run:] + 192
4   com.apple.Foundation         0x9287d1d4 forkThreadForFunction + 108
5   libSystem.B.dylib            0x9002c3d4 _pthread_body + 96

Thread 5:
0   libSystem.B.dylib            0x9001efec select + 12
1   com.apple.CoreFoundation     0x9075dc6c __CFSocketManager + 472
2   libSystem.B.dylib            0x9002c3d4 _pthread_body + 96

Thread 0 crashed with PPC Thread State 64:
   srr0: 0x0000000001e67220 srr1:  
0x000000000200f030                        vrsave: 0x0000000000000000
     cr: 0x44000244          xer: 0x0000000000000002   lr:  
0x0000000001cd1fb0  ctr: 0x00000000900040fc
     r0: 0x0000000000000001   r1: 0x00000000bfffcd70   r2:  
0x0000000000000000   r3: 0x0000000000000000
     r4: 0x000000000ca8b130   r5: 0x0000000000000001   r6:  
0x000000000000000d   r7: 0x0000000000000006
     r8: 0x0000000000000004   r9: 0x0000000000000001  r10:  
0x000000000cb01162  r11: 0x0000000000000000
    r12: 0x0000000090003abc  r13: 0x0000000000000000  r14:  
0x0000000000000100  r15: 0x0000000000000000
    r16: 0x0000000000000000  r17: 0x0000000000000000  r18:  
0x0000000000000000  r19: 0x0000000000000000
    r20: 0x0000000000000000  r21: 0x0000000000000000  r22:  
0x0000000000000000  r23: 0x0000000000000000
    r24: 0x0000000000000000  r25: 0x000000000ca9e480  r26:  
0x0000000000000000  r27: 0x0000000000000000
    r28: 0x0000000000000000  r29: 0x0000000000000000  r30:  
0x00000000bfffcd70  r31: 0x0000000001cd1ed8

Binary Images Description:
     0x1000 -    0xd7fff com.apple.Safari 2.0 (412.2)    / 
Applications/Safari.app/Contents/MacOS/Safari
0x1008000 -  0x110efff com.apple.WebKit 412+    /Volumes/storage/unix- 
stuff/webkit/cvs-head.tmp/WebKitBuild/WebKit.framework/Versions/A/WebKit
0x1510000 -  0x1618fff com.apple.JavaScriptCore 412.1    /Volumes/ 
storage/unix-stuff/webkit/cvs-head.tmp/WebKitBuild/ 
JavaScriptCore.framework/Versions/A/JavaScriptCore
0x1b0a000 -  0x1e98fff com.apple.WebCore 413.1    /Volumes/storage/ 
unix-stuff/webkit/cvs-head.tmp/WebKitBuild/WebCore.framework/Versions/ 
A/WebCore
0xb205000 -  0xb207fff com.apple.textencoding.unicode 2.0    /System/ 
Library/TextEncodings/Unicode Encodings.bundle/Contents/MacOS/Unicode  
Encodings
0xc505000 -  0xc50bfff com.apple.DictionaryServiceComponent 1.0.0    / 
System/Library/Components/DictionaryService.component/Contents/MacOS/ 
DictionaryService
0x8fe00000 - 0x8fe51fff dyld 43.1    /usr/lib/dyld
0x90000000 - 0x901a6fff libSystem.B.dylib     /usr/lib/libSystem.B.dylib
0x901fe000 - 0x90202fff libmathCommon.A.dylib     /usr/lib/system/ 
libmathCommon.A.dylib
0x90204000 - 0x90257fff com.apple.CoreText 1.0.0 (???)    /System/ 
Library/Frameworks/ApplicationServices.framework/Versions/A/ 
Frameworks/CoreText.framework/Versions/A/CoreText
0x90284000 - 0x90335fff ATS     /System/Library/Frameworks/ 
ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/ 
Versions/A/ATS
0x90364000 - 0x9069dfff com.apple.CoreGraphics 1.256.10 (???)    / 
System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
Frameworks/CoreGraphics.framework/Versions/A/CoreGraphics
0x90728000 - 0x90801fff com.apple.CoreFoundation 6.4.2 (368.11)    / 
System/Library/Frameworks/CoreFoundation.framework/Versions/A/ 
CoreFoundation
0x9084a000 - 0x9084afff com.apple.CoreServices 10.4 (???)    /System/ 
Library/Frameworks/CoreServices.framework/Versions/A/CoreServices
0x9084c000 - 0x9094efff libicucore.A.dylib     /usr/lib/ 
libicucore.A.dylib
0x909a8000 - 0x90a2cfff libobjc.A.dylib     /usr/lib/libobjc.A.dylib
0x90a56000 - 0x90acafff com.apple.framework.IOKit 1.4 (???)    / 
System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x90ae4000 - 0x90af6fff libauto.dylib     /usr/lib/libauto.dylib
0x90afd000 - 0x90dc2fff com.apple.CoreServices.CarbonCore 10.4.1  
(611.1)    /System/Library/Frameworks/CoreServices.framework/Versions/ 
A/Frameworks/CarbonCore.framework/Versions/A/CarbonCore
0x90e25000 - 0x90ea5fff com.apple.CoreServices.OSServices 4.0  
(4.0.0)    /System/Library/Frameworks/CoreServices.framework/Versions/ 
A/Frameworks/OSServices.framework/Versions/A/OSServices
0x90eef000 - 0x90f2ffff com.apple.CFNetwork 4.0 (80)    /System/ 
Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/ 
CFNetwork.framework/Versions/A/CFNetwork
0x90f44000 - 0x90f5cfff com.apple.WebServices 1.1.2 (1.1.0)    / 
System/Library/Frameworks/CoreServices.framework/Versions/A/ 
Frameworks/WebServicesCore.framework/Versions/A/WebServicesCore
0x90f6c000 - 0x90feafff com.apple.SearchKit 1.0.3    /System/Library/ 
Frameworks/CoreServices.framework/Versions/A/Frameworks/ 
SearchKit.framework/Versions/A/SearchKit
0x9102f000 - 0x91056fff com.apple.Metadata 1.1 (121.4)    /System/ 
Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/ 
Metadata.framework/Versions/A/Metadata
0x91066000 - 0x91073fff libz.1.dylib     /usr/lib/libz.1.dylib
0x91076000 - 0x91238fff com.apple.security 4.0.1 (223)    /System/ 
Library/Frameworks/Security.framework/Versions/A/Security
0x9133a000 - 0x91343fff com.apple.DiskArbitration 2.1    /System/ 
Library/Frameworks/DiskArbitration.framework/Versions/A/DiskArbitration
0x9134a000 - 0x91371fff com.apple.SystemConfiguration 1.8.0    / 
System/Library/Frameworks/SystemConfiguration.framework/Versions/A/ 
SystemConfiguration
0x91384000 - 0x9138cfff libbsm.dylib     /usr/lib/libbsm.dylib
0x91390000 - 0x9140efff com.apple.audio.CoreAudio 3.0.1    /System/ 
Library/Frameworks/CoreAudio.framework/Versions/A/CoreAudio
0x9144c000 - 0x9144cfff com.apple.ApplicationServices 10.4 (???)    / 
System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
ApplicationServices
0x9144e000 - 0x91486fff com.apple.AE 1.5 (297)    /System/Library/ 
Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ 
AE.framework/Versions/A/AE
0x914a1000 - 0x9156cfff com.apple.ColorSync 4.4    /System/Library/ 
Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ 
ColorSync.framework/Versions/A/ColorSync
0x915c1000 - 0x91654fff com.apple.print.framework.PrintCore 4.0  
(172.1)    /System/Library/Frameworks/ApplicationServices.framework/ 
Versions/A/Frameworks/PrintCore.framework/Versions/A/PrintCore
0x9169a000 - 0x91757fff com.apple.QD 3.8.6 (???)    /System/Library/ 
Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ 
QD.framework/Versions/A/QD
0x91795000 - 0x917f3fff com.apple.HIServices 1.5.0 (???)    /System/ 
Library/Frameworks/ApplicationServices.framework/Versions/A/ 
Frameworks/HIServices.framework/Versions/A/HIServices
0x91821000 - 0x91844fff com.apple.LangAnalysis 1.6    /System/Library/ 
Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ 
LangAnalysis.framework/Versions/A/LangAnalysis
0x91858000 - 0x9187dfff com.apple.FindByContent 1.5    /System/ 
Library/Frameworks/ApplicationServices.framework/Versions/A/ 
Frameworks/FindByContent.framework/Versions/A/FindByContent
0x91890000 - 0x918d1fff com.apple.LaunchServices 10.4.3 (157)    / 
System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
Frameworks/LaunchServices.framework/Versions/A/LaunchServices
0x918ec000 - 0x91900fff com.apple.speech.synthesis.framework 3.3    / 
System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
Frameworks/SpeechSynthesis.framework/Versions/A/SpeechSynthesis
0x9190e000 - 0x91944fff com.apple.ImageIO.framework 1.0.2    /System/ 
Library/Frameworks/ApplicationServices.framework/Versions/A/ 
Frameworks/ImageIO.framework/Versions/A/ImageIO
0x91958000 - 0x91a1afff libcrypto.0.9.7.dylib     /usr/lib/libcrypto. 
0.9.7.dylib
0x91a66000 - 0x91a7bfff libcups.2.dylib     /usr/lib/libcups.2.dylib
0x91a80000 - 0x91a9cfff libJPEG.dylib     /System/Library/Frameworks/ 
ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/ 
Versions/A/Resources/libJPEG.dylib
0x91aa1000 - 0x91b10fff libJP2.dylib     /System/Library/Frameworks/ 
ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/ 
Versions/A/Resources/libJP2.dylib
0x91b27000 - 0x91b2bfff libGIF.dylib     /System/Library/Frameworks/ 
ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/ 
Versions/A/Resources/libGIF.dylib
0x91b2d000 - 0x91b45fff libRaw.dylib     /System/Library/Frameworks/ 
ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/ 
Versions/A/Resources/libRaw.dylib
0x91b48000 - 0x91b8bfff libTIFF.dylib     /System/Library/Frameworks/ 
ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/ 
Versions/A/Resources/libTIFF.dylib
0x91b92000 - 0x91babfff libPng.dylib     /System/Library/Frameworks/ 
ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/ 
Versions/A/Resources/libPng.dylib
0x91bb0000 - 0x91bb3fff libRadiance.dylib     /System/Library/ 
Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ 
ImageIO.framework/Versions/A/Resources/libRadiance.dylib
0x91bb5000 - 0x91bb5fff com.apple.Accelerate 1.1.1 (Accelerate  
1.1.1)    /System/Library/Frameworks/Accelerate.framework/Versions/A/ 
Accelerate
0x91bb7000 - 0x91ca1fff com.apple.vImage 2.0    /System/Library/ 
Frameworks/Accelerate.framework/Versions/A/Frameworks/ 
vImage.framework/Versions/A/vImage
0x91ca9000 - 0x91cc8fff com.apple.Accelerate.vecLib 3.1.1 (vecLib  
3.1.1)    /System/Library/Frameworks/Accelerate.framework/Versions/A/ 
Frameworks/vecLib.framework/Versions/A/vecLib
0x91d34000 - 0x91d54fff libmx.A.dylib     /usr/lib/libmx.A.dylib
0x91d5a000 - 0x91dbffff libvMisc.dylib     /System/Library/Frameworks/ 
Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/ 
A/libvMisc.dylib
0x91dc9000 - 0x91e5bfff libvDSP.dylib     /System/Library/Frameworks/ 
Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/ 
A/libvDSP.dylib
0x91e75000 - 0x92405fff libBLAS.dylib     /System/Library/Frameworks/ 
Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/ 
A/libBLAS.dylib
0x9244d000 - 0x9275dfff libLAPACK.dylib     /System/Library/ 
Frameworks/Accelerate.framework/Versions/A/Frameworks/ 
vecLib.framework/Versions/A/libLAPACK.dylib
0x9278a000 - 0x92815fff com.apple.DesktopServices 1.3    /System/ 
Library/PrivateFrameworks/DesktopServicesPriv.framework/Versions/A/ 
DesktopServicesPriv
0x92857000 - 0x92a80fff com.apple.Foundation 6.4.1 (567.1)    /System/ 
Library/Frameworks/Foundation.framework/Versions/C/Foundation
0x92b9e000 - 0x92c7cfff libxml2.2.dylib     /usr/lib/libxml2.2.dylib
0x92c9c000 - 0x92d8afff libiconv.2.dylib     /usr/lib/libiconv.2.dylib
0x92d9c000 - 0x92dbafff libGL.dylib     /System/Library/Frameworks/ 
OpenGL.framework/Versions/A/Libraries/libGL.dylib
0x92dc5000 - 0x92e1ffff libGLU.dylib     /System/Library/Frameworks/ 
OpenGL.framework/Versions/A/Libraries/libGLU.dylib
0x92e3d000 - 0x92e3dfff com.apple.Carbon 10.4 (???)    /System/ 
Library/Frameworks/Carbon.framework/Versions/A/Carbon
0x92e3f000 - 0x92e53fff com.apple.ImageCapture 3.0    /System/Library/ 
Frameworks/Carbon.framework/Versions/A/Frameworks/ 
ImageCapture.framework/Versions/A/ImageCapture
0x92e6b000 - 0x92e7bfff com.apple.speech.recognition.framework  
3.4    /System/Library/Frameworks/Carbon.framework/Versions/A/ 
Frameworks/SpeechRecognition.framework/Versions/A/SpeechRecognition
0x92e87000 - 0x92e9cfff com.apple.securityhi 2.0 (203)    /System/ 
Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
SecurityHI.framework/Versions/A/SecurityHI
0x92eae000 - 0x92f35fff com.apple.ink.framework 101.2 (69)    /System/ 
Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
Ink.framework/Versions/A/Ink
0x92f49000 - 0x92f54fff com.apple.help 1.0.3 (32)    /System/Library/ 
Frameworks/Carbon.framework/Versions/A/Frameworks/Help.framework/ 
Versions/A/Help
0x92f5e000 - 0x92f8bfff com.apple.openscripting 1.2.2 (???)    / 
System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
OpenScripting.framework/Versions/A/OpenScripting
0x92fa5000 - 0x92fb5fff com.apple.print.framework.Print 4.0 (187)    / 
System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
Print.framework/Versions/A/Print
0x92fc1000 - 0x93027fff com.apple.htmlrendering 1.1.2    /System/ 
Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
HTMLRendering.framework/Versions/A/HTMLRendering
0x93058000 - 0x930aafff com.apple.NavigationServices 3.4.1 (3.4)    / 
System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
NavigationServices.framework/Versions/A/NavigationServices
0x930d6000 - 0x930f3fff com.apple.audio.SoundManager 3.9    /System/ 
Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
CarbonSound.framework/Versions/A/CarbonSound
0x93105000 - 0x93112fff com.apple.CommonPanels 1.2.2 (73)    /System/ 
Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
CommonPanels.framework/Versions/A/CommonPanels
0x9311b000 - 0x9342bfff com.apple.HIToolbox 1.4.2 (???)    /System/ 
Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
HIToolbox.framework/Versions/A/HIToolbox
0x93576000 - 0x93582fff com.apple.opengl 1.4.0    /System/Library/ 
Frameworks/OpenGL.framework/Versions/A/OpenGL
0x93587000 - 0x935a9fff com.apple.DirectoryService.Framework 2.0    / 
System/Library/Frameworks/DirectoryService.framework/Versions/A/ 
DirectoryService
0x93614000 - 0x93614fff com.apple.Cocoa 6.4 (???)    /System/Library/ 
Frameworks/Cocoa.framework/Versions/A/Cocoa
0x93616000 - 0x93c47fff com.apple.AppKit 6.4.1 (824.1)    /System/ 
Library/Frameworks/AppKit.framework/Versions/C/AppKit
0x93fd3000 - 0x9403dfff com.apple.CoreData 1.0 (46)    /System/ 
Library/Frameworks/CoreData.framework/Versions/A/CoreData
0x94075000 - 0x9413ffff com.apple.audio.toolbox.AudioToolbox  
1.4.1    /System/Library/Frameworks/AudioToolbox.framework/Versions/A/ 
AudioToolbox
0x94193000 - 0x94193fff com.apple.audio.units.AudioUnit 1.4    / 
System/Library/Frameworks/AudioUnit.framework/Versions/A/AudioUnit
0x94195000 - 0x942f4fff com.apple.QuartzCore 1.4.1    /System/Library/ 
Frameworks/QuartzCore.framework/Versions/A/QuartzCore
0x9433c000 - 0x94379fff libsqlite3.0.dylib     /usr/lib/ 
libsqlite3.0.dylib
0x94381000 - 0x943ccfff libGLImage.dylib     /System/Library/ 
Frameworks/OpenGL.framework/Versions/A/Libraries/libGLImage.dylib
0x9445a000 - 0x94492fff com.apple.vmutils 4.0.0 (85)    /System/ 
Library/PrivateFrameworks/vmutils.framework/Versions/A/vmutils
0x944d5000 - 0x944f1fff com.apple.securityfoundation 2.0 (262)    / 
System/Library/Frameworks/SecurityFoundation.framework/Versions/A/ 
SecurityFoundation
0x94505000 - 0x94548fff com.apple.securityinterface 2.0 (256)    / 
System/Library/Frameworks/SecurityInterface.framework/Versions/A/ 
SecurityInterface
0x9456c000 - 0x9457bfff libCGATS.A.dylib     /System/Library/ 
Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ 
CoreGraphics.framework/Versions/A/Resources/libCGATS.A.dylib
0x94583000 - 0x9458ffff libCSync.A.dylib     /System/Library/ 
Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ 
CoreGraphics.framework/Versions/A/Resources/libCSync.A.dylib
0x945d4000 - 0x945e8fff libRIP.A.dylib     /System/Library/Frameworks/ 
ApplicationServices.framework/Versions/A/Frameworks/ 
CoreGraphics.framework/Versions/A/Resources/libRIP.A.dylib
0x94ab0000 - 0x94bddfff com.apple.AddressBook.framework 4.0.2  
(474)    /System/Library/Frameworks/AddressBook.framework/Versions/A/ 
AddressBook
0x94c6e000 - 0x94c7dfff com.apple.DSObjCWrappers.Framework 1.1    / 
System/Library/PrivateFrameworks/DSObjCWrappers.framework/Versions/A/ 
DSObjCWrappers
0x94c85000 - 0x94cacfff com.apple.LDAPFramework 1.4 (68)    /System/ 
Library/Frameworks/LDAP.framework/Versions/A/LDAP
0x94cb2000 - 0x94cc2fff libsasl2.2.dylib     /usr/lib/libsasl2.2.dylib
0x94cc6000 - 0x94cf4fff libssl.0.9.7.dylib     /usr/lib/libssl. 
0.9.7.dylib
0x94d04000 - 0x94d21fff libresolv.9.dylib     /usr/lib/libresolv.9.dylib
0x95485000 - 0x95508fff libstdc++.6.dylib     /usr/lib/libstdc++.6.dylib
0x95586000 - 0x9558efff libgcc_s.1.dylib     /usr/lib/libgcc_s.1.dylib
0x95fdf000 - 0x96008fff libxslt.1.dylib     /usr/lib/libxslt.1.dylib
0x9aca0000 - 0x9acd3fff com.apple.Syndication 1.0.1 (38)    /System/ 
Library/PrivateFrameworks/Syndication.framework/Versions/A/Syndication
0x9acee000 - 0x9acfefff com.apple.SyndicationUI 1.0.1 (38)    /System/ 
Library/PrivateFrameworks/SyndicationUI.framework/Versions/A/ 
SyndicationUI



Running under gdb:

Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: KERN_PROTECTION_FAILURE at address: 0x0000019c
DOM::DocumentImpl::htmlMode (this=0x0) at /Volumes/storage/unix-stuff/ 
webkit/cvs-head.tmp/WebCore/khtml/xml/dom_docimpl.h:368
368         HTMLMode htmlMode() const { return hMode; }
(gdb) where
#0  DOM::DocumentImpl::htmlMode (this=0x0) at /Volumes/storage/unix- 
stuff/webkit/cvs-head.tmp/WebCore/khtml/xml/dom_docimpl.h:368
#1  0x01cd1fb0 in DOM::DocumentImpl::attrId (this=<incomplete type>,  
_namespaceURI=0x0, _name=0xc9e0e90, readonly=true) at /Volumes/ 
storage/unix-stuff/webkit/cvs-head.tmp/WebCore/khtml/xml/ 
dom_docimpl.cpp:2097
#2  0x01cdd864 in DOM::ElementImpl::getAttributeNS (this=0xc9cb3d0,  
namespaceURI=@0xbfffd078, localName=@0xbfffd25c) at /Volumes/storage/ 
unix-stuff/webkit/cvs-head.tmp/WebCore/khtml/xml/dom_elementimpl.cpp:284
#3  0x01e4f8ec in DOM::ElementImpl::getAttribute (this=0xc9cb3d0,  
name=@0xbfffd25c) at /Volumes/storage/unix-stuff/webkit/cvs-head.tmp/ 
WebCore/khtml/xml/dom_elementimpl.h:174
#4  0x01bd9f88 in KJS::DOMElementProtoFunc::tryCall (this=0xb181b48,  
exec=0xbfffd74c, thisObj=@0xbfffd3bc, args=@0xbfffd3b0) at /Volumes/ 
storage/unix-stuff/webkit/cvs-head.tmp/WebCore/khtml/ecma/kjs_dom.cpp: 
1227
#5  0x01bcad64 in KJS::DOMFunction::call (this=0x1, exec=0xbfffd74c,  
thisObj=@0xbfffd3bc, args=@0xbfffd3b0) at /Volumes/storage/unix-stuff/ 
webkit/cvs-head.tmp/WebCore/khtml/ecma/kjs_binding.cpp:76
#6  0x01533b40 in KJS::FunctionCallNode::evaluate (this=0xc9b25b0,  
exec=0xbfffd74c) at /Volumes/storage/unix-stuff/webkit/cvs-head.tmp/ 
JavaScriptCore/kjs/nodes.cpp:754
#7  0x01537ee4 in KJS::AssignNode::evaluate (this=0xc9b25d0,  
exec=0xbfffd74c) at /Volumes/storage/unix-stuff/webkit/cvs-head.tmp/ 
JavaScriptCore/kjs/nodes.cpp:1385
#8  0x0153a658 in KJS::ExprStatementNode::execute (this=0xc9b25f0,  
exec=0xbfffd74c) at /Volumes/storage/unix-stuff/webkit/cvs-head.tmp/ 
JavaScriptCore/kjs/nodes.cpp:1793
#9  0x0154281c in KJS::SourceElementsNode::execute (this=0xc9b1180,  
exec=0xbfffd74c) at /Volumes/storage/unix-stuff/webkit/cvs-head.tmp/ 
JavaScriptCore/kjs/nodes.cpp:2870
#10 0x0153a3b8 in KJS::BlockNode::execute (this=0xc9b45c0,  
exec=0xbfffd74c) at /Volumes/storage/unix-stuff/webkit/cvs-head.tmp/ 
JavaScriptCore/kjs/nodes.cpp:1755
#11 0x01520e8c in KJS::DeclaredFunctionImp::execute (this=0x1,  
exec=0xbfffd74c) at /Volumes/storage/unix-stuff/webkit/cvs-head.tmp/ 
JavaScriptCore/kjs/function.cpp:301
#12 0x01520100 in KJS::FunctionImp::call (this=0xb181170,  
exec=0xbfffdd0c, thisObj=@0xbfffd82c, args=@0xbfffd820) at /Volumes/ 
storage/unix-stuff/webkit/cvs-head.tmp/JavaScriptCore/kjs/ 
function.cpp:108
#13 0x01533b40 in KJS::FunctionCallNode::evaluate (this=0xc9a4f70,  
exec=0xbfffdd0c) at /Volumes/storage/unix-stuff/webkit/cvs-head.tmp/ 
JavaScriptCore/kjs/nodes.cpp:754
#14 0x0153a658 in KJS::ExprStatementNode::execute (this=0xc9a4f90,  
exec=0xbfffdd0c) at /Volumes/storage/unix-stuff/webkit/cvs-head.tmp/ 
JavaScriptCore/kjs/nodes.cpp:1793
#15 0x01538ed4 in KJS::StatListNode::execute (this=0xc9a4fc0,  
exec=0xbfffdd0c) at /Volumes/storage/unix-stuff/webkit/cvs-head.tmp/ 
JavaScriptCore/kjs/nodes.cpp:1527
#16 0x0153e8ec in KJS::CaseClauseNode::evalStatements  
(this=0xc9a5050, exec=0xbfffdd0c) at /Volumes/storage/unix-stuff/ 
webkit/cvs-head.tmp/JavaScriptCore/kjs/nodes.cpp:2281
#17 0x0153f414 in KJS::CaseBlockNode::evalBlock (this=0xc9a5400,  
exec=0xbfffdd0c, input=@0xbfffdb08) at /Volumes/storage/unix-stuff/ 
webkit/cvs-head.tmp/JavaScriptCore/kjs/nodes.cpp:2400
#18 0x0153fd64 in KJS::SwitchNode::execute (this=0xc9a5420,  
exec=0xbfffdd0c) at /Volumes/storage/unix-stuff/webkit/cvs-head.tmp/ 
JavaScriptCore/kjs/nodes.cpp:2481
#19 0x0154281c in KJS::SourceElementsNode::execute (this=0xc9a4dc0,  
exec=0xbfffdd0c) at /Volumes/storage/unix-stuff/webkit/cvs-head.tmp/ 
JavaScriptCore/kjs/nodes.cpp:2870
#20 0x0153a3b8 in KJS::BlockNode::execute (this=0xc9a5480,  
exec=0xbfffdd0c) at /Volumes/storage/unix-stuff/webkit/cvs-head.tmp/ 
JavaScriptCore/kjs/nodes.cpp:1755
#21 0x01520e8c in KJS::DeclaredFunctionImp::execute (this=0x1,  
exec=0xbfffdd0c) at /Volumes/storage/unix-stuff/webkit/cvs-head.tmp/ 
JavaScriptCore/kjs/function.cpp:301
#22 0x01520100 in KJS::FunctionImp::call (this=0xb181020,  
exec=0xbfffe05c, thisObj=@0xbfffddec, args=@0xbfffdde0) at /Volumes/ 
storage/unix-stuff/webkit/cvs-head.tmp/JavaScriptCore/kjs/ 
function.cpp:108
#23 0x01533b40 in KJS::FunctionCallNode::evaluate (this=0xc989340,  
exec=0xbfffe05c) at /Volumes/storage/unix-stuff/webkit/cvs-head.tmp/ 
JavaScriptCore/kjs/nodes.cpp:754
#24 0x0153a658 in KJS::ExprStatementNode::execute (this=0xc9db3a0,  
exec=0xbfffe05c) at /Volumes/storage/unix-stuff/webkit/cvs-head.tmp/ 
JavaScriptCore/kjs/nodes.cpp:1793
#25 0x015426c4 in KJS::SourceElementsNode::execute (this=0xc984c50,  
exec=0xbfffe05c) at /Volumes/storage/unix-stuff/webkit/cvs-head.tmp/ 
JavaScriptCore/kjs/nodes.cpp:2864
#26 0x0153a3b8 in KJS::BlockNode::execute (this=0xc984140,  
exec=0xbfffe05c) at /Volumes/storage/unix-stuff/webkit/cvs-head.tmp/ 
JavaScriptCore/kjs/nodes.cpp:1755
#27 0x01520e8c in KJS::DeclaredFunctionImp::execute (this=0x1,  
exec=0xbfffe05c) at /Volumes/storage/unix-stuff/webkit/cvs-head.tmp/ 
JavaScriptCore/kjs/function.cpp:301
#28 0x01520100 in KJS::FunctionImp::call (this=0xc82bf28,  
exec=0xa1cc130, thisObj=@0xbfffe280, args=@0xbfffe278) at /Volumes/ 
storage/unix-stuff/webkit/cvs-head.tmp/JavaScriptCore/kjs/ 
function.cpp:108
#29 0x01548290 in KJS::Object::call (this=0xbfffe270, exec=0xa1cc130,  
thisObj=@0xbfffe280, args=@0xbfffe278) at /Volumes/storage/unix-stuff/ 
webkit/cvs-head.tmp/JavaScriptCore/kjs/object.cpp:105
#30 0x01be4f34 in KJS::JSAbstractEventListener::handleEvent  
(this=0xc95e980, ele=0xc98f7c0, isWindowEvent=false) at /Volumes/ 
storage/unix-stuff/webkit/cvs-head.tmp/WebCore/khtml/ecma/ 
kjs_events.cpp:109
#31 0x01be5320 in KJS::JSLazyEventListener::handleEvent  
(this=0xc95e980, evt=0xc98f7c0, isWindowEvent=false) at /Volumes/ 
storage/unix-stuff/webkit/cvs-head.tmp/WebCore/khtml/ecma/ 
kjs_events.cpp:245
#32 0x01bcaa40 in DOM::EventListener::handleEventImpl (this=0x1,  
evt=0xc98f7c0, isWindowEvent=false) at /Volumes/storage/unix-stuff/ 
webkit/cvs-head.tmp/WebCore/khtml/dom/dom2_events.cpp:56
#33 0x01cec360 in DOM::NodeImpl::handleLocalEvents (this=0xc95e890,  
evt=0xc98f7c0, useCapture=<incomplete type>) at /Volumes/storage/unix- 
stuff/webkit/cvs-head.tmp/WebCore/khtml/xml/dom_nodeimpl.cpp:911
#34 0x01cecf48 in DOM::NodeImpl::dispatchGenericEvent  
(this=0xc95e890, evt=0xc98f7c0) at /Volumes/storage/unix-stuff/webkit/ 
cvs-head.tmp/WebCore/khtml/xml/dom_nodeimpl.cpp:530
#35 0x01ced680 in DOM::NodeImpl::dispatchEvent (this=0xc95e890,  
evt=0xc98f7c0, exceptioncode=@0xbfffe5ec, tempEvent=<incomplete  
type>) at /Volumes/storage/unix-stuff/webkit/cvs-head.tmp/WebCore/ 
khtml/xml/dom_nodeimpl.cpp:481
#36 0x01b9e09c in KHTMLView::dispatchMouseEvent (this=0xc944ed0,  
eventId=4, targetNode=0xc95e890, cancelable=true, detail=4,  
_mouse=0xbfffe774, setUnder=true, mouseEventType=1) at /Volumes/ 
storage/unix-stuff/webkit/cvs-head.tmp/WebCore/khtml/khtmlview.cpp:1923
#37 0x01b9f5d0 in KHTMLView::viewportMouseDoubleClickEvent  
(this=0xc944ed0, _mouse=0xbfffe774) at /Volumes/storage/unix-stuff/ 
webkit/cvs-head.tmp/WebCore/khtml/khtmlview.cpp:847
#38 0x01b25670 in KWQKHTMLPart::mouseUp (this=0x7025600,  
event=0xc9f63f0) at /Volumes/storage/unix-stuff/webkit/cvs-head.tmp/ 
WebCore/kwq/KWQKHTMLPart.mm:2662
#39 0x01b81a54 in -[WebCoreBridge mouseUp:] (self=<incomplete type>,  
_cmd=0x90a0f5e0, event=0xc9f63f0) at /Volumes/storage/unix-stuff/ 
webkit/cvs-head.tmp/WebCore/kwq/WebCoreBridge.mm:873
#40 0x0107f768 in -[WebHTMLView mouseUp:] (self=0xc944a50,  
_cmd=0x90a0f5e0, event=0xc9f63f0) at /Volumes/storage/unix-stuff/ 
webkit/cvs-head.tmp/WebKit/WebView.subproj/WebHTMLView.m:2942
#41 0x93679d98 in -[NSWindow sendEvent:] ()
#42 0x0001d6bc in ?? ()
#43 0x93622f5c in -[NSApplication sendEvent:] ()
#44 0x0001a6a4 in ?? ()
#45 0x9361a3f0 in -[NSApplication run] ()
#46 0x9370ac1c in NSApplicationMain ()
#47 0x00002700 in ?? ()
#48 0x00057190 in ?? ()
Current language:  auto; currently c++

(gdb) print *(ElementImpl*)0xc9cb3d0
warning: RTTI symbol not found for class 'DOM::XMLElementImpl'
$3 = {
   <ContainerNodeImpl> = {
     <NodeImpl> = {
       <TreeShared<DOM::NodeImpl>> = {
         _ref = 1,
         m_parent = 0xc9c9740
       },
       members of NodeImpl:
       _vptr$NodeImpl = 0x1eb9c88,
       document = 0xc9d15c0,
       m_previous = 0xc9d6030,
       m_next = 0xc9f4b40,
       m_render = 0x0,
       m_regdListeners = 0x0,
       m_nodeLists = 0x0,
       m_tabIndex = 0,
       m_hasTabIndex = <incomplete type>,
       m_hasId = <incomplete type>,
       m_hasClass = <incomplete type>,
       m_hasStyle = <incomplete type>,
       m_attached = <incomplete type>,
       m_changed = <incomplete type>,
       m_hasChangedChild = <incomplete type>,
       m_inDocument = <incomplete type>,
       m_isLink = <incomplete type>,
       m_specified = <incomplete type>,
       m_focused = <incomplete type>,
       m_active = <incomplete type>,
       m_styleElement = <incomplete type>,
       m_implicit = <incomplete type>
     },
     members of ContainerNodeImpl:
     _first = 0xc9c9710,
     _last = 0xc9d5840
   },
   members of ElementImpl:
   namedAttrMap = 0xc9cab80,
   m_prefix = 0x0
}
(gdb)

----
    - Peter Speck


From speck at vitality.dk  Wed Jun 15 12:23:48 2005
From: speck at vitality.dk (Peter Speck)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] Re: Crasher debug
In-Reply-To: <FB974243-E292-43D5-9402-99AB356BA697@vitality.dk>
References: <FB974243-E292-43D5-9402-99AB356BA697@vitality.dk>
Message-ID: <F254E070-FCEF-4AE8-81B6-5C991493DEAF@vitality.dk>

On 15/06/2005, at 19:17, Peter Speck wrote:

> I have a page which uses a lot of synchronized XmlHttpRequests, and  
> which sometimes crashes JavascriptCore. It is not reproducible in  
> the sense that it crashes at after the same set/number of GUI  
> actions, but it is reproducible in that it crashes sooner or  
> later.  Therefore, I don't have any idea of how I can make a simple  
> test case.

I've managed to put up a set of static pages which produces the crash:
http://jjj.dancenter.com/pubweb/peters/xmlhttprequestcrash

It a large number of requests before it crashes (+20 seconds,  
probably more from USA).

The page is far from a simple test case, but everytime I remove  
something from it, the crash goes away, so I still need help to get  
closer to the bug.
----
    - Peter Speck


From ddkilzer at kilzer.net  Thu Jun 16 05:16:27 2005
From: ddkilzer at kilzer.net (David D. Kilzer)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] WebKitTools/Scripts/build-dumprendertree seems to be
	broken
Message-ID: <8CFEFDA9-DC19-4051-AAED-6DBEB6E030D7@kilzer.net>

When trying to run "run-webkit-tests", the build-dumprendertree  
script dies when trying to compile DumpRenderTree.m:

[...]/WebKitTools/DumpRenderTree/DumpRenderTree.m:33:37: error:  
WebKit/WebCoreStatistics.h: No such file or directory

Any ideas?  Full error output below.

Dave


kilze0-206:~/Projects/Cocoa/WebKit/WebKitTools ddkilzer$ ./Scripts/ 
run-webkit-tests
2005-06-16 07:14:59.242 xcodebuild[22405] WARNING: The Xcode plugin  
at path /Library/Application Support/Apple/Developer Tools/Plug-ins/ 
J2EEAssistant.pbplugin is missing the XCPluginHasUI Info.plist key,  
it is assumed to have UI and will not be loaded by xcodebuild.
(NOTE: project DumpRenderTree was written by an older version of  
Xcode (39) -- temporarily upgrading it to version 42 (without  
modifying project file))

=== BUILDING NATIVE TARGET DumpRenderTree WITH CONFIGURATION  
Deployment ===

CompileC WebKitBuild/DumpRenderTree.build/Deployment/ 
DumpRenderTree.build/Objects-normal/ppc/DumpRenderTree.o  
DumpRenderTree.m normal ppc objective-c com.apple.compilers.gcc.4_0
     mkdir /Users/ddkilzer/Projects/Cocoa/WebKit/WebKitTools/ 
DumpRenderTree/WebKitBuild/DumpRenderTree.build/Deployment/ 
DumpRenderTree.build/Objects-normal/ppc
     cd /Users/ddkilzer/Projects/Cocoa/WebKit/WebKitTools/DumpRenderTree
     /usr/bin/gcc-4.0 -x objective-c -arch ppc -pipe -Wno-trigraphs - 
fpascal-strings -fasm-blocks -g -Os -Werror -fmessage-length=0 - 
mtune=G4 -fvisibility=hidden -I/Users/ddkilzer/Projects/Cocoa/WebKit/ 
WebKitTools/DumpRenderTree/WebKitBuild/DumpRenderTree.build/ 
Deployment/DumpRenderTree.build/DumpRenderTree.hmap -Wall -W -Wno- 
unused-parameter -mdynamic-no-pic -F/Users/ddkilzer/Projects/Cocoa/ 
WebKit/WebKitTools/DumpRenderTree/WebKitBuild/Deployment -I/Users/ 
ddkilzer/Projects/Cocoa/WebKit/WebKitTools/DumpRenderTree/WebKitBuild/ 
Deployment/include -I/Users/ddkilzer/Projects/Cocoa/WebKit/ 
WebKitTools/DumpRenderTree/WebKitBuild/DumpRenderTree.build/ 
Deployment/DumpRenderTree.build/DerivedSources -include /Library/ 
Caches/com.apple.Xcode.501/SharedPrecompiledHeaders/ 
DumpRenderTreePrefix-bstgpmazqsztwxavkclvhrqlftkz/ 
DumpRenderTreePrefix.h -c /Users/ddkilzer/Projects/Cocoa/WebKit/ 
WebKitTools/DumpRenderTree/DumpRenderTree.m -o /Users/ddkilzer/ 
Projects/Cocoa/WebKit/WebKitTools/DumpRenderTree/WebKitBuild/ 
DumpRenderTree.build/Deployment/DumpRenderTree.build/Objects-normal/ 
ppc/DumpRenderTree.o
/Users/ddkilzer/Projects/Cocoa/WebKit/WebKitTools/DumpRenderTree/ 
DumpRenderTree.m:33:37: error: WebKit/WebCoreStatistics.h: No such  
file or directory
cc1obj: warnings being treated as errors
/Users/ddkilzer/Projects/Cocoa/WebKit/WebKitTools/DumpRenderTree/ 
DumpRenderTree.m: In function 'dump':
/Users/ddkilzer/Projects/Cocoa/WebKit/WebKitTools/DumpRenderTree/ 
DumpRenderTree.m:127: warning: 'WebFrame' may not respond to '- 
renderTreeAsExternalRepresentation'
/Users/ddkilzer/Projects/Cocoa/WebKit/WebKitTools/DumpRenderTree/ 
DumpRenderTree.m:127: warning: (Messages without a matching method  
signature
/Users/ddkilzer/Projects/Cocoa/WebKit/WebKitTools/DumpRenderTree/ 
DumpRenderTree.m:127: warning: will be assumed to return 'id' and accept
/Users/ddkilzer/Projects/Cocoa/WebKit/WebKitTools/DumpRenderTree/ 
DumpRenderTree.m:127: warning: '...' as arguments.)
** BUILD FAILED **
can't find executable DumpRenderTree tool (looked in /Users/ddkilzer/ 
Projects/Cocoa/WebKit/WebKitBuild/Deployment)


From opendarwin.org at mitzpettel.com  Thu Jun 16 06:46:34 2005
From: opendarwin.org at mitzpettel.com (Mitz Pettel)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] WebKitTools/Scripts/build-dumprendertree seems to be
	broken
In-Reply-To: <8CFEFDA9-DC19-4051-AAED-6DBEB6E030D7@kilzer.net>
References: <8CFEFDA9-DC19-4051-AAED-6DBEB6E030D7@kilzer.net>
Message-ID: <B5034AD4-6805-4E00-A879-82E29FE8D090@mitzpettel.com>

This happens because the default built products directory for  
DumpRenderTree is ./WebKit/WebKitTools/DumpRenderTree/WebKitBuild/  
whereas WebKit's default built products directory is ./WebKit/ 
WebKitBuild/. The workaround is to open Xcode preferences and  
manually set a built products directory. This will get WebKit and  
DumpRenderTree in sync.

-- Mitz Pettel

On Jun 16, 2005, at 3:16 PM, David D. Kilzer wrote:


> When trying to run "run-webkit-tests", the build-dumprendertree  
> script dies when trying to compile DumpRenderTree.m:
>
> [...]/WebKitTools/DumpRenderTree/DumpRenderTree.m:33:37: error:  
> WebKit/WebCoreStatistics.h: No such file or directory
>
> Any ideas?  Full error output below.
>
> Dave
>
>
> kilze0-206:~/Projects/Cocoa/WebKit/WebKitTools ddkilzer$ ./Scripts/ 
> run-webkit-tests
> 2005-06-16 07:14:59.242 xcodebuild[22405] WARNING: The Xcode plugin  
> at path /Library/Application Support/Apple/Developer Tools/Plug-ins/ 
> J2EEAssistant.pbplugin is missing the XCPluginHasUI Info.plist key,  
> it is assumed to have UI and will not be loaded by xcodebuild.
> (NOTE: project DumpRenderTree was written by an older version of  
> Xcode (39) -- temporarily upgrading it to version 42 (without  
> modifying project file))
>
> === BUILDING NATIVE TARGET DumpRenderTree WITH CONFIGURATION  
> Deployment ===
>
> CompileC WebKitBuild/DumpRenderTree.build/Deployment/ 
> DumpRenderTree.build/Objects-normal/ppc/DumpRenderTree.o  
> DumpRenderTree.m normal ppc objective-c com.apple.compilers.gcc.4_0
>     mkdir /Users/ddkilzer/Projects/Cocoa/WebKit/WebKitTools/ 
> DumpRenderTree/WebKitBuild/DumpRenderTree.build/Deployment/ 
> DumpRenderTree.build/Objects-normal/ppc
>     cd /Users/ddkilzer/Projects/Cocoa/WebKit/WebKitTools/ 
> DumpRenderTree
>     /usr/bin/gcc-4.0 -x objective-c -arch ppc -pipe -Wno-trigraphs - 
> fpascal-strings -fasm-blocks -g -Os -Werror -fmessage-length=0 - 
> mtune=G4 -fvisibility=hidden -I/Users/ddkilzer/Projects/Cocoa/ 
> WebKit/WebKitTools/DumpRenderTree/WebKitBuild/DumpRenderTree.build/ 
> Deployment/DumpRenderTree.build/DumpRenderTree.hmap -Wall -W -Wno- 
> unused-parameter -mdynamic-no-pic -F/Users/ddkilzer/Projects/Cocoa/ 
> WebKit/WebKitTools/DumpRenderTree/WebKitBuild/Deployment -I/Users/ 
> ddkilzer/Projects/Cocoa/WebKit/WebKitTools/DumpRenderTree/ 
> WebKitBuild/Deployment/include -I/Users/ddkilzer/Projects/Cocoa/ 
> WebKit/WebKitTools/DumpRenderTree/WebKitBuild/DumpRenderTree.build/ 
> Deployment/DumpRenderTree.build/DerivedSources -include /Library/ 
> Caches/com.apple.Xcode.501/SharedPrecompiledHeaders/ 
> DumpRenderTreePrefix-bstgpmazqsztwxavkclvhrqlftkz/ 
> DumpRenderTreePrefix.h -c /Users/ddkilzer/Projects/Cocoa/WebKit/ 
> WebKitTools/DumpRenderTree/DumpRenderTree.m -o /Users/ddkilzer/ 
> Projects/Cocoa/WebKit/WebKitTools/DumpRenderTree/WebKitBuild/ 
> DumpRenderTree.build/Deployment/DumpRenderTree.build/Objects-normal/ 
> ppc/DumpRenderTree.o
> /Users/ddkilzer/Projects/Cocoa/WebKit/WebKitTools/DumpRenderTree/ 
> DumpRenderTree.m:33:37: error: WebKit/WebCoreStatistics.h: No such  
> file or directory
> cc1obj: warnings being treated as errors
> /Users/ddkilzer/Projects/Cocoa/WebKit/WebKitTools/DumpRenderTree/ 
> DumpRenderTree.m: In function 'dump':
> /Users/ddkilzer/Projects/Cocoa/WebKit/WebKitTools/DumpRenderTree/ 
> DumpRenderTree.m:127: warning: 'WebFrame' may not respond to '- 
> renderTreeAsExternalRepresentation'
> /Users/ddkilzer/Projects/Cocoa/WebKit/WebKitTools/DumpRenderTree/ 
> DumpRenderTree.m:127: warning: (Messages without a matching method  
> signature
> /Users/ddkilzer/Projects/Cocoa/WebKit/WebKitTools/DumpRenderTree/ 
> DumpRenderTree.m:127: warning: will be assumed to return 'id' and  
> accept
> /Users/ddkilzer/Projects/Cocoa/WebKit/WebKitTools/DumpRenderTree/ 
> DumpRenderTree.m:127: warning: '...' as arguments.)
> ** BUILD FAILED **
> can't find executable DumpRenderTree tool (looked in /Users/ 
> ddkilzer/Projects/Cocoa/WebKit/WebKitBuild/Deployment)
>
> _______________________________________________
> webkit-dev mailing list
> webkit-dev@opendarwin.org
> http://www.opendarwin.org/mailman/listinfo/webkit-dev
>
>



From darin at apple.com  Thu Jun 16 09:56:41 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] WebKitTools/Scripts/build-dumprendertree seems to be
	broken
In-Reply-To: <B5034AD4-6805-4E00-A879-82E29FE8D090@mitzpettel.com>
References: <8CFEFDA9-DC19-4051-AAED-6DBEB6E030D7@kilzer.net>
	<B5034AD4-6805-4E00-A879-82E29FE8D090@mitzpettel.com>
Message-ID: <90FD8570-9717-4C98-95D4-E4B583808F61@apple.com>

On Jun 16, 2005, at 6:46 AM, Mitz Pettel wrote:

> This happens because the default built products directory for  
> DumpRenderTree is ./WebKit/WebKitTools/DumpRenderTree/WebKitBuild/  
> whereas WebKit's default built products directory is ./WebKit/ 
> WebKitBuild/. The workaround is to open Xcode preferences and  
> manually set a built products directory. This will get WebKit and  
> DumpRenderTree in sync.

It's actually a bug in the build-dumprendertree script that causing  
this to happen. I'll fix it right now!

     -- Darin


From darin at apple.com  Thu Jun 16 10:01:09 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] WebKitTools/Scripts/build-dumprendertree seems to be
	broken
In-Reply-To: <8CFEFDA9-DC19-4051-AAED-6DBEB6E030D7@kilzer.net>
References: <8CFEFDA9-DC19-4051-AAED-6DBEB6E030D7@kilzer.net>
Message-ID: <253B303B-65FE-40D8-919C-88C6445C522B@apple.com>


On Jun 16, 2005, at 5:16 AM, David D. Kilzer wrote:

> When trying to run "run-webkit-tests", the build-dumprendertree  
> script dies when trying to compile DumpRenderTree.m:

Fixed now (as soon as anoncvs picks up my changes, say in the next  
five minutes or so).

The default build directory is supposed to be a directory named  
WebKitBuild next to the other directories (like WebKitTools, WebKit,  
and the like). It was broken. Sorry.

     -- Darin


From opendarwin.org at mitzpettel.com  Thu Jun 16 14:44:32 2005
From: opendarwin.org at mitzpettel.com (Mitz Pettel)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] Debugging in Xcode using a custom executable
Message-ID: <37F6B947-1671-4720-AA42-76B78FE0E9DD@mitzpettel.com>

Is there a way to debug WebKit using a custom executable in Xcode?

I opened a new project, created a custom executable with / 
Applications/Safari.app as the executable path and with the  
environment variable DYLD_FRAMEWORK_PATH set to the build destination  
of WebKit.

Source-level debugging seems to work only for the objective-C parts,  
though. The C++ parts show as "??" in the call stack and of course I  
don't get their source code.

Any suggestions?

-- Mitz Pettel

From darin at apple.com  Thu Jun 16 15:14:12 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] some handy queries for screening, reviewing,
	and committing
Message-ID: <619F5145-7C7A-4D8E-B938-0641CBD6DD4B@apple.com>

= Bug screening (useful for anyone who can confirm bugs)

Bugs that are still unconfirmed:

     http://bugzilla.opendarwin.org/buglist.cgi? 
query_format=advanced&product=WebKit&bug_status=UNCONFIRMED

If you have confirmation privileges, you should move these to NEW if  
the bug report is good (you can reproduce, etc.).

= Patch reviewing (mainly useful for reviewers)

Patches with review requested that have not yet been reviewed:

     http://bugzilla.opendarwin.org/request.cgi? 
action=queue&product=WebKit&type=review&group=type

= Patch committing (mainly useful for people with commit privileges):

Unresolved bugs with reviewed patches attached. This can either mean  
the patch hasn't been committed yet, or that the bug hasn't been  
marked resolved yet, or that a patch that only fixes part of the bug  
has been reviewed and committed, but the bug isn't completely fixed yet.

     http://bugzilla.opendarwin.org/buglist.cgi? 
query_format=advanced&product=WebKit&bug_status=NEW&bug_status=ASSIGNED& 
bug_status=REOPENED&field0-0-0=flagtypes.name&type0-0-0=equals&value0-0- 
0=review%2B

     -- Darin


From clvrmnky at gmail.com  Fri Jun 17 05:53:00 2005
From: clvrmnky at gmail.com (Clever Monkey)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] Building WebKit CVS with XCode 2.1
Message-ID: <8DA35C96-CA32-4989-85B8-42849052D48F@gmail.com>

I ran into a few problems building CVS with XCode 2.1.  The first was  
a "well-known" (to Google, anyway) warning with xcodebuild needing  
it's option changed to "-configuration".

I hacked Makefile.am to fix that.

Of more interest is that JavaScriptCore would immediately fail when  
it hit source that includes some headers from JavaScriptCore/bindings/ 
jni.  Specifically, those headers that reference <JavaVM/jni.h>.   
This would in turn cause a long list of errors related to important  
Java defines like jstring and the like.

My solution was to softlink the contents of /Library/Java/Home/ 
include to some valid include path.  I chose WebKitBuild/Deployment/ 
include/JavaVM.

I'm hoping to confirm whether or not there is some problem with my  
devtools setup, or if this is a known problem.

Thanks.

-- John


From ddkilzer at kilzer.net  Fri Jun 17 06:32:15 2005
From: ddkilzer at kilzer.net (David D. Kilzer)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] some handy queries for screening, reviewing,
	and committing
In-Reply-To: <619F5145-7C7A-4D8E-B938-0641CBD6DD4B@apple.com>
References: <619F5145-7C7A-4D8E-B938-0641CBD6DD4B@apple.com>
Message-ID: <4582805F-8B26-4EBD-8B90-E9C0010AD5BB@kilzer.net>

Note that if you're logged in to Bugzilla, you may save each of these  
searches by entering a unique name and hitting the "Remember search"  
button at the bottom of the results.  The links show up in the footer  
of each Bugzilla page when you're logged in.

Dave


On Jun 16, 2005, at 5:14 PM, Darin Adler wrote:

> = Bug screening (useful for anyone who can confirm bugs)
>
> Bugs that are still unconfirmed:
>
>     http://bugzilla.opendarwin.org/buglist.cgi? 
> query_format=advanced&product=WebKit&bug_status=UNCONFIRMED
>
> If you have confirmation privileges, you should move these to NEW  
> if the bug report is good (you can reproduce, etc.).
>
> = Patch reviewing (mainly useful for reviewers)
>
> Patches with review requested that have not yet been reviewed:
>
>     http://bugzilla.opendarwin.org/request.cgi? 
> action=queue&product=WebKit&type=review&group=type
>
> = Patch committing (mainly useful for people with commit privileges):
>
> Unresolved bugs with reviewed patches attached. This can either  
> mean the patch hasn't been committed yet, or that the bug hasn't  
> been marked resolved yet, or that a patch that only fixes part of  
> the bug has been reviewed and committed, but the bug isn't  
> completely fixed yet.
>
>     http://bugzilla.opendarwin.org/buglist.cgi? 
> query_format=advanced&product=WebKit&bug_status=NEW&bug_status=ASSIGNE 
> D&bug_status=REOPENED&field0-0-0=flagtypes.name&type0-0-0=equals&value 
> 0-0-0=review%2B
>
>     -- Darin

From darin at apple.com  Fri Jun 17 09:41:07 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] Building WebKit CVS with XCode 2.1
In-Reply-To: <8DA35C96-CA32-4989-85B8-42849052D48F@gmail.com>
References: <8DA35C96-CA32-4989-85B8-42849052D48F@gmail.com>
Message-ID: <E1A53411-CBFD-4C84-AE73-E31FD4007C76@apple.com>

On Jun 17, 2005, at 5:53 AM, Clever Monkey wrote:

> I ran into a few problems building CVS with XCode 2.1.  The first  
> was a "well-known" (to Google, anyway) warning with xcodebuild  
> needing it's option changed to "-configuration".
>
> I hacked Makefile.am to fix that.

You shouldn't be using makefiles at all, so you won't be using  
Makefile.am; that file is currently part of a legacy build system  
only used by people on the Safari team.

You should be invoking the "build-webkit" script, which calls  
"xcodebuild" for you with the proper options.

> Of more interest is that JavaScriptCore would immediately fail when  
> it hit source that includes some headers from JavaScriptCore/ 
> bindings/jni.  Specifically, those headers that reference <JavaVM/ 
> jni.h>.  This would in turn cause a long list of errors related to  
> important Java defines like jstring and the like.
>
> My solution was to softlink the contents of /Library/Java/Home/ 
> include to some valid include path.  I chose WebKitBuild/Deployment/ 
> include/JavaVM.
>
> I'm hoping to confirm whether or not there is some problem with my  
> devtools setup, or if this is a known problem.

Others are building successfully without having to do this. I'm not  
sure why you ran into this problem; clearly something to do with the  
Java installation, but not obvious to me what's wrong.

     -- Darin


From patrick.forget2 at gmail.com  Fri Jun 17 12:08:04 2005
From: patrick.forget2 at gmail.com (Patrick Forget)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] Files for KWQ port on win32
Message-ID: <1870a4aa05061712084199c59a@mail.gmail.com>

Hello,

I have put the file on my personal web site. Don't expect these files to 
stay there very long (I will resign my service for my ISP next month.

Just note that some of those files are a copy of the gtk port. Don't expect 
anything from QString. The more interesting part came from the platform 
specific version:

QPainter (based on GDI, not GDI+)
QButton
QCheckBox
QTextEdit
QScrollViex
QWidget
etc...

For the compilation, I used Dev-C++ and Mingw32. I was unable to compile the 
files from KJS by using the visual-C++ compiler. I didn't used any Makefile, 
only setup a project from Dev-C++ to get the compilation.

Some trick I have used:

1) Just be sure the program can find the path for kjs, khtml and pcre.

2) WebCorePrefix.h need to be included for each file

This is not a really good detailed explanation to make the compilation, but 
if someone need help, just contact me (but don't expect a quick answer).

In 5 weeks, i will have much time available for this. I do have an interest 
to complete the platform specific file (for win32). 


Patrick


________________________________
The files:

http://patrick.forget.neuf.fr/WebCore/JavaScriptCore_win32_27jun05.zip
http://patrick.forget.neuf.fr/WebCore/kwq_win32_27jun05.zip

A test to check KWQ:

http://patrick.forget.neuf.fr/WebCore/kwq-win32_test.cpp

A screenshot from the test program:

http://patrick.forget.neuf.fr/WebCore/screenshot.bmp
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.macosforge.org/pipermail/webkit-dev/attachments/20050617/1b83c3e9/attachment.html
From clvrmnky at gmail.com  Sat Jun 18 06:14:47 2005
From: clvrmnky at gmail.com (Clever Monkey)
Date: Tue Oct  9 17:52:53 2007
Subject: [webkit-dev] Building WebKit CVS with XCode 2.1
In-Reply-To: <E1A53411-CBFD-4C84-AE73-E31FD4007C76@apple.com>
References: <8DA35C96-CA32-4989-85B8-42849052D48F@gmail.com>
	<E1A53411-CBFD-4C84-AE73-E31FD4007C76@apple.com>
Message-ID: <27732DF9-4847-4746-ABF5-1DA2378F8793@gmail.com>


On Jun 17, 2005, at 12:41 PM, Darin Adler wrote:

> On Jun 17, 2005, at 5:53 AM, Clever Monkey wrote:
>
>
>> I ran into a few problems building CVS with XCode 2.1.  The first  
>> was a "well-known" (to Google, anyway) warning with xcodebuild  
>> needing it's option changed to "-configuration".
>>
>> I hacked Makefile.am to fix that.
>>
>
> You shouldn't be using makefiles at all, so you won't be using  
> Makefile.am; that file is currently part of a legacy build system  
> only used by people on the Safari team.
>
> You should be invoking the "build-webkit" script, which calls  
> "xcodebuild" for you with the proper options.
>

This *was* from running "build-webkit".  I don't think I'm the only  
one who has run into this.  I found the "solution", such as it is, on  
Google.

build-webkit is invoking xcodebuild, but with a deprecated option.

>> Of more interest is that JavaScriptCore would immediately fail  
>> when it hit source that includes some headers from JavaScriptCore/ 
>> bindings/jni.  Specifically, those headers that reference <JavaVM/ 
>> jni.h>.  This would in turn cause a long list of errors related to  
>> important Java defines like jstring and the like.
>>
>> My solution was to softlink the contents of /Library/Java/Home/ 
>> include to some valid include path.  I chose WebKitBuild/ 
>> Deployment/include/JavaVM.
>>
>> I'm hoping to confirm whether or not there is some problem with my  
>> devtools setup, or if this is a known problem.
>>
>
> Others are building successfully without having to do this. I'm not  
> sure why you ran into this problem; clearly something to do with  
> the Java installation, but not obvious to me what's wrong.
>
It looks like the upgrade to XCode 2.1 did not fix some softlinks in / 
System/Library/Frameworks.  I've had this sort of thing happen  
before, and should know by now to completely remove previous release  
prior to installing new ones.


From curt.arnold at mac.com  Sat Jun 18 13:58:11 2005
From: curt.arnold at mac.com (Curt Arnold)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] W3C/NIST DOM Test Suites: Background Info
Message-ID: <E4AEA804-ED94-4576-9E43-3F18B3FB41CF@mac.com>

I thought it would be useful to give a brief overview of the W3C/NIST  
DOM Test Suites before considering how they could be integrated into  
WebKit testing.  All statements in this message are personal opinions  
and observations and may not necessarily reflect those of the W3C DOM  
Interest Group.

The W3C/NIST DOM Test Suite (http://www.w3.org/DOM/Test) is an open- 
source software project of the W3C licensed under the W3C Software  
License.  Distinct test suites exist for each module and level  
combination.  For example, there is a DOM Level 1 Core test suite, a  
DOM Level 2 HTML test suite and a DOM Level 3 Load and Save Test  
Suite.  With the exception of DOM Level 2 HTML, the test suites do  
not attempt to duplicate tests in lower levels or other modules.  DOM  
Level 2 HTML is an exception since the recommendation was not upwards  
compatible with DOM Level 1 HTML and it contains all the tests from  
the L1 HTML test suite.  To claim conformance with the L2 HTML  
recommendation, an implementation should pass the L2 HTML, L2 Core  
and L1 Core test suites.

Tests are written in XML and conform to a schema that is generated  
from the XML sources of the DOM recommendations in that level and  
some simple common language constructs.  Download a revision from  
http://dev.w3.org/cvsweb/2001/DOM-Test-Suite/tests/level1/core/ 
attrname.xml and view in a text editor.  The tests contain metadata  
describing the source and intention of the tests and link to relevant  
sections of the recommendation.  The tests are written from the  
perspective of a client of a synchronous parser, that is typically  
request a parser to load a document and expect the document to be  
fully loaded on return of control, they perform some action on the  
returned document and then make assertions.

XSLT transforms are used to convert the XML test definitions into  
Java or ECMAScript (aka Javascript).  Other languages have been done  
outside of the DOM TS effort.  The Java tests are typically run using  
JUnit (http://www.junit.org).  The framework was designed to support  
multiple Java unit test frameworks, however since the initial  
development the other contenders are no longer under active  
development.  The framework also supports multiple document loaders.   
The JAXP loaders is the most commonly used, but custom loaders are  
provided for implementations, such as Batik (SVG renderer), that do  
not support JAXP.

Things get a lot messier with ECMAScript.  Parsers may be HTML-only,  
parsers are usually asynchronous, and there is not a widely deployed  
parsing API like JAXP.

The original NIST Core Test Suite were written as operations on XML  
documents (staff.xml, staffNS.xml, etc) that contained elements like  
<employee>, <salary>, etc.  To allow the tests to be run against HTML- 
only implementations, "HTML compatible" variants of the tests (file  
names start with hc_) were created where XML tag names were replaced  
with HTML tag names with compatible content models (for example  
<employee> became <p> and <employeeId> became <em>).   The hc_* tests  
can be run by both XML and HTML processors.  The test framework  
selects an appropriate extension for the test, for example,  
hc_attrname.xml contains:

<load var="doc" href="hc_staff" willBeModified="false"/>

The test framework determines whether to load "hc_staff.xml",  
"hc_staff.html", "hc_staff.xhtml" or "hc_staff.svg".

To make the test work with asynchronous parsers, the tests are split  
into two sections, a request phase that starts parsing a document and  
a second phase that is started after the document has been completely  
loaded.

The ECMAScript productions come in a two flavors: A JSUnit-hosted  
(http://www.jsunit.net) test suite and a self-hosted test suites.   
The JSUnit test suite can be configured to use several different  
approaches to loading the test documents.  The most common for HTML  
browsers is the IFRAME loader which manipulates documents that are  
loaded by setting the src attribute on IFRAME elements that are  
embedded in the JSUnit test definition.  Unfortunately, Safari and  
Konqueror do not dispatch the "load" event to the document containing  
the IFRAME element which causes the JSUnit test suite to think that  
the test documents never load.

The "self-hosted" productions were created to test implementations  
that could not run JSUnit, particularly the Palm OS browser (resource  
issues), ie:Mac Safari/Konqueror (the load event issue), and SVG  
browsers.  The self-hosted tests embed the test script into the test  
document and the script is run when the document completes loading  
and then change the document to indicate the success or failure of  
the test.  For example, the SVG tests turn into a green rectangle if  
pass, red if failed.  This approach allows most tests to be run in  
browsers that don't support JSUnit, however tests that depend on  
loading multiple documents can't be produced.

The DOM TS web page contains the Java and JSUnit productions, however  
the self-hosted tests are only available by building from the CVS or  
downloading old and unofficial builds from http://homepage.mac.com/ 
curt.arnold/FileSharing1.html.

Some links:

http://lists.w3.org/Archives/Public/www-dom-ts/2005Mar/0002
http://lists.w3.org/Archives/Public/www-dom-ts/2004Mar/0034


So to recap:

Tests in XML
Converted to Java and ECMAScript
JSUnit runs in most browsers, but not Safari or Konqueror (at least  
last time I checked)
Self-hosted tests run in more browsers but doesn't support the few  
multiple document tests.

The self-hosted tests could be a good fit for the existing layout  
tests.  In addition, it may be worthwhile to explore producing either  
C or Objective-C rendering of the tests if that would make it easier  
to debug the implementation.

I'll attempt to rerun the survey of DOM implementations and provide  
more specific instructions on building and running the test suites  
with Safari.

The most significant deviation between Java and ECMAScript  
implementations is that the recommendation is explicit that certain  
actions should raise exceptions.  Java implementation typically do  
throw the expected exceptions, ECMAScript implementations typically  
do not, presumably to preserve compatibility with pre-standard  
implementations and to avoid ever throwing an alert box up to the  
user.  It would be nice if some way of reconciling the compatibility  
behavior with the recommendation specified behavior.  Possibly, that  
the exception would only be thrown if there is an non-default  
exception handler.  However, that is likely a discussion for much later.







From ddkilzer at kilzer.net  Sat Jun 18 21:52:01 2005
From: ddkilzer at kilzer.net (David D. Kilzer)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] W3C/NIST DOM Test Suites: Background Info
In-Reply-To: <E4AEA804-ED94-4576-9E43-3F18B3FB41CF@mac.com>
References: <E4AEA804-ED94-4576-9E43-3F18B3FB41CF@mac.com>
Message-ID: <FE88AF37-3604-4E42-BAD9-1FA9CD95063A@kilzer.net>

Bug 3609 filed for the "onload" event of an iframe element not firing.

   http://bugzilla.opendarwin.org/show_bug.cgi?id=3609

Dave


On Jun 18, 2005, at 3:58 PM, Curt Arnold wrote:

> [...]
>
> The ECMAScript productions come in a two flavors: A JSUnit-hosted  
> (http://www.jsunit.net) test suite and a self-hosted test suites.   
> The JSUnit test suite can be configured to use several different  
> approaches to loading the test documents.  The most common for HTML  
> browsers is the IFRAME loader which manipulates documents that are  
> loaded by setting the src attribute on IFRAME elements that are  
> embedded in the JSUnit test definition.  Unfortunately, Safari and  
> Konqueror do not dispatch the "load" event to the document  
> containing the IFRAME element which causes the JSUnit test suite to  
> think that the test documents never load.
>
> The "self-hosted" productions were created to test implementations  
> that could not run JSUnit, particularly the Palm OS browser  
> (resource issues), ie:Mac Safari/Konqueror (the load event issue),  
> and SVG browsers.  The self-hosted tests embed the test script into  
> the test document and the script is run when the document completes  
> loading and then change the document to indicate the success or  
> failure of the test.  For example, the SVG tests turn into a green  
> rectangle if pass, red if failed.  This approach allows most tests  
> to be run in browsers that don't support JSUnit, however tests that  
> depend on loading multiple documents can't be produced.
>
> [...]


From HanspeterSchaub at mac.com  Sun Jun 19 05:05:38 2005
From: HanspeterSchaub at mac.com (Hanspeter Schaub)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] proposed patch and regression test files for Bug #3317
	posted 
Message-ID: <4DC8653B-9708-44B8-809A-B52174493AE6@mac.com>

Howdy WebKit developers,

I have posted a proposed patch for the list outline error (Bug #3317)  
that has begun to show up in Safari 1.3/2.0 and higher.

     http://bugzilla.opendarwin.org/show_bug.cgi?id=3317

When I apply this patch, I've found that the outline CSS features  
appears to behave as expected, and the double outline no longer  
appears.  I'd appreciate feedback on this to see if it causes other  
issues?  The modified webkit regression test ran without errors after  
applying it.

The proposed regression test sets up a simple html page with a list,  
and an outline around the list element.  Safari 2.0 fails this, but  
after applying the patch, the new versions appears to function  
correctly.

thanks,

HP

---------------------------------------------------------------
Hanspeter Schaub

Phone:     (540) 763-8370
Email:    HanspeterSchaub@mac.com
Web:    http://homepage.mac.com/hanspeterschaub




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.macosforge.org/pipermail/webkit-dev/attachments/20050619/6fb0601b/attachment.html
From finlay.dobbie at gmail.com  Sun Jun 19 09:15:15 2005
From: finlay.dobbie at gmail.com (Finlay Dobbie)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] proposed patch and regression test files for Bug
	#3317 posted
In-Reply-To: <4DC8653B-9708-44B8-809A-B52174493AE6@mac.com>
References: <4DC8653B-9708-44B8-809A-B52174493AE6@mac.com>
Message-ID: <ab20c92d05061909156abba31b@mail.gmail.com>

On 6/19/05, Hanspeter Schaub <HanspeterSchaub@mac.com> wrote:
> When I apply this patch, I've found that the outline CSS features appears to
> behave as expected, and the double outline no longer appears.  I'd
> appreciate feedback on this to see if it causes other issues?

You might want to set the review? flag on the patch and post to
webkit-reviews, if you haven't already done so.

 -- Finlay

From kevin at sb.org  Sun Jun 19 12:17:14 2005
From: kevin at sb.org (Kevin Ballard)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Newline translation issue with textareas
Message-ID: <6D84EC5E-F3ED-4A82-889F-FC8D9696D7FB@sb.org>

I'm trying to solve <http://bugzilla.opendarwin.org/show_bug.cgi? 
id=3401>, which involves writing accessors for the selection on  
QTextEdit and KWQTextArea. After poking around, I discovered that  
KWQTextArea translates \r\n sequences (and just plain \r sequences)  
to \n when returning its text value. This makes a certain amount of  
sense, because standardizing newlines can be helpful at times, and  
Firefox also exhibits this behaviour when tested. However, WebKit has  
a problem with this. If I set the value of a textarea in ecmascript  
to "A\r\ntext\r\nfield" and fetch the value back out, the \r\n  
sequences are still there. Only if I change the value of the textarea  
by hand do the sequences get translated. After examining the code,  
I'm guessing this is because HTMLTextAreaElementImpl caches the value  
of the textarea and simply returns that cached value if the  
NSTextView widget hasn't been touched. And since the translation  
happens down in KWQTextArea, the returned value still contains the \r\n.

As you can imagine, this causes quite a few problems when trying to  
handle the selection, since the selection can stay the same and the  
text change underneath it, since the selection isn't cached in  
HTMLTextAreaElementImpl and will always be fetched from the  
KWQTextArea (at least, as of this writing - I see no reason to try to  
cache it), so the selection will always be given assuming the  
translation is in place (which is another issue - I have to modify  
the real selection to return the perceived selection, since the  
NSTextView's text still contains the \r\n sequences, KWQTextArea  
simply translates when returning the text value)

Another issue related to this is KWQTextArea has accessors for the  
cursor position (but not the selection - odd), which do not take into  
account the translation. I'm not entirely sure how to test this,  
since they're only used when updating the widget, and I haven't  
looked at this enough to figure out how to actually trigger that, but  
I imagine it could cause the cursor position to change based on the \r 
\n translation. But this is actually fixable once the above issue is  
dealt with.

Anyway, I'm looking for a solution to the problem outlined above.  
Should we translate the text when setting it from Javascript? But  
that makes HTMLTextAreaElementImpl acquire behaviour that was hidden  
down in KWQTextArea, behaviour that I don't if it should belong in  
HTMLTextAreaElementImpl. Should we stop caching the text value in  
HTMLTextAreaElementImpl? I'm not sure why it is cached, AFAIK it's  
not something that's being accessed over and over, the only real  
benefit to caching is to avoid translating the NSString to a QString  
each time it's accessed. Should we invalidate the cached value when  
setting a new value in code? I'm not sure how to do that, because I'm  
not sure where the set value is pushed down to the KWQTextArea.

Does anybody who has more experience with this code than a single day  
have any comments or suggestions for this problem?

-- 
Kevin Ballard
kevin@sb.org
http://www.tildesoft.com
http://kevin.sb.org

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2378 bytes
Desc: not available
Url : http://lists.macosforge.org/pipermail/webkit-dev/attachments/20050619/139e695c/smime.bin
From kevin at sb.org  Sun Jun 19 12:22:34 2005
From: kevin at sb.org (Kevin Ballard)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Newline translation issue with textareas
In-Reply-To: <6D84EC5E-F3ED-4A82-889F-FC8D9696D7FB@sb.org>
References: <6D84EC5E-F3ED-4A82-889F-FC8D9696D7FB@sb.org>
Message-ID: <02DD438E-6247-421B-B786-1E5940C87DD3@sb.org>

For a quick test of the newline translation problem I was talking  
about, try this code. Press the first button to get a count of the  
characters in the field, and the second to replace the contents of  
the field with the same text but using \r\n instead of \n as newline.  
So render this in WebKit, press the first button to get a count of  
12, press the second button to modify the field, press the first to  
get a count of 14, then manually modify the field (i.e. type a  
character and delete it) and press the first button and you'll get a  
count of 12 again. The correct behaviour, I believe, is to always  
return a count of 12, and if you test this in Firefox you'll see  
that's what happens there.

<html>
     <head>
         <title>foo</title>
         <script type="text/javascript">
function foobar() {
     var textarea = document.getElementById("foo");
     alert(textarea.value.length);
}
function bar() {
     var textarea = document.getElementById("foo");
     //textarea.setSelectionRange(3,7);
     textarea.value = "A\r\ntext\r\nfield";
     textarea.focus();
}
         </script>
     </head>
     <body>
         <p>Test</p>
         <form>
             <textarea id="foo">A
text
field</textarea>
             <br />
             <input type="submit" onclick="foobar(); return false;"  
value="Length" />
             <br />
             <input type="submit" onclick="bar(); return false;"  
value="Modify" />
         </form>
     </body>
</html>


-- 
Kevin Ballard
kevin@sb.org
http://www.tildesoft.com
http://kevin.sb.org

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2378 bytes
Desc: not available
Url : http://lists.macosforge.org/pipermail/webkit-dev/attachments/20050619/a3d498f1/smime.bin
From hyatt at apple.com  Sun Jun 19 14:59:35 2005
From: hyatt at apple.com (Dave Hyatt)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] W3C/NIST DOM Test Suites: Background Info
In-Reply-To: <FE88AF37-3604-4E42-BAD9-1FA9CD95063A@kilzer.net>
References: <E4AEA804-ED94-4576-9E43-3F18B3FB41CF@mac.com>
	<FE88AF37-3604-4E42-BAD9-1FA9CD95063A@kilzer.net>
Message-ID: <5B23BC1D-F9A7-4D32-8768-4607EA6CBD37@apple.com>

Last I tested this onload did fire but did so with the wrong  
permissions.

dave

On Jun 18, 2005, at 9:52 PM, David D. Kilzer wrote:

> Bug 3609 filed for the "onload" event of an iframe element not firing.
>
>   http://bugzilla.opendarwin.org/show_bug.cgi?id=3609
>
> Dave
>
>
> On Jun 18, 2005, at 3:58 PM, Curt Arnold wrote:
>
>
>> [...]
>>
>> The ECMAScript productions come in a two flavors: A JSUnit-hosted  
>> (http://www.jsunit.net) test suite and a self-hosted test suites.   
>> The JSUnit test suite can be configured to use several different  
>> approaches to loading the test documents.  The most common for  
>> HTML browsers is the IFRAME loader which manipulates documents  
>> that are loaded by setting the src attribute on IFRAME elements  
>> that are embedded in the JSUnit test definition.  Unfortunately,  
>> Safari and Konqueror do not dispatch the "load" event to the  
>> document containing the IFRAME element which causes the JSUnit  
>> test suite to think that the test documents never load.
>>
>> The "self-hosted" productions were created to test implementations  
>> that could not run JSUnit, particularly the Palm OS browser  
>> (resource issues), ie:Mac Safari/Konqueror (the load event issue),  
>> and SVG browsers.  The self-hosted tests embed the test script  
>> into the test document and the script is run when the document  
>> completes loading and then change the document to indicate the  
>> success or failure of the test.  For example, the SVG tests turn  
>> into a green rectangle if pass, red if failed.  This approach  
>> allows most tests to be run in browsers that don't support JSUnit,  
>> however tests that depend on loading multiple documents can't be  
>> produced.
>>
>> [...]
>>
>
> _______________________________________________
> webkit-dev mailing list
> webkit-dev@opendarwin.org
> http://www.opendarwin.org/mailman/listinfo/webkit-dev
>


From mjs at apple.com  Sun Jun 19 20:27:19 2005
From: mjs at apple.com (Maciej Stachowiak)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Safari with new WebKit double-clickable distribution
In-Reply-To: <4E8A34CE-D36A-4B81-B66D-E820F7B6D2E6@nrao.edu>
References: <4E8A34CE-D36A-4B81-B66D-E820F7B6D2E6@nrao.edu>
Message-ID: <32D1EDF4-320F-4592-8B08-E59A3C6CF121@apple.com>


Hi Boyd,

On Jun 9, 2005, at 6:21 PM, Boyd Waters wrote:

> Thanks to all involved in making this improved WebKit available.
>
> I have modified the "WebKitTools/Scripts/run-safari" script by  
> wrapping it as a double-clickable application, which includes a  
> build of the WebKit CVS (pulled on Tuesday).
>
> Web developers who do not wish to build the WebKit from source, but  
> want to test content against this version, can use this as easily  
> as they might use any other Macintosh GUI application.
>
> A disk image is available at
>
> http://www.aoc.nrao.edu/~bwaters/projects/mac/SafariOnAcid.dmg

I know this is a bit belated, but I think it's great that you set  
this up. Please mail the list if you ever make fresher binaries.

Regards,
Maciej


From mjs at apple.com  Sun Jun 19 21:35:36 2005
From: mjs at apple.com (Maciej Stachowiak)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Widget / Drawing API thoughts
In-Reply-To: <6D90642E-EFC0-4D32-BF5C-07D39A568F69@theolliviers.com>
References: <42AA1109.6030602@xiondigital.net>
	<6D90642E-EFC0-4D32-BF5C-07D39A568F69@theolliviers.com>
Message-ID: <3ECA98AE-3223-43B9-AE75-BFB606B0BB99@apple.com>


On Jun 11, 2005, at 9:05 AM, Kevin Ollivier wrote:

> Hi Justin,
> On Jun 10, 2005, at 3:15 PM, Justin Haygood wrote:
>
>
>> Even though I'm nowhere near there yet (got to get JSCore working  
>> first ;) ), here is an idea:
>>
>> Have KWQ use cross-platform C/C++ implementations, keeping  
>> everything as high level as possible, and use C++ inheritence to  
>> inherit from platform specific implementations.
>>
>> for instance, QRegion can be implemented sans Cocoa for the stuff  
>> that is already cross platform, but inherit from a KWQRegion which  
>> has different implementations for Cocoa, Win32, GTK+, Qt (hey, why  
>> not?), wxWidgets, etc...
>>
>
> I definitely agree something like this would be very helpful, but  
> I'm curious as to why you'd want to inherit the platform-specific  
> implementation from the base implementation, rather than vice-versa.
>
> For example, what would be great for us is that the common classes  
> all have KWQ(something)Base classes with virtual methods, from  
> which we derive toolkit-specific implementations. This is helpful  
> because even for completely "toolkit neutral" classes, like  
> KWQBrush, we sometimes need to have a way of converting that to or  
> from, say, a wxBrush that we can use. So with this approach, we  
> could just add our accessor functions to a toolkit-specific  
> implementation, and reuse the rest from the common implementation.  
> For classes with no real way of having a 'toolkit-independent'  
> implementation, base classes could just be stubs.

Looking at the Q-replacement classes in kwq, I think they probably  
all fall into two categories:

1) Almost entirely platform-independent, with possibly a bit of  
platform-dependent logic for converting to native toolkit types.  
QString and QColor would be in this category.

2) Almost entirely platform-dependent, with almost no platform- 
independent logic.

So I think there's a way to do this that doesn't rely on inheriting  
from special base classes. For both categories 1 and 2, we'd share  
the headers, with #ifdefs for the platform-dependent data members and  
any native conversion methods. For category 1, define the few  
platform-specific conversion functions in a platform-dependent  file.  
For category 2, put the whole implementation in a different platform- 
dependent file.

The problem with inheriting from platform-independent base classes is  
that you would have to use multiple inheritance to get the  
inheritance hierarchy right. For instance, QCheckBox would have to  
inherit from QButton *and* from QCheckBoxBase, which QButton would  
have to inherit from QButtonBase. I think this would be needlessly  
complex, and I guess whole separate implementations of the widgets  
are likely to be fine.

Regards,
Maciej


From darin at apple.com  Sun Jun 19 21:40:10 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Building WebKit CVS with XCode 2.1
In-Reply-To: <27732DF9-4847-4746-ABF5-1DA2378F8793@gmail.com>
References: <8DA35C96-CA32-4989-85B8-42849052D48F@gmail.com>
	<E1A53411-CBFD-4C84-AE73-E31FD4007C76@apple.com>
	<27732DF9-4847-4746-ABF5-1DA2378F8793@gmail.com>
Message-ID: <E3EA547B-8FC2-42B8-81A6-8E5D21177CFA@apple.com>

On Jun 18, 2005, at 6:14 AM, Clever Monkey wrote:

> On Jun 17, 2005, at 12:41 PM, Darin Adler wrote:
>
>> On Jun 17, 2005, at 5:53 AM, Clever Monkey wrote:
>>
>>> I ran into a few problems building CVS with XCode 2.1.  The first  
>>> was a "well-known" (to Google, anyway) warning with xcodebuild  
>>> needing it's option changed to "-configuration".
>>>
>>> I hacked Makefile.am to fix that.
>>
>> You shouldn't be using makefiles at all, so you won't be using  
>> Makefile.am; that file is currently part of a legacy build system  
>> only used by people on the Safari team.
>>
>> You should be invoking the "build-webkit" script, which calls  
>> "xcodebuild" for you with the proper options.
>
> This *was* from running "build-webkit".  I don't think I'm the only  
> one who has run into this.  I found the "solution", such as it is,  
> on Google.
>
> build-webkit is invoking xcodebuild, but with a deprecated option.

OK.

I was misled by your "I hacked Makefile.am" comment, and I still  
don't understand what that means.

In any case, I changed build-webkit to use -configuration with newer  
versions of Xcode a few days back, so this should be fixed by now. If  
it's not working for you, please let me know what's wrong (ideally  
via bugzilla in the Tools component of WebKit).

     -- Darin


From mjs at apple.com  Sun Jun 19 21:40:38 2005
From: mjs at apple.com (Maciej Stachowiak)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Porting Gtk+WebCore
In-Reply-To: <d5c0543705061002192619b4ea@mail.gmail.com>
References: <42A7CBD6.5040501@iki.fi>
	<6B25C835-9F0B-4E63-8F1A-DC713D7C837D@apple.com>
	<d5c0543705061002192619b4ea@mail.gmail.com>
Message-ID: <124C1099-6E60-4375-B35F-0FADD029EECC@apple.com>


On Jun 10, 2005, at 2:19 AM, Kent Sandvik wrote:

>
> Yes, that makes sense. The issue indeed is to keep these two  build
> systems in sync, especially in cases where a developer does not have
> access to a Mac platform for updating the Xcode projects...

Yep, that's the biggest risk. In the end we may have to have  
different people add things on different platforms. This may be an  
issue on Windows even if we end up using automake on OS X.

> The qmake tool from Trolltech also used to be able to export from a
> canonical build-rule format to Makefiles and Xcode project files (at
> least when I worked on the Mac side over at Trolltech, don't know how
> well they support XCode 2.0/2.1 today.. might work fine). So that's an
> option. qmake and SCons are examples of starting from a meta-level
> description and build platform-dependent Makefile and project
> environments.

That's a neat idea. One problem is that the Xcode project file format  
changes incompatibly every now and then, so the tool would have to  
totally stay in sync to be usable.

Regards,
Maciej



From darin at apple.com  Sun Jun 19 21:43:52 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] W3C/NIST DOM Test Suites: Background Info
In-Reply-To: <E4AEA804-ED94-4576-9E43-3F18B3FB41CF@mac.com>
References: <E4AEA804-ED94-4576-9E43-3F18B3FB41CF@mac.com>
Message-ID: <5FCFE99C-1721-4B1B-9262-E7F3318008C3@apple.com>

On Jun 18, 2005, at 1:58 PM, Curt Arnold wrote:

> The "self-hosted" productions were created to test implementations  
> that could not run JSUnit, particularly the Palm OS browser  
> (resource issues), ie:Mac Safari/Konqueror (the load event issue),  
> and SVG browsers.  The self-hosted tests embed the test script into  
> the test document and the script is run when the document completes  
> loading and then change the document to indicate the success or  
> failure of the test.  For example, the SVG tests turn into a green  
> rectangle if pass, red if failed.  This approach allows most tests  
> to be run in browsers that don't support JSUnit, however tests that  
> depend on loading multiple documents can't be produced.

Completely independent of getting JSUnit running, I'd love to see  
these "self-hosted" versions in the WebCore/layout-tests directory. I  
think that Geoffrey Garen and Justin Garcia were talking about  
working on this.

     -- Darin


From mjs at apple.com  Sun Jun 19 21:45:43 2005
From: mjs at apple.com (Maciej Stachowiak)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Stuck... again (Conserative GC)
In-Reply-To: <42AC63D2.2090104@xiondigital.net>
References: <42AB62D0.8060805@xiondigital.net>
	<42AC63D2.2090104@xiondigital.net>
Message-ID: <119D7EB0-A8F2-4A07-B224-A2477B74FEAA@apple.com>


On Jun 12, 2005, at 9:33 AM, Justin Haygood wrote:

> Ouch, crash in markStackObjectsConservatively()
>
> The following two lines essentially cause the crash:
>
>  char **p = (char **)start;
>  char **e = (char **)end;
>
> start and end work, and according to the debugger have the correct  
> values.
>
> p and e also have correct values, BUT also the debugger has this to  
> say about them:
>
> p: expression can't be evaluated
> e: Bad Ptr

That's really weird. Are you still having this problem? I don't have  
access to a Windows box at the moment so I have no idea what would be  
wrong. Perhaps windows doesn't like the cast to a doubly indirect  
pointer for some reason. Or maybe it is trying to implicitly double- 
deference them in the debugger, which of course would not work since  
they point to spots on the stack that likely are not themselves valid  
pointers.

Regards,
Maciej


From mjs at apple.com  Sun Jun 19 21:49:57 2005
From: mjs at apple.com (Maciej Stachowiak)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Debugging in Xcode using a custom executable
In-Reply-To: <37F6B947-1671-4720-AA42-76B78FE0E9DD@mitzpettel.com>
References: <37F6B947-1671-4720-AA42-76B78FE0E9DD@mitzpettel.com>
Message-ID: <BE8B8C6C-EDF0-4B79-BDF8-F0705F4591B7@apple.com>


On Jun 16, 2005, at 2:44 PM, Mitz Pettel wrote:

> Is there a way to debug WebKit using a custom executable in Xcode?
>
> I opened a new project, created a custom executable with / 
> Applications/Safari.app as the executable path and with the  
> environment variable DYLD_FRAMEWORK_PATH set to the build  
> destination of WebKit.
>
> Source-level debugging seems to work only for the objective-C  
> parts, though. The C++ parts show as "??" in the call stack and of  
> course I don't get their source code.
>
> Any suggestions?

Maybe this is too obvious, but... did you do a Development or  
Deployment build of WebKit?

Regards,
Maciej


From darin at apple.com  Sun Jun 19 21:55:39 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] upcoming renaming, your chance for feedback
Message-ID: <01A22788-9342-426B-84B2-B164809A4C68@apple.com>

I am planning on renaming the following classes, source files, and  
methods in WebKit:

     WebBaseResourceHandleDelegate -> WebLoader
     WebMainResourceClient -> WebMainResourceLoader
     WebSubresourceClient -> WebSubresourceLoader
     WebNetscapePluginConnectionDelegate ->  
WebNetscapePlugInStreamLoader
     subresourceClients -> subresourceLoaders
     mainClient -> mainResourceLoader
     plugInStreamClients -> plugInStreamLoaders
     _addSubresourceClient -> _addSubresourceLoader
     _removeSubresourceClient -> _removeSubresourceLoader
     _addPlugInStreamClient -> _addPlugInStreamLoader
     _removePlugInStreamClient -> _removePlugInStreamLoader

Let me know if you have any thoughts on the new names before I do  
this. I'll wait at least a couple of days before I do it (and maybe  
even a few weeks).

     -- Darin


From opendarwin.org at mitzpettel.com  Sun Jun 19 21:57:30 2005
From: opendarwin.org at mitzpettel.com (Mitz Pettel)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Debugging in Xcode using a custom executable
In-Reply-To: <BE8B8C6C-EDF0-4B79-BDF8-F0705F4591B7@apple.com>
References: <37F6B947-1671-4720-AA42-76B78FE0E9DD@mitzpettel.com>
	<BE8B8C6C-EDF0-4B79-BDF8-F0705F4591B7@apple.com>
Message-ID: <81128962-7EE3-44A1-B605-C00F499DC73C@mitzpettel.com>

On Jun 20, 2005, at 7:49 AM, Maciej Stachowiak wrote:

>
> On Jun 16, 2005, at 2:44 PM, Mitz Pettel wrote:
>
>
>> Is there a way to debug WebKit using a custom executable in Xcode?
>>
>> I opened a new project, created a custom executable with / 
>> Applications/Safari.app as the executable path and with the  
>> environment variable DYLD_FRAMEWORK_PATH set to the build  
>> destination of WebKit.
>>
>> Source-level debugging seems to work only for the objective-C  
>> parts, though. The C++ parts show as "??" in the call stack and of  
>> course I don't get their source code.
>>
>> Any suggestions?
>>
>
> Maybe this is too obvious, but... did you do a Development or  
> Deployment build of WebKit?

I did a Development build. The problem turned out to be Xcode's (too-) 
lazy symbol loading and I solved it by choosing Debug > Tools >  
Shared Libraries and changing the Starting Level for WebKit and  
WebCore to All.

-- Mitz Pettel

From darin at apple.com  Sun Jun 19 22:54:33 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] minor tool improvement ideas (sharing my personal list)
Message-ID: <6A5EF6BC-0C11-40F9-AFE2-66B3E2F9648B@apple.com>

I keep a little file on my machine with ideas for tool improvements.  
I haven't put any of these ideas into bugzilla yet, but I wanted to  
share them with the rest of you in case someone wants to do some of  
these:

     update script that opens all files with merge conflicts in an  
editor

     run-webkit-tests option that gives backtraces for failed tests
     run-webkit-tests option that puts you in gdb and re-runs any  
test that crashed

     enhance cvs-apply and cvs-unapply to handle 3-way merges when  
patches are old
     make cvs-apply/unapply smarter about applying patch one level  
too high/low
     teach cvs-apply/unapply how to handle ChangeLog merging so they  
don't always think there's a conflict
     teach cvs-apply to update the date on a ChangeLog entry it's  
merging

     cvs-fix-patch: a script we have internally, make one for  
WebKitTools/Scripts

     cvs-clean: a script we have internally, move it to WebKitTools/ 
Scripts
         change to respect .cvsignore as Maciej suggested
             turns out it's really hard to respect .cvsignore by  
default,
             since there are so many different sources of things to  
ignore
             (defaults, server-side, per-directory .cvsignore, home  
directory .cvsignore)

It would even be helpful to write bugzilla bugs about the best ideas  
from this list.

     -- Darin


From ddkilzer at kilzer.net  Mon Jun 20 04:29:43 2005
From: ddkilzer at kilzer.net (David D. Kilzer)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] minor tool improvement ideas (sharing my personal
	list)
In-Reply-To: <6A5EF6BC-0C11-40F9-AFE2-66B3E2F9648B@apple.com>
References: <6A5EF6BC-0C11-40F9-AFE2-66B3E2F9648B@apple.com>
Message-ID: <9AAB1612-B94C-474A-8DB1-16D5CB66DDBF@kilzer.net>

On Jun 20, 2005, at 12:54 AM, Darin Adler wrote:

>     cvs-clean: a script we have internally, move it to WebKitTools/ 
> Scripts
>         change to respect .cvsignore as Maciej suggested
>             turns out it's really hard to respect .cvsignore by  
> default,
>             since there are so many different sources of things to  
> ignore
>             (defaults, server-side, per-directory .cvsignore, home  
> directory .cvsignore)

It would appear that someone has already written a Perl module called  
VCS::LibCVS::IgnoreChecker (part of the VCS::LibCVS package) which  
does the heavy lifting for you.

   http://search.cpan.org/~dissent/VCS-LibCVS-1.0001/VCS/LibCVS/ 
IgnoreChecker.pm

The module is licensed, "under the same terms as Perl itself", so  
either you could redistribute it or add instructions to  
webkit.opendarwin.org about how to install the module from CPAN.

Dave


From darin at apple.com  Mon Jun 20 09:02:58 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] minor tool improvement ideas (sharing my personal
	list)
In-Reply-To: <9AAB1612-B94C-474A-8DB1-16D5CB66DDBF@kilzer.net>
References: <6A5EF6BC-0C11-40F9-AFE2-66B3E2F9648B@apple.com>
	<9AAB1612-B94C-474A-8DB1-16D5CB66DDBF@kilzer.net>
Message-ID: <C0768E92-AD83-4CC7-A8B9-59B32C6E7A1D@apple.com>

On Jun 20, 2005, at 4:29 AM, David D. Kilzer wrote:

>>     cvs-clean: a script we have internally, move it to WebKitTools/ 
>> Scripts
>>         change to respect .cvsignore as Maciej suggested
>>             turns out it's really hard to respect .cvsignore by  
>> default,
>>             since there are so many different sources of things to  
>> ignore
>>             (defaults, server-side, per-directory .cvsignore, home  
>> directory .cvsignore)
>
> It would appear that someone has already written a Perl module  
> called VCS::LibCVS::IgnoreChecker (part of the VCS::LibCVS package)  
> which does the heavy lifting for you.
>
>   http://search.cpan.org/~dissent/VCS-LibCVS-1.0001/VCS/LibCVS/ 
> IgnoreChecker.pm
>
> The module is licensed, "under the same terms as Perl itself", so  
> either you could redistribute it or add instructions to  
> webkit.opendarwin.org about how to install the module from CPAN.

Thanks for the pointer!

Distributing that entire module, or requiring the module installation  
from CPAN, would be a bit more heavyweight than what's currently  
required for our scripts, but I'll think about it.

Also, I'm not sure I want a version of cvs-clean that talks to the  
server; one thing neat about the old one is that it's fast and  
entirely local.

     -- Darin


From robert.fischer at berlin.de  Mon Jun 20 09:19:24 2005
From: robert.fischer at berlin.de (Robert Fischer)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Building WebKit CVS with XCode 2.1
In-Reply-To: <E3EA547B-8FC2-42B8-81A6-8E5D21177CFA@apple.com>
References: <8DA35C96-CA32-4989-85B8-42849052D48F@gmail.com>
	<E1A53411-CBFD-4C84-AE73-E31FD4007C76@apple.com>
	<27732DF9-4847-4746-ABF5-1DA2378F8793@gmail.com>
	<E3EA547B-8FC2-42B8-81A6-8E5D21177CFA@apple.com>
Message-ID: <6F3D3C66-9B84-4628-B1D7-5385F41E004E@berlin.de>


On Jun 19, 2005, at 9:40 PM, Darin Adler wrote:

> On Jun 18, 2005, at 6:14 AM, Clever Monkey wrote:
>
>
>> On Jun 17, 2005, at 12:41 PM, Darin Adler wrote:
>>
>>
>>> On Jun 17, 2005, at 5:53 AM, Clever Monkey wrote:
>>>
>>>
>>>> I ran into a few problems building CVS with XCode 2.1.  The first
>>>> was a "well-known" (to Google, anyway) warning with xcodebuild
>>>> needing it's option changed to "-configuration".
> ...

> In any case, I changed build-webkit to use -configuration with newer
> versions of Xcode a few days back, so this should be fixed by now. If
> it's not working for you, please let me know what's wrong (ideally
> via bugzilla in the Tools component of WebKit).
>

Thank you, Darin,

I just updated my source tree, ran "build-webkit" on XCode 2.1 and it  
compiled flawlessly (in development mode).

Robert

--
      ---      -  .-.     --         --
          ---    /   \     ----                         tin:b Software
    .-.         /     \  ---  .-.        __o      .-.        (i)
   /   \       /       \     /   \     _`\<,_    /   \  Robert Fischer
  /     \     /         \   /     \   (*)/ (*)  /     `---------------
/       `---'           `-'       `-----------'



From robert.fischer at berlin.de  Mon Jun 20 11:04:50 2005
From: robert.fischer at berlin.de (Robert Fischer)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Distribute to 10.3?
Message-ID: <69DFDB43-83BA-4EA4-A62C-70DEDC91957B@berlin.de>

Hi there,

at the moment I am writing an application which heavily depends on  
DOM. To make it run on 10.3, too, my idea is to distribute WebKit  
frameworks together with my app. Is this permitted? I did not found  
any license agreements on webkit.darwin.org.

Besides this legal issue: has anybody got WebKit compiled on 10.4  
(with MACOSX_DEPLOYMENT_TARGET 10.3) to run on 10.3? My test app  
complains about missing references, e.g. "WebKit undefined reference  
to _kCGImageSourceShouldPreferRGB32".


Thanks in advance,

Robert

--
      ---      -  .-.     --         --
          ---    /   \     ----                         tin:b Software
    .-.         /     \  ---  .-.        __o      .-.        (i)
   /   \       /       \     /   \     _`\<,_    /   \  Robert Fischer
  /     \     /         \   /     \   (*)/ (*)  /     `---------------
/       `---'           `-'       `-----------'



From darin at apple.com  Mon Jun 20 11:16:15 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Distribute to 10.3?
In-Reply-To: <69DFDB43-83BA-4EA4-A62C-70DEDC91957B@berlin.de>
References: <69DFDB43-83BA-4EA4-A62C-70DEDC91957B@berlin.de>
Message-ID: <09854C07-51E0-4243-A8CE-D6F0A0DBF941@apple.com>

On Jun 20, 2005, at 11:04 AM, Robert Fischer wrote:

> at the moment I am writing an application which heavily depends on  
> DOM.

The DOM features are in the OS X 10.3.9 update. If you can depend on  
10.3.9, you can ship a 10.3-compatible version of your application.

> To make it run on 10.3, too, my idea is to distribute WebKit  
> frameworks together with my app. Is this permitted? I did not found  
> any license agreements on webkit.darwin.org.

The license agreement is in the code. WebKit/LICENSE and WebCore/ 
LICENSE-* have the relevant licenses.

But aside from what the license agreement allows, we recommend  
against building a copy of the WebKit frameworks and distributing  
them with your Mac OS X application, because of the various technical  
hurdles involved. It's quite likely your application will break with  
various system changes.

To give  just one example, since various other frameworks use the  
WebKit, your copy of the WebKit will be used by frameworks within  
your application too, not just your application. And there's no way  
to be sure which SPIs those frameworks might be using, or guarantee  
that an update to one of those other frameworks might start using an  
SPI your WebKit doesn't have.

> Besides this legal issue: has anybody got WebKit compiled on 10.4  
> (with MACOSX_DEPLOYMENT_TARGET 10.3) to run on 10.3? My test app  
> complains about missing references, e.g. "WebKit undefined  
> reference to _kCGImageSourceShouldPreferRGB32".

No, I don't think anyone has TOT compiling on 10.3 yet, although we  
didn't remove the various Panther-specific ifdefs and code paths yet.  
Building on 10.4 and running what's built on 10.3 would be yet  
another challenge, and that's something we've never done before in  
the history of the WebKit project.

     -- Darin


From darin at apple.com  Mon Jun 20 12:03:30 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Newline translation issue with textareas
In-Reply-To: <6D84EC5E-F3ED-4A82-889F-FC8D9696D7FB@sb.org>
References: <6D84EC5E-F3ED-4A82-889F-FC8D9696D7FB@sb.org>
Message-ID: <32D534E6-DAF1-4CCF-914C-6BBB83E8AB8E@apple.com>

On Jun 19, 2005, at 12:17 PM, Kevin Ballard wrote:

> I discovered that KWQTextArea translates \r\n sequences (and just  
> plain \r sequences) to \n when returning its text value.

I think that ideally this translation should occur when text gets  
into a text area; then we would have no need to handle these odd  
cases later. This would be a bit challenging because NSTextView has  
various code paths for inserting text, and we'd have to cover all of  
those.

> Another issue related to this is KWQTextArea has accessors for the  
> cursor position (but not the selection - odd), which do not take  
> into account the translation. I'm not entirely sure how to test  
> this, since they're only used when updating the widget, and I  
> haven't looked at this enough to figure out how to actually trigger  
> that, but I imagine it could cause the cursor position to change  
> based on the \r\n translation. But this is actually fixable once  
> the above issue is dealt with.

Good point. You should keep at it and come up with the test case that  
shows this is broken.

> Should we translate the text when setting it from Javascript? But  
> that makes HTMLTextAreaElementImpl acquire behaviour that was  
> hidden down in KWQTextArea, behaviour that I don't if it should  
> belong in HTMLTextAreaElementImpl.

I think that would be an acceptable solution, and probably the  
easiest thing to get right.

The heart of the matter here is that NSTextView can handle all three  
types of line endings, and makes no attempt to unify them as text is  
inserted. Yet we want to have the line ending always be a single  
standard one.

> Should we stop caching the text value in HTMLTextAreaElementImpl?  
> I'm not sure why it is cached, AFAIK it's not something that's  
> being accessed over and over, the only real benefit to caching is  
> to avoid translating the NSString to a QString each time it's  
> accessed.

I think one of the reasons it's cached might be that the value needs  
to survive the process of destroying and re-creating the renderer.

> Should we invalidate the cached value when setting a new value in  
> code? I'm not sure how to do that, because I'm not sure where the  
> set value is pushed down to the KWQTextArea.

RenderTextArea::updateFromElement pushes the value from the DOM into  
the QTextEdit (which in turn uses KWQTextArea). In the case of a  
setValue call, HTMLTextAreaElementImpl::setValue calls setChanged 
(true), which results in an updateFromElement call later.

     -- Darin


From kevin at sb.org  Mon Jun 20 13:00:24 2005
From: kevin at sb.org (Kevin Ballard)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Newline translation issue with textareas
In-Reply-To: <32D534E6-DAF1-4CCF-914C-6BBB83E8AB8E@apple.com>
References: <6D84EC5E-F3ED-4A82-889F-FC8D9696D7FB@sb.org>
	<32D534E6-DAF1-4CCF-914C-6BBB83E8AB8E@apple.com>
Message-ID: <C9997672-E4D0-4C49-A711-4F35EEA279D6@sb.org>

On Jun 20, 2005, at 3:03 PM, Darin Adler wrote:

> I think that ideally this translation should occur when text gets  
> into a text area; then we would have no need to handle these odd  
> cases later. This would be a bit challenging because NSTextView has  
> various code paths for inserting text, and we'd have to cover all  
> of those.

I agree, that would be best, but as you said, there's multiple code  
paths for inserting text.

>> Another issue related to this is KWQTextArea has accessors for the  
>> cursor position (but not the selection - odd), which do not take  
>> into account the translation. I'm not entirely sure how to test  
>> this, since they're only used when updating the widget, and I  
>> haven't looked at this enough to figure out how to actually  
>> trigger that, but I imagine it could cause the cursor position to  
>> change based on the \r\n translation. But this is actually fixable  
>> once the above issue is dealt with.
>>
>
> Good point. You should keep at it and come up with the test case  
> that shows this is broken.

It's not broken if we translate the text on insertion, only in the  
current situation where we translate on retrieval. But I will try to  
figure out how this is being used and how to reproduce the issue.

>> Should we translate the text when setting it from Javascript? But  
>> that makes HTMLTextAreaElementImpl acquire behaviour that was  
>> hidden down in KWQTextArea, behaviour that I don't if it should  
>> belong in HTMLTextAreaElementImpl.
>
> I think that would be an acceptable solution, and probably the  
> easiest thing to get right.
>
> The heart of the matter here is that NSTextView can handle all  
> three types of line endings, and makes no attempt to unify them as  
> text is inserted. Yet we want to have the line ending always be a  
> single standard one.

This would probably be the easiest thing to get right, but then we'd  
have to think about the other ways of setting text, such as pasting  
text in with multiple line endings. Sure, we'd still return the  
"correct" value when accessed, but the internal storage would still  
contain \r\n sequences and the accessors for the cursor position and  
selected text would have to be aware of that. It's just something to  
think about.

> I think one of the reasons it's cached might be that the value  
> needs to survive the process of destroying and re-creating the  
> renderer.

Ah, makes sense

> RenderTextArea::updateFromElement pushes the value from the DOM  
> into the QTextEdit (which in turn uses KWQTextArea). In the case of  
> a setValue call, HTMLTextAreaElementImpl::setValue calls setChanged 
> (true), which results in an updateFromElement call later.

It's the "results in an updateFromElement call later" that's the  
problem. If we're not pushing it down to the QTextEdit at the time  
it's set, we can't invalidate the cached value there, and  
invalidating it in updateFromElement doesn't make sense, plus it  
would leave open a window in which the "incorrect" value (i.e. with \r 
\n sequences) could still be retrieved.

I guess it comes down to the following options:

1) We translate the text whenever it gets set from anywhere so that  
all line endings are \n. This has the benefit of making the cursor  
position and selection accessors much easier to write, since the  
internal text storage is the same as what's exposed to the outside.  
However, this has the problem of requiring translation on all the  
different ways text can get into the NSTextView

2) We translate text set up in HTMLTextAreaElementImpl whenever it's  
set from there (or we force a updateFromElement and then invalidate  
the cache so that the next access will get it from KWQTextArea). This  
has the benefit of being pretty easy to do, with the negative of  
requiring the cursor position and selection accessors to be aware of  
\r\n sequences and treat them as a single char

3) We stop translating the text. This is probably not desired,  
because at least Firefox always translates \r\n sequences to \n (I  
don't have any way to test WinIE) and compatibility with other  
browsers is a good thing. Given that, I'm not actually aware of any  
spec that says line endings should be coerced to \n.

I personally vote for option #2.

-- 
Kevin Ballard
kevin@sb.org
http://www.tildesoft.com
http://kevin.sb.org

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2378 bytes
Desc: not available
Url : http://lists.macosforge.org/pipermail/webkit-dev/attachments/20050620/0071bea1/smime.bin
From darin at apple.com  Mon Jun 20 13:07:53 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Newline translation issue with textareas
In-Reply-To: <C9997672-E4D0-4C49-A711-4F35EEA279D6@sb.org>
References: <6D84EC5E-F3ED-4A82-889F-FC8D9696D7FB@sb.org>
	<32D534E6-DAF1-4CCF-914C-6BBB83E8AB8E@apple.com>
	<C9997672-E4D0-4C49-A711-4F35EEA279D6@sb.org>
Message-ID: <37611ACA-2160-4C22-9CF4-A70E7AB0B9D6@apple.com>

On Jun 20, 2005, at 1:00 PM, Kevin Ballard wrote:

> 1) We translate the text whenever it gets set from anywhere so that  
> all line endings are \n. This has the benefit of making the cursor  
> position and selection accessors much easier to write, since the  
> internal text storage is the same as what's exposed to the outside.  
> However, this has the problem of requiring translation on all the  
> different ways text can get into the NSTextView
>
> 2) We translate text set up in HTMLTextAreaElementImpl whenever  
> it's set from there (or we force a updateFromElement and then  
> invalidate the cache so that the next access will get it from  
> KWQTextArea). This has the benefit of being pretty easy to do, with  
> the negative of requiring the cursor position and selection  
> accessors to be aware of \r\n sequences and treat them as a single  
> char
>
> 3) We stop translating the text. This is probably not desired,  
> because at least Firefox always translates \r\n sequences to \n (I  
> don't have any way to test WinIE) and compatibility with other  
> browsers is a good thing. Given that, I'm not actually aware of any  
> spec that says line endings should be coerced to \n.

I like (1) best long term. But I think it's fine to do (2) first.  
It's likely we'll be reimplementing <textarea> to use HTML editing  
rather than QTextEdit some time soon anyway, so we can take care of  
(1) at that point.

     -- Darin


From kevin at sb.org  Mon Jun 20 13:25:42 2005
From: kevin at sb.org (Kevin Ballard)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Newline translation issue with textareas
In-Reply-To: <37611ACA-2160-4C22-9CF4-A70E7AB0B9D6@apple.com>
References: <6D84EC5E-F3ED-4A82-889F-FC8D9696D7FB@sb.org>
	<32D534E6-DAF1-4CCF-914C-6BBB83E8AB8E@apple.com>
	<C9997672-E4D0-4C49-A711-4F35EEA279D6@sb.org>
	<37611ACA-2160-4C22-9CF4-A70E7AB0B9D6@apple.com>
Message-ID: <B7C42E3D-AA4F-4666-B094-D264F71AD7ED@sb.org>

On Jun 20, 2005, at 4:07 PM, Darin Adler wrote:

>> 2) We translate text set up in HTMLTextAreaElementImpl whenever  
>> it's set from there (or we force a updateFromElement and then  
>> invalidate the cache so that the next access will get it from  
>> KWQTextArea). This has the benefit of being pretty easy to do,  
>> with the negative of requiring the cursor position and selection  
>> accessors to be aware of \r\n sequences and treat them as a single  
>> char
>
> I like (1) best long term. But I think it's fine to do (2) first.  
> It's likely we'll be reimplementing <textarea> to use HTML editing  
> rather than QTextEdit some time soon anyway, so we can take care of  
> (1) at that point.

Ok, sounds good.

In terms of actually doing #2, I would suggest that forcing an  
updateFromElement and then invalidating the cache is the best way to  
do it, so we don't have the translation happening in 2 different  
places. However, I'm not sure about actually implementing this, since  
I'm not really familiar with how it gets called in the first place.  
When I looked at it, setting text in HTMLTextAreaElementImpl calls  
setChanged(true), which basically just walks up the tree and tells  
each element that one of its children has changed, yes? And then how  
does that translate into an updateFromElement call later? Or, more  
importantly, would there be any problem with simply calling  
updateFromElement directly after the setChanged call, and then  
setting m_valueIsValid to false so the next access will get the  
translated value from KWQTextArea?

-- 
Kevin Ballard
kevin@sb.org
http://www.tildesoft.com
http://kevin.sb.org

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2378 bytes
Desc: not available
Url : http://lists.macosforge.org/pipermail/webkit-dev/attachments/20050620/ebbb7723/smime.bin
From darin at apple.com  Mon Jun 20 13:55:33 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Newline translation issue with textareas
In-Reply-To: <B7C42E3D-AA4F-4666-B094-D264F71AD7ED@sb.org>
References: <6D84EC5E-F3ED-4A82-889F-FC8D9696D7FB@sb.org>
	<32D534E6-DAF1-4CCF-914C-6BBB83E8AB8E@apple.com>
	<C9997672-E4D0-4C49-A711-4F35EEA279D6@sb.org>
	<37611ACA-2160-4C22-9CF4-A70E7AB0B9D6@apple.com>
	<B7C42E3D-AA4F-4666-B094-D264F71AD7ED@sb.org>
Message-ID: <D3A812F5-29D3-4B3B-B55E-BDE1309896B5@apple.com>

On Jun 20, 2005, at 1:25 PM, Kevin Ballard wrote:

> In terms of actually doing #2, I would suggest that forcing an  
> updateFromElement and then invalidating the cache is the best way  
> to do it, so we don't have the translation happening in 2 different  
> places.

Nah, I think it's OK to have the translation in two different places  
for now. If this was a QString, we'd be talking two lines of code here:

     xxx.replace("\r\n", '\n');
     xxx.replace('\r', '\n');

Lets not bend over too far backwards for this.

     -- Darin


From kevin at sb.org  Mon Jun 20 14:03:50 2005
From: kevin at sb.org (Kevin Ballard)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Newline translation issue with textareas
In-Reply-To: <D3A812F5-29D3-4B3B-B55E-BDE1309896B5@apple.com>
References: <6D84EC5E-F3ED-4A82-889F-FC8D9696D7FB@sb.org>
	<32D534E6-DAF1-4CCF-914C-6BBB83E8AB8E@apple.com>
	<C9997672-E4D0-4C49-A711-4F35EEA279D6@sb.org>
	<37611ACA-2160-4C22-9CF4-A70E7AB0B9D6@apple.com>
	<B7C42E3D-AA4F-4666-B094-D264F71AD7ED@sb.org>
	<D3A812F5-29D3-4B3B-B55E-BDE1309896B5@apple.com>
Message-ID: <A4E5B8A9-EEAD-48DB-927A-C79718119CC3@sb.org>

Alright, I'll do the translation in  
HTMLTextAreaElementImpl::setValue. And yes, it is a QString, although  
the QString is taken from a const DOMString, and those replace calls  
look like they replace-in-place. I'm not familiar with QString (or  
DOMString) yet, so is there any issue with calling these 2 lines on  
the QString returned by value.string() (where value is a const  
DOMString &)? Is that returning a value in the DOMString, or does the  
DOMString::string call copy its contents into a new QString?

I could probably figure this out by looking at the code, but I just  
thought it might be faster to ask.

On Jun 20, 2005, at 4:55 PM, Darin Adler wrote:

> Nah, I think it's OK to have the translation in two different  
> places for now. If this was a QString, we'd be talking two lines of  
> code here:
>
>     xxx.replace("\r\n", '\n');
>     xxx.replace('\r', '\n');
>
> Lets not bend over too far backwards for this.

-- 
Kevin Ballard
kevin@sb.org
http://www.tildesoft.com
http://kevin.sb.org

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2378 bytes
Desc: not available
Url : http://lists.macosforge.org/pipermail/webkit-dev/attachments/20050620/e7522bf6/smime.bin
From kent.sandvik at gmail.com  Mon Jun 20 14:06:03 2005
From: kent.sandvik at gmail.com (Kent Sandvik)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Widget / Drawing API thoughts
In-Reply-To: <3ECA98AE-3223-43B9-AE75-BFB606B0BB99@apple.com>
References: <42AA1109.6030602@xiondigital.net>
	<6D90642E-EFC0-4D32-BF5C-07D39A568F69@theolliviers.com>
	<3ECA98AE-3223-43B9-AE75-BFB606B0BB99@apple.com>
Message-ID: <d5c05437050620140638f84f89@mail.gmail.com>

On 6/19/05, Maciej Stachowiak <mjs@apple.com> wrote:

> > The problem with inheriting from platform-independent base classes is
> that you would have to use multiple inheritance to get the
> inheritance hierarchy right. For instance, QCheckBox would have to
> inherit from QButton *and* from QCheckBoxBase, which QButton would
> have to inherit from QButtonBase. I think this would be needlessly
> complex, and I guess whole separate implementations of the widgets
> are likely to be fine.

Yes, it would be cleaner if each platform had their own
platform-specific implementation in a separate source directory, if
there's anything common that never needs a platform-specific file, it
could be placed in a src/common dir or something similar. Note that
you could have C++ member functions for a class that could be
implemented in the system-specific dir, *as well as* common member
function implementations that don't need any platform code.

One step in the current build tree would be to separate the KWQ header
files into a separate directory, and move the existing implementation
files into a macosx dir, as I assume most of the code is
macosx-centric, anyway. Then there could be a migration moving some of
the code into a src/common or something similar.

I could help out with that in case this part of the project starts,
but usually it's best if one person does the big surgical operation
and checks it all in.

--Kent

From darin at apple.com  Mon Jun 20 14:10:01 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Newline translation issue with textareas
In-Reply-To: <A4E5B8A9-EEAD-48DB-927A-C79718119CC3@sb.org>
References: <6D84EC5E-F3ED-4A82-889F-FC8D9696D7FB@sb.org>
	<32D534E6-DAF1-4CCF-914C-6BBB83E8AB8E@apple.com>
	<C9997672-E4D0-4C49-A711-4F35EEA279D6@sb.org>
	<37611ACA-2160-4C22-9CF4-A70E7AB0B9D6@apple.com>
	<B7C42E3D-AA4F-4666-B094-D264F71AD7ED@sb.org>
	<D3A812F5-29D3-4B3B-B55E-BDE1309896B5@apple.com>
	<A4E5B8A9-EEAD-48DB-927A-C79718119CC3@sb.org>
Message-ID: <95730C20-BDA7-46FC-92BD-CBF0A79BF039@apple.com>

On Jun 20, 2005, at 2:03 PM, Kevin Ballard wrote:

> Alright, I'll do the translation in  
> HTMLTextAreaElementImpl::setValue. And yes, it is a QString,  
> although the QString is taken from a const DOMString, and those  
> replace calls look like they replace-in-place. I'm not familiar  
> with QString (or DOMString) yet, so is there any issue with calling  
> these 2 lines on the QString returned by value.string() (where  
> value is a const DOMString &)? Is that returning a value in the  
> DOMString, or does the DOMString::string call copy its contents  
> into a new QString?

No issue. Modifying the QString is fine. It's a copy.

     -- Darin


From mjs at apple.com  Mon Jun 20 15:35:32 2005
From: mjs at apple.com (Maciej Stachowiak)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Widget / Drawing API thoughts
In-Reply-To: <d5c05437050620140638f84f89@mail.gmail.com>
References: <42AA1109.6030602@xiondigital.net>
	<6D90642E-EFC0-4D32-BF5C-07D39A568F69@theolliviers.com>
	<3ECA98AE-3223-43B9-AE75-BFB606B0BB99@apple.com>
	<d5c05437050620140638f84f89@mail.gmail.com>
Message-ID: <BC78A485-BF12-43B5-8EB9-6D911FC10CEA@apple.com>


On Jun 20, 2005, at 2:06 PM, Kent Sandvik wrote:

> On 6/19/05, Maciej Stachowiak <mjs@apple.com> wrote:
>
>
>>> The problem with inheriting from platform-independent base  
>>> classes is
>>>
>> that you would have to use multiple inheritance to get the
>> inheritance hierarchy right. For instance, QCheckBox would have to
>> inherit from QButton *and* from QCheckBoxBase, which QButton would
>> have to inherit from QButtonBase. I think this would be needlessly
>> complex, and I guess whole separate implementations of the widgets
>> are likely to be fine.
>>
>
> Yes, it would be cleaner if each platform had their own
> platform-specific implementation in a separate source directory, if
> there's anything common that never needs a platform-specific file, it
> could be placed in a src/common dir or something similar. Note that
> you could have C++ member functions for a class that could be
> implemented in the system-specific dir, *as well as* common member
> function implementations that don't need any platform code.
>
> One step in the current build tree would be to separate the KWQ header
> files into a separate directory, and move the existing implementation
> files into a macosx dir, as I assume most of the code is
> macosx-centric, anyway. Then there could be a migration moving some of
> the code into a src/common or something similar.
>
> I could help out with that in case this part of the project starts,
> but usually it's best if one person does the big surgical operation
> and checks it all in.

I was thinking of maybe a tree structure like this

WebCore
     khtml
     bridge (stuff from kwq that's for bridging to a higher level API  
library, not about replacing Qt/KDE)
     kwq (strictly Qt/KDE replacements)
         headers
         common
         macosx

Then gtk could be added as a peer directory to macosx (and hopefully  
in the future xwwindows, symbian, win32, and so forth).

One complicating factor here is the fact that we are planning to redo  
the way form controls are done soon. We want to make the layout  
engine draw them directly instead of using platform-native widgets,  
so instead of the various Qt widget classes we'd mostly just end up  
with a theme API for drawing the native look.

Perhaps temporarily we could set up the tree to work with either  
model, so ports can convert to the theme API approach on their own  
schedule.

Any thoughts from Nokia folks on how this would affect the Gtk+ or  
symbian ports?

Regards,
Maciej




From kent.sandvik at gmail.com  Mon Jun 20 15:49:06 2005
From: kent.sandvik at gmail.com (Kent Sandvik)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Widget / Drawing API thoughts
In-Reply-To: <BC78A485-BF12-43B5-8EB9-6D911FC10CEA@apple.com>
References: <42AA1109.6030602@xiondigital.net>
	<6D90642E-EFC0-4D32-BF5C-07D39A568F69@theolliviers.com>
	<3ECA98AE-3223-43B9-AE75-BFB606B0BB99@apple.com>
	<d5c05437050620140638f84f89@mail.gmail.com>
	<BC78A485-BF12-43B5-8EB9-6D911FC10CEA@apple.com>
Message-ID: <d5c05437050620154944d07d38@mail.gmail.com>

On 6/20/05, Maciej Stachowiak <mjs@apple.com> wrote:
>One complicating factor here is the fact that we are planning to redo
> the way form controls are done soon. We want to make the layout
> engine draw them directly instead of using platform-native widgets,
> so instead of the various Qt widget classes we'd mostly just end up
> with a theme API for drawing the native look.
> 
> Perhaps temporarily we could set up the tree to work with either
> model, so ports can convert to the theme API approach on their own
> schedule.

Personally I would not mind if the switch from native widgets to a
generic draw system happens as early as possible, it's tough to
maintain dual drawing systems in the long term, and as there are no
other ports just now it's easier to get this in place. Unless this of
course breaks the macosx port big time.

Will the layout engine changes happen very soon, or over time (if over
time there's a need for the native widget system...)?

 - -Kent
PS: For me this would be  neat, as I could do all the primitive
drawings in DirectFB and LiTE for the port I'm looking at for embedded
Linux systems.

From kevino at theolliviers.com  Mon Jun 20 20:29:49 2005
From: kevino at theolliviers.com (Kevin Ollivier)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Widget / Drawing API thoughts
In-Reply-To: <BC78A485-BF12-43B5-8EB9-6D911FC10CEA@apple.com>
References: <42AA1109.6030602@xiondigital.net>
	<6D90642E-EFC0-4D32-BF5C-07D39A568F69@theolliviers.com>
	<3ECA98AE-3223-43B9-AE75-BFB606B0BB99@apple.com>
	<d5c05437050620140638f84f89@mail.gmail.com>
	<BC78A485-BF12-43B5-8EB9-6D911FC10CEA@apple.com>
Message-ID: <F84F3A4F-DF99-4933-BC98-FB3628B44801@theolliviers.com>

Hi Maciej,

On Jun 20, 2005, at 3:35 PM, Maciej Stachowiak wrote:

[snip]

> I was thinking of maybe a tree structure like this
>
> WebCore
>     khtml
>     bridge (stuff from kwq that's for bridging to a higher level  
> API library, not about replacing Qt/KDE)
>     kwq (strictly Qt/KDE replacements)
>         headers
>         common
>         macosx
>
> Then gtk could be added as a peer directory to macosx (and  
> hopefully in the future xwwindows, symbian, win32, and so forth).

I think this sounds good. Though one little nitpick I have is that I  
think it's better to name the directories after toolkits rather than  
platforms. (i.e. cocoa rather than macosx) I think it's a bit  
clearer, as multiple ports could run on OS X. (Of course, like  
wxWidgets. ;-)

> One complicating factor here is the fact that we are planning to  
> redo the way form controls are done soon. We want to make the  
> layout engine draw them directly instead of using platform-native  
> widgets, so instead of the various Qt widget classes we'd mostly  
> just end up with a theme API for drawing the native look.
>
> Perhaps temporarily we could set up the tree to work with either  
> model, so ports can convert to the theme API approach on their own  
> schedule.

I would prefer it if we could still have an option to use native  
controls instead, not even just as a temporary measure. I realize  
drawing the widgets has its benefits, but as a user I actually prefer  
native widgets over the generic controls found in, for example,  
Firefox. So I'd like to be able to continue to use them for the  
wxWidgets port.

Kevin

> Any thoughts from Nokia folks on how this would affect the Gtk+ or  
> symbian ports?
>
> Regards,
> Maciej
>
>
>
> _______________________________________________
> webkit-dev mailing list
> webkit-dev@opendarwin.org
> http://www.opendarwin.org/mailman/listinfo/webkit-dev
>


From robert.fischer at berlin.de  Mon Jun 20 23:43:48 2005
From: robert.fischer at berlin.de (Robert Fischer)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Distribute to 10.3?
In-Reply-To: <09854C07-51E0-4243-A8CE-D6F0A0DBF941@apple.com>
References: <69DFDB43-83BA-4EA4-A62C-70DEDC91957B@berlin.de>
	<09854C07-51E0-4243-A8CE-D6F0A0DBF941@apple.com>
Message-ID: <4E6ABE00-E5DF-44E7-8FC8-97C47C93A075@berlin.de>


On Jun 20, 2005, at 8:16 PM, Darin Adler wrote:

> The DOM features are in the OS X 10.3.9 update. If you can depend  
> on 10.3.9, you can ship a 10.3-compatible version of your application.

Great news to me!

I was mislead by this sentence in the DOM documentation:

> The Document Object Model API is available only in Mac OS X v10.3  
> with Safari 1.3 Developer Beta and later or in Mac OS X v10.4 and  
> later.

("file:///Developer/ADC%20Reference%20Library/documentation/Cocoa/ 
Conceptual/WebKit_DOM/index.html")

As Developer Beta was only available for ADC members that would be  
not acceptable for most of my customers. So, the documentation should  
get a little update on this point.


Thx,

Robert

--
      ---      -  .-.     --         --
          ---    /   \     ----                         tin:b Software
    .-.         /     \  ---  .-.        __o      .-.        (i)
   /   \       /       \     /   \     _`\<,_    /   \  Robert Fischer
  /     \     /         \   /     \   (*)/ (*)  /     `---------------
/       `---'           `-'       `-----------'



From mjs at apple.com  Tue Jun 21 01:36:44 2005
From: mjs at apple.com (Maciej Stachowiak)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Widget / Drawing API thoughts
In-Reply-To: <F84F3A4F-DF99-4933-BC98-FB3628B44801@theolliviers.com>
References: <42AA1109.6030602@xiondigital.net>
	<6D90642E-EFC0-4D32-BF5C-07D39A568F69@theolliviers.com>
	<3ECA98AE-3223-43B9-AE75-BFB606B0BB99@apple.com>
	<d5c05437050620140638f84f89@mail.gmail.com>
	<BC78A485-BF12-43B5-8EB9-6D911FC10CEA@apple.com>
	<F84F3A4F-DF99-4933-BC98-FB3628B44801@theolliviers.com>
Message-ID: <AE6E9D82-6858-4EDA-BF8B-B750D5115AE7@apple.com>


On Jun 20, 2005, at 8:29 PM, Kevin Ollivier wrote:

>
> I think this sounds good. Though one little nitpick I have is that  
> I think it's better to name the directories after toolkits rather  
> than platforms. (i.e. cocoa rather than macosx) I think it's a bit  
> clearer, as multiple ports could run on OS X. (Of course, like  
> wxWidgets. ;-)

That sounds reasonable. "cocoa" it is.

>> One complicating factor here is the fact that we are planning to  
>> redo the way form controls are done soon. We want to make the  
>> layout engine draw them directly instead of using platform-native  
>> widgets, so instead of the various Qt widget classes we'd mostly  
>> just end up with a theme API for drawing the native look.
>>
>> Perhaps temporarily we could set up the tree to work with either  
>> model, so ports can convert to the theme API approach on their own  
>> schedule.
>>
>
> I would prefer it if we could still have an option to use native  
> controls instead, not even just as a temporary measure. I realize  
> drawing the widgets has its benefits, but as a user I actually  
> prefer native widgets over the generic controls found in, for  
> example, Firefox. So I'd like to be able to continue to use them  
> for the wxWidgets port.

For OS X at least, we intend to make the controls look and feel just  
like the native ones to a pretty exacting level of detail. We will  
only fall back to a generic look if the page specifies custom styling  
info, this is desirable for web compatibility in any case. So please  
do not assume the themed controls will look lame and generic. In  
fact, I believe the Firefox controls look and feel very much like the  
native ones on Windows, and even respect Windows theming.

That being said, I can see how it might be a tough technical  
challenge for some toolkits to implement the theme API, especially  
multiplatform toolkits that rely on native widgets under the covers.  
I am not sure what to do about that, as maintaininga dual-track  
approach to form controls is likely to be painful in the long run.

Regards,
Maciej


From kevin at sb.org  Tue Jun 21 08:27:40 2005
From: kevin at sb.org (Kevin Ballard)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Distribute to 10.3?
In-Reply-To: <4E6ABE00-E5DF-44E7-8FC8-97C47C93A075@berlin.de>
References: <69DFDB43-83BA-4EA4-A62C-70DEDC91957B@berlin.de>
	<09854C07-51E0-4243-A8CE-D6F0A0DBF941@apple.com>
	<4E6ABE00-E5DF-44E7-8FC8-97C47C93A075@berlin.de>
Message-ID: <8E7ECB7F-C31F-43AC-A939-5CB8E95DDFED@sb.org>

On Jun 21, 2005, at 2:43 AM, Robert Fischer wrote:

>> The Document Object Model API is available only in Mac OS X v10.3  
>> with Safari 1.3 Developer Beta and later or in Mac OS X v10.4 and  
>> later.
>>
>
> ("file:///Developer/ADC%20Reference%20Library/documentation/Cocoa/ 
> Conceptual/WebKit_DOM/index.html")
>
> As Developer Beta was only available for ADC members that would be  
> not acceptable for most of my customers. So, the documentation  
> should get a little update on this point.

Well, it is correct to a point, in that the DOM API headers were not  
present on 10.3.9, so you couldn't build a product that used the DOM  
API on 10.3.9, you could only build on 10.4 and deploy on 10.3.9.

However, I'm choosing to believe that this was an error in the build  
process and that the DOM headers were supposed to be included in 10.3.9.

-- 
Kevin Ballard
kevin@sb.org
http://www.tildesoft.com
http://kevin.sb.org

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2378 bytes
Desc: not available
Url : http://lists.macosforge.org/pipermail/webkit-dev/attachments/20050621/74bca106/smime.bin
From David.Carson at nokia.com  Tue Jun 21 08:52:29 2005
From: David.Carson at nokia.com (David.Carson@nokia.com)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Widget / Drawing API thoughts
Message-ID: <7B3156C720588B4CAEA4BF8013CD525F4535F4@bsebe101.NOE.Nokia.com>

Hi Maciej,

> On Jun 20, 2005, at 3:35 PM, Maciej Stachowiak wrote:
> 
> [snip]
> 
> > I was thinking of maybe a tree structure like this
> >
> > WebCore
> >     khtml
> >     bridge (stuff from kwq that's for bridging to a higher level  
> > API library, not about replacing Qt/KDE)
> >     kwq (strictly Qt/KDE replacements)
> >         headers
> >         common
> >         macosx
> >
> > Then gtk could be added as a peer directory to macosx (and  
> > hopefully in the future xwwindows, symbian, win32, and so forth).
[snip]

> I think this sounds good. Though one little nitpick I have is that I  
> think it's better to name the directories after toolkits rather than  
> platforms. (i.e. cocoa rather than macosx) I think it's a bit  
> clearer, as multiple ports could run on OS X. (Of course, like  
> wxWidgets. ;-)
[snip]

For us, we have mostly Symbian dependancies, and very few Series 60 
dependancies. So something like:
     kwq (strictly Qt/KDE replacements)
         headers
         common
         macosx
         symbian
             series60

would be better for us. Presently, the series60 directory would be 
empty. But if the form controls are moved to kwq, and we need some 
series60 UI widgets, we would put the code in there.

> > Any thoughts from Nokia folks on how this would affect the Gtk+ or  
> > symbian ports?

This directory structure looks fine to us at Nokia. We had actaully 
already seperated the bridge code some time ago into a different 
directory. 

Cheers
David Carson

From guido.grassel at nokia.com  Tue Jun 21 09:27:03 2005
From: guido.grassel at nokia.com (guido.grassel@nokia.com)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Greetings from the Series 60 mobile browser team at
	Nokia
References: <6E2B2C4FBED4D84D80F52ECD1579D06847C871@bsebe101.NOE.Nokia.com>
Message-ID: <83CD3A5F85DE7D43B6A5CC37CCBAEECE0C4081@esebe104.NOE.Nokia.com>

 
I agree, adding SVG support is of interest. 
 
SVG is of interest to mobile devices. SVG can be of help to improve the device independence of Web content and give a richer experience to users who are browsing these pages.
 
You might have noticed already that Nokia Series 60 is taking some first steps for SVG support http://svg.org/story/2004/10/21/113212/25.
 
Nokia Research Center also participates in the SVG and the CDF working groups of the W3C.
 
                   -----
 
I have two questions about the SVG project: on webkit.opendarwin.org:
 
- How do people see the level of SVG support in KSVG2 ? 
     In the mobile context SVG-Tiny 1.1 is the relevant SVG profile.
 
- How feasible do people see switching the DOM inside WebCore? 
 
- How to ensure that adding support for new markups, such as SVG, MathML, etc., will not  
bloat WebCore's architecture?
 
Cheers
- Guido

-----Original Message----- 
From: ext Robin Berjon [mailto:robin.berjon@expway.fr] 
Sent: Tuesday, June 14, 2005 4:31 AM 
To: Geisler Roland (Nokia-TP-MSW/Boston) 
Cc: webkit-dev@opendarwin.org 
Subject: Re: [webkit-dev] Greetings from the Series 60 mobile browser 
team at Nokia 


Hi Roland, 

roland.geisler@nokia.com wrote: 
> I'm heading marketing and strategy at Nokia for Series 60's new 
> mobile browser that will be built upon WebCore/KHTML and 
> JavaScriptCore/KJS. I am writing you this email to thank you for 
> having built the Konqueror and Safari browser with the two components 
> WebCore/KHTML and JavaScriptCore/KJS. 

This is great news! As a developer for both OSX and S60 platforms, I 
look forward to the result. I am curious on one point (at least) 
however: the new WebKit website mentions SVG as one of the projects to 
integrate based on KSVG2, and compound documents are a really hot topic 
for us content and service developers these days. So if the KSVG2 merge 
into KHTML happens, would you be interested in including that on S60 
platforms as well? I would assume you might wish to subset it in which 
case I wonder what your plans may be in that regard or anything you 
might be looking for. I'd certainly love to see that happen, and would 
help if possible. 

Thanks for any information, 

-- 
Robin Berjon 
   Senior Research Scientist 
   Expway, http://expway.com/ 



From robin.berjon at expway.fr  Tue Jun 21 09:45:08 2005
From: robin.berjon at expway.fr (Robin Berjon)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Greetings from the Series 60 mobile browser team
	at Nokia
In-Reply-To: <83CD3A5F85DE7D43B6A5CC37CCBAEECE0C4081@esebe104.NOE.Nokia.com>
References: <6E2B2C4FBED4D84D80F52ECD1579D06847C871@bsebe101.NOE.Nokia.com>
	<83CD3A5F85DE7D43B6A5CC37CCBAEECE0C4081@esebe104.NOE.Nokia.com>
Message-ID: <42B84414.6040405@expway.fr>

guido.grassel@nokia.com wrote:
> SVG is of interest to mobile devices. SVG can be of help to improve
> the device independence of Web content and give a richer experience to
> users who are browsing these pages.

Indeed. We have developed some applications on top of an SVG Tiny viewer 
here and the results have been very positive. We would certainly be 
thrilled to be able to do the same on the WebKit platform.

> Nokia Research Center also participates in the SVG and the CDF
> working  groups of the W3C.

There seems to be a bunch of SVG and/or CDF WG members on this list.

> I have two questions about the SVG project: on webkit.opendarwin.org:
>  
> - How do people see the level of SVG support in KSVG2 ? 
>      In the mobile context SVG-Tiny 1.1 is the relevant SVG profile.

I beg to differ, for development starting now the relevant profile is 
SVG Tiny 1.2. It is also probably the best profile to use when targeting 
a CDF-style integration with XHTML as it has better-defined 
cross-namespace interactions.

> - How feasible do people see switching the DOM inside WebCore? 

And has anyone written up ideas about how it ought to best be done? I 
know the KSVG people have been thinking about this for quite a while.

-- 
Robin Berjon
   Senior Research Scientist
   Expway, http://expway.com/



From darin at apple.com  Tue Jun 21 10:18:42 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Distribute to 10.3?
In-Reply-To: <8E7ECB7F-C31F-43AC-A939-5CB8E95DDFED@sb.org>
References: <69DFDB43-83BA-4EA4-A62C-70DEDC91957B@berlin.de>
	<09854C07-51E0-4243-A8CE-D6F0A0DBF941@apple.com>
	<4E6ABE00-E5DF-44E7-8FC8-97C47C93A075@berlin.de>
	<8E7ECB7F-C31F-43AC-A939-5CB8E95DDFED@sb.org>
Message-ID: <9AF41893-FE38-481D-86BB-A7748BC1EDD1@apple.com>

On Jun 21, 2005, at 8:27 AM, Kevin Ballard wrote:

> On Jun 21, 2005, at 2:43 AM, Robert Fischer wrote:
>
>> ("file:///Developer/ADC%20Reference%20Library/documentation/Cocoa/ 
>> Conceptual/WebKit_DOM/index.html")
>>
>> As Developer Beta was only available for ADC members that would be  
>> not acceptable for most of my customers. So, the documentation  
>> should get a little update on this point.

I think the documentation people are already aware of this, and are  
going to update it. If you'd like to report the bug to them, though,  
just in case, you can do that at <http://bugreport.apple.com>.

> Well, it is correct to a point, in that the DOM API headers were  
> not present on 10.3.9, so you couldn't build a product that used  
> the DOM API on 10.3.9, you could only build on 10.4 and deploy on  
> 10.3.9.
>
> However, I'm choosing to believe that this was an error in the  
> build process and that the DOM headers were supposed to be included  
> in 10.3.9.

Headers are never included with software updates, so it wasn't an error.

However, there is something called the Mac OS X 10.3.9 SDK that you  
can get that makes this work. I don't know all the details.

     -- Darin


From darin at apple.com  Tue Jun 21 10:20:32 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Re: SVG integration with WebKit DOM
In-Reply-To: <42B84414.6040405@expway.fr>
References: <6E2B2C4FBED4D84D80F52ECD1579D06847C871@bsebe101.NOE.Nokia.com>
	<83CD3A5F85DE7D43B6A5CC37CCBAEECE0C4081@esebe104.NOE.Nokia.com>
	<42B84414.6040405@expway.fr>
Message-ID: <3AC7615D-AEFA-4A77-A277-04F35F0B6EB4@apple.com>

On Jun 21, 2005, at 9:45 AM, Robin Berjon wrote:

> And has anyone written up ideas about how it ought to best be done?  
> I know the KSVG people have been thinking about this for quite a  
> while.

We think it's feasible, and a few thoughts are up on this web page  
<http://webkit.opendarwin.org/projects/svg/index.html>.

     -- Darin


From finlay.dobbie at gmail.com  Tue Jun 21 10:22:08 2005
From: finlay.dobbie at gmail.com (Finlay Dobbie)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Distribute to 10.3?
In-Reply-To: <9AF41893-FE38-481D-86BB-A7748BC1EDD1@apple.com>
References: <69DFDB43-83BA-4EA4-A62C-70DEDC91957B@berlin.de>
	<09854C07-51E0-4243-A8CE-D6F0A0DBF941@apple.com>
	<4E6ABE00-E5DF-44E7-8FC8-97C47C93A075@berlin.de>
	<8E7ECB7F-C31F-43AC-A939-5CB8E95DDFED@sb.org>
	<9AF41893-FE38-481D-86BB-A7748BC1EDD1@apple.com>
Message-ID: <ab20c92d05062110223aa8d720@mail.gmail.com>

On 6/21/05, Darin Adler <darin@apple.com> wrote:
> However, there is something called the Mac OS X 10.3.9 SDK that you
> can get that makes this work. I don't know all the details.

Are you sure? AFAIK the 10.3.9 SDK is only part of Xcode 2.x's
Cross-Development foobage, which of course doesn't work on Panther.

 -- Finlay

From darin at apple.com  Tue Jun 21 10:25:09 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] layout test failures
Message-ID: <66126F85-4280-452B-8FC0-431A20B0B209@apple.com>

I'm seeing new failures on these layout tests (even after a clean  
build):

     fast/forms/element-by-name
     fast/js/exception-linenums
     fast/loader/loadInProgress

These were working 24 hours ago. Others confirm they are seeing these  
failures, although not everyone sees all three.

Lets not commit any other code changes to the tree until we resolve  
these regressions. Here's hoping it's just something wrong on my  
computer.

     -- Darin


From kevin at sb.org  Tue Jun 21 10:26:49 2005
From: kevin at sb.org (Kevin Ballard)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Distribute to 10.3?
In-Reply-To: <9AF41893-FE38-481D-86BB-A7748BC1EDD1@apple.com>
References: <69DFDB43-83BA-4EA4-A62C-70DEDC91957B@berlin.de>
	<09854C07-51E0-4243-A8CE-D6F0A0DBF941@apple.com>
	<4E6ABE00-E5DF-44E7-8FC8-97C47C93A075@berlin.de>
	<8E7ECB7F-C31F-43AC-A939-5CB8E95DDFED@sb.org>
	<9AF41893-FE38-481D-86BB-A7748BC1EDD1@apple.com>
Message-ID: <E02CF176-1FAA-467E-BFCB-27CE19BAADFE@sb.org>

Umm, I thought that's where the headers were missing. I forget,  
though. All I really know is that when we added the DOM stuff to  
Colloquy, we couldn't build on 10.3.9 even though we could deploy on  
10.3.9.

On Jun 21, 2005, at 1:18 PM, Darin Adler wrote:

> However, there is something called the Mac OS X 10.3.9 SDK that you  
> can get that makes this work. I don't know all the details.

-- 
Kevin Ballard
kevin@sb.org
http://www.tildesoft.com
http://kevin.sb.org

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2378 bytes
Desc: not available
Url : http://lists.macosforge.org/pipermail/webkit-dev/attachments/20050621/4df5982f/smime.bin
From darin at apple.com  Tue Jun 21 10:34:19 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Distribute to 10.3?
In-Reply-To: <ab20c92d05062110223aa8d720@mail.gmail.com>
References: <69DFDB43-83BA-4EA4-A62C-70DEDC91957B@berlin.de>
	<09854C07-51E0-4243-A8CE-D6F0A0DBF941@apple.com>
	<4E6ABE00-E5DF-44E7-8FC8-97C47C93A075@berlin.de>
	<8E7ECB7F-C31F-43AC-A939-5CB8E95DDFED@sb.org>
	<9AF41893-FE38-481D-86BB-A7748BC1EDD1@apple.com>
	<ab20c92d05062110223aa8d720@mail.gmail.com>
Message-ID: <24C48659-A6ED-47BE-9F6D-32DE8A8A6F05@apple.com>

On Jun 21, 2005, at 10:22 AM, Finlay Dobbie wrote:

> On 6/21/05, Darin Adler <darin@apple.com> wrote:
>
>> However, there is something called the Mac OS X 10.3.9 SDK that  
>> you can get that makes this work. I don't know all the details.
>
> Are you sure? AFAIK the 10.3.9 SDK is only part of Xcode 2.x's  
> Cross-Development foobage, which of course doesn't work on Panther.

I'm not sure why the 10.3.9 SDK hasn't been released in a form usable  
on 10.3 yet; I looked and indeed I can't find it. I do remember that  
this was planned at one point, and it was the definitive way for  
people developing on Panther to get the tools they need for the new  
WebKit API. But I haven't kept up with things and there may have been  
a change to the release strategy.

I'll let you know if I find out anything.

     -- Darin


From darin at apple.com  Tue Jun 21 10:45:13 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Distribute to 10.3?
In-Reply-To: <24C48659-A6ED-47BE-9F6D-32DE8A8A6F05@apple.com>
References: <69DFDB43-83BA-4EA4-A62C-70DEDC91957B@berlin.de>
	<09854C07-51E0-4243-A8CE-D6F0A0DBF941@apple.com>
	<4E6ABE00-E5DF-44E7-8FC8-97C47C93A075@berlin.de>
	<8E7ECB7F-C31F-43AC-A939-5CB8E95DDFED@sb.org>
	<9AF41893-FE38-481D-86BB-A7748BC1EDD1@apple.com>
	<ab20c92d05062110223aa8d720@mail.gmail.com>
	<24C48659-A6ED-47BE-9F6D-32DE8A8A6F05@apple.com>
Message-ID: <0B57E234-3067-447C-B9AB-F4A1F1DDE285@apple.com>

On Jun 21, 2005, at 10:34 AM, Darin Adler wrote:

> I'm not sure why the 10.3.9 SDK hasn't been released in a form  
> usable on 10.3 yet; I looked and indeed I can't find it. I do  
> remember that this was planned at one point, and it was the  
> definitive way for people developing on Panther to get the tools  
> they need for the new WebKit API. But I haven't kept up with things  
> and there may have been a change to the release strategy.
>
> I'll let you know if I find out anything.

I got the word on this from an Xcode expert at Apple. He said:

>> Just install the package itself from the Tiger disk onto your  
>> Panther box.

What that means I guess is that you find the relevant ".pkg" file,  
and use the Installer to install it on Panther.

     -- Darin


From clvrmnky at gmail.com  Tue Jun 21 11:32:14 2005
From: clvrmnky at gmail.com (Clever Monkey)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] layout test failures
In-Reply-To: <66126F85-4280-452B-8FC0-431A20B0B209@apple.com>
References: <66126F85-4280-452B-8FC0-431A20B0B209@apple.com>
Message-ID: <9C72B878-F506-4F7E-A2CF-1AA0AA5D7C0D@gmail.com>


On 21-Jun-05, at 1:25 PM, Darin Adler wrote:

> I'm seeing new failures on these layout tests (even after a clean  
> build):
>
>     fast/forms/element-by-name
>     fast/js/exception-linenums
>     fast/loader/loadInProgress
>
> These were working 24 hours ago. Others confirm they are seeing  
> these failures, although not everyone sees all three.

FYI, I'm getting failures on:

fast/forms/element-by-name
fast/loader/loadInProgress

after a clean build.  Developer or Deployment builds.

From mjs at apple.com  Tue Jun 21 11:58:22 2005
From: mjs at apple.com (Maciej Stachowiak)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] layout test failures
In-Reply-To: <66126F85-4280-452B-8FC0-431A20B0B209@apple.com>
References: <66126F85-4280-452B-8FC0-431A20B0B209@apple.com>
Message-ID: <9E52D49D-50B6-4555-9210-DA1DBA213D0F@apple.com>


On Jun 21, 2005, at 10:25 AM, Darin Adler wrote:

> I'm seeing new failures on these layout tests (even after a clean  
> build):
>
>     fast/forms/element-by-name
>     fast/js/exception-linenums
>     fast/loader/loadInProgress
>
> These were working 24 hours ago. Others confirm they are seeing  
> these failures, although not everyone sees all three.
>
> Lets not commit any other code changes to the tree until we resolve  
> these regressions. Here's hoping it's just something wrong on my  
> computer.

I have been seeing two of these starting late Sunday, so I think they  
have been broken more than 24 hours. Even a clean build did not fix  
them.

(elements-by-name and loadInProgress are the ones).

I'll work on investigating this further.

Regards,
Maciej



From kevin at sb.org  Tue Jun 21 12:00:12 2005
From: kevin at sb.org (Kevin Ballard)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Newline translation issue with textareas
In-Reply-To: <D3A812F5-29D3-4B3B-B55E-BDE1309896B5@apple.com>
References: <6D84EC5E-F3ED-4A82-889F-FC8D9696D7FB@sb.org>
	<32D534E6-DAF1-4CCF-914C-6BBB83E8AB8E@apple.com>
	<C9997672-E4D0-4C49-A711-4F35EEA279D6@sb.org>
	<37611ACA-2160-4C22-9CF4-A70E7AB0B9D6@apple.com>
	<B7C42E3D-AA4F-4666-B094-D264F71AD7ED@sb.org>
	<D3A812F5-29D3-4B3B-B55E-BDE1309896B5@apple.com>
Message-ID: <A076D871-820E-4AD0-B7E1-2EAA7EC61A5A@sb.org>

Well, I just ran into another problem with doing it this way.

If I have an empty textarea, and I run the following code:

   var elt = document.getElementById("foo"); // foo is the textarea
   elt.value = "This is a test";
   elt.setSelectionRange(3,5);
   alert(elt.selectionStart);

I end up getting 0 back, because the value hasn't been pushed down to  
the KWQTextArea yet, but that's where the selection is, which means  
I'm setting the selection while KWQTextArea still has an empty value.

So there's 2 solutions to this:

1) Cache the selection up in the HTMLTextAreaElementImpl as well
2) Push the text value down to KWQTextArea on  
HTMLTextAreaElementImpl::setValue().

I don't think option #1 is really necessary, it would just cause more  
syncing issues, so I'd suggest going with #2. Is there any problem  
with calling updateFromElement() after setting the text value?

I also suspect that HTMLInputElementImpl will have the same problem,  
but I haven't actually tested yet.

On Jun 20, 2005, at 4:55 PM, Darin Adler wrote:

> On Jun 20, 2005, at 1:25 PM, Kevin Ballard wrote:
>
>
>> In terms of actually doing #2, I would suggest that forcing an  
>> updateFromElement and then invalidating the cache is the best way  
>> to do it, so we don't have the translation happening in 2  
>> different places.
>>
>
> Nah, I think it's OK to have the translation in two different  
> places for now. If this was a QString, we'd be talking two lines of  
> code here:
>
>     xxx.replace("\r\n", '\n');
>     xxx.replace('\r', '\n');
>
> Lets not bend over too far backwards for this.

-- 
Kevin Ballard
kevin@sb.org
http://www.tildesoft.com
http://kevin.sb.org

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2378 bytes
Desc: not available
Url : http://lists.macosforge.org/pipermail/webkit-dev/attachments/20050621/9e791905/smime.bin
From ddkilzer at kilzer.net  Tue Jun 21 12:09:21 2005
From: ddkilzer at kilzer.net (David D. Kilzer)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Using cvsps-2.1 with WebKit
Message-ID: <20050621190921.GA25501@kilzer.net>

If anyone is interested in using cvsps-2.1 to pull patchsets (or
patchset info) from CVS for WebKit (very handy for backing out entire
commits using "patch --reverse"), I created a couple of patches to fix
issues I found when running cvsps against anoncvs.opensource.apple.com.

  http://www.cobite.com/cvsps/

The attached patches do the following:

  cvsps-2.1-alloc-logbuff-dynamically.diff
    - Dynamically allocate a char* buffer for log entries.  Previously,
      at least one of the log entries in WebCore was being truncated
      because it was longer than 32K.

  cvsps-2.1-ignore-TRUNK-branch.diff
    - Ignore the TRUNK pseudo-branch when reading in revisions for a
      file.

If you're using fink, the cvsps.info and cvsps.patch files may be
downloaded from here:

  http://sourceforge.net/tracker/index.php?func=detail&aid=1098684&group_id=17203&atid=414256

The patches have also been posted to the Debian Bug Tracking System and
sent to the author.

Dave
-------------- next part --------------
diff -urN cvsps-2.1.orig/cache.c cvsps-2.1/cache.c
--- cvsps-2.1.orig/cache.c	2005-05-25 22:39:40.000000000 -0500
+++ cvsps-2.1/cache.c	2005-06-19 21:41:25.000000000 -0500
@@ -108,10 +108,19 @@
     int tag_flags = 0;
     char branchbuff[LOG_STR_MAX] = "";
     int branch_add = 0;
-    char logbuff[LOG_STR_MAX] = "";
+    int logbufflen = LOG_STR_MAX + 1;
+    char * logbuff = malloc(logbufflen);
     time_t cache_date = -1;
     int read_version;
 
+    if (logbuff == NULL)
+    {
+	debug(DEBUG_SYSERROR, "could not malloc %d bytes for logbuff in read_cache", logbufflen);
+	exit(1);
+    }
+
+    logbuff[0] = 0;
+
     if (!(fp = cache_open("r")))
 	goto out;
 
@@ -299,8 +308,19 @@
 	    else
 	    {
 		/* Make sure we have enough in the buffer */
-		if (strlen(logbuff)+strlen(buff)<LOG_STR_MAX)
-		    strcat(logbuff, buff);
+		int len = strlen(buff);
+		if (strlen(logbuff) + len >= LOG_STR_MAX)
+		{
+		    logbufflen += (len > LOG_STR_MAX ? len : LOG_STR_MAX);
+		    char * newlogbuff = realloc(logbuff, logbufflen);
+		    if (newlogbuff == NULL)
+		    {
+			debug(DEBUG_SYSERROR, "could not realloc %d bytes for logbuff in read_cache", logbufflen);
+			exit(1);
+		    }
+		    logbuff = newlogbuff;
+		}
+		strcat(logbuff, buff);
 	    }
 	    break;
 	case CACHE_NEED_PS_MEMBERS:
@@ -332,6 +352,7 @@
  out_close:
     fclose(fp);
  out:
+    free(logbuff);
     return cache_date;
 }
 
diff -urN cvsps-2.1.orig/cvsps.c cvsps-2.1/cvsps.c
--- cvsps-2.1.orig/cvsps.c	2005-05-25 22:39:40.000000000 -0500
+++ cvsps-2.1/cvsps.c	2005-06-19 23:07:20.000000000 -0500
@@ -265,7 +265,8 @@
     PatchSetMember * psm = NULL;
     char datebuff[20];
     char authbuff[AUTH_STR_MAX];
-    char logbuff[LOG_STR_MAX + 1];
+    int logbufflen = LOG_STR_MAX + 1;
+    char * logbuff = malloc(logbufflen);
     int loglen = 0;
     int have_log = 0;
     char cmd[BUFSIZ];
@@ -273,6 +274,12 @@
     char use_rep_buff[PATH_MAX];
     char * ltype;
 
+    if (logbuff == NULL)
+    {
+	debug(DEBUG_SYSERROR, "could not malloc %d bytes for logbuff in load_from_cvs", logbufflen);
+	exit(1);
+    }
+
     if (!no_rlog && !test_log_file && cvs_check_cap(CAP_HAVE_RLOG))
     {
 	ltype = "rlog";
@@ -480,24 +487,22 @@
 		 */
 		if (have_log || !is_revision_metadata(buff))
 		{
-		    /* if the log buffer is full, that's it.  
-		     * 
-		     * Also, read lines (fgets) always have \n in them
-		     * which we count on.  So if truncation happens,
-		     * be careful to put a \n on.
-		     * 
-		     * Buffer has LOG_STR_MAX + 1 for room for \0 if
-		     * necessary
-		     */
-		    if (loglen < LOG_STR_MAX)
+		    /* If the log buffer is full, try to reallocate more. */
+		    if (loglen < logbufflen)
 		    {
 			int len = strlen(buff);
 			
-			if (len >= LOG_STR_MAX - loglen)
+			if (len >= logbufflen - loglen)
 			{
-			    debug(DEBUG_APPMSG1, "WARNING: maximum log length exceeded, truncating log");
-			    len = LOG_STR_MAX - loglen;
-			    buff[len - 1] = '\n';
+			    debug(DEBUG_STATUS, "reallocating logbufflen to %d bytes for file %s", logbufflen, file->filename);
+			    logbufflen += (len > LOG_STR_MAX ? len : LOG_STR_MAX);
+			    char * newlogbuff = realloc(logbuff, logbufflen);
+			    if (newlogbuff == NULL)
+			    {
+				debug(DEBUG_SYSERROR, "could not realloc %d bytes for logbuff in load_from_cvs", logbufflen);
+				exit(1);
+			    }
+			    logbuff = newlogbuff;
 			}
 
 			debug(DEBUG_STATUS, "appending %s to log", buff);
-------------- next part --------------
diff -urN cvsps-2.1.orig/cvsps.c cvsps-2.1/cvsps.c
--- cvsps-2.1.orig/cvsps.c	2005-05-25 22:39:40.000000000 -0500
+++ cvsps-2.1/cvsps.c	2005-06-19 23:07:20.000000000 -0500
@@ -2104,6 +2109,11 @@
     
     if (!get_branch_ext(rev, eot, &leaf))
     {
+	if (strcmp(tag, "TRUNK") == 0)
+	{
+	    debug(DEBUG_STATUS, "ignoring the TRUNK branch/tag");
+	    return;
+	}
 	debug(DEBUG_APPERROR, "malformed revision");
 	exit(1);
     }
From opendarwin.org at mitzpettel.com  Tue Jun 21 12:41:45 2005
From: opendarwin.org at mitzpettel.com (Mitz Pettel)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Debugging mid-page relayout issues
Message-ID: <529A4581-69CC-4885-8E07-AB518FAB5742@mitzpettel.com>

I have encountered a bug that occurs on a certain page only sometimes  
and only when it's loaded via HTTP (i.e. not when opened as a  
webarchive). It looks like the bug occurs only when relayouting  
occurs when the HTML is not fully loaded (or perhaps when images are  
loaded after the page HTML has been loaded). I'm afraid I don't know  
much more than that about the exact conditions.

Do you know of any techniques that will allow me to reproduce those  
conditions without relying on that specific page and on the server  
it's coming from?

Thanks,
-- Mitz Pettel

From mjs at apple.com  Tue Jun 21 14:47:18 2005
From: mjs at apple.com (Maciej Stachowiak)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Debugging mid-page relayout issues
In-Reply-To: <529A4581-69CC-4885-8E07-AB518FAB5742@mitzpettel.com>
References: <529A4581-69CC-4885-8E07-AB518FAB5742@mitzpettel.com>
Message-ID: <1B17FC97-3345-4E54-BD1E-90BCB6B8AA79@apple.com>


On Jun 21, 2005, at 12:41 PM, Mitz Pettel wrote:

> I have encountered a bug that occurs on a certain page only  
> sometimes and only when it's loaded via HTTP (i.e. not when opened  
> as a webarchive). It looks like the bug occurs only when  
> relayouting occurs when the HTML is not fully loaded (or perhaps  
> when images are loaded after the page HTML has been loaded). I'm  
> afraid I don't know much more than that about the exact conditions.
>
> Do you know of any techniques that will allow me to reproduce those  
> conditions without relying on that specific page and on the server  
> it's coming from?

If you insert the following in the middle of a document, it will  
force a layout at that exact point:

<script>
document.offsetTop;
</script>

This gets a property that requires a layout, and therefore always  
will cause a layout at that point in parsing a document.

Regards,
Maciej


From ddkilzer at kilzer.net  Tue Jun 21 14:54:56 2005
From: ddkilzer at kilzer.net (David D. Kilzer)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Debugging mid-page relayout issues
In-Reply-To: <529A4581-69CC-4885-8E07-AB518FAB5742@mitzpettel.com>
References: <529A4581-69CC-4885-8E07-AB518FAB5742@mitzpettel.com>
Message-ID: <20050621215456.GA25940@kilzer.net>

I've thought about this before, especially in regards to Bug 3416
(Scroll bars are sometimes not updated properly).

  http://bugzilla.opendarwin.org/show_bug.cgi?id=3416

Could you add A LOT spaces or NULL characters (ctrl-@, I think) to the
body of the document to "simulate" a timeout when the browser is loading
the page from the filesystem?  You might have to put an awful lot of
them in to simulate a timeout, but at least the HTML document would
compress well.  (The difference, though, would be that the browser was
continually getting input even though it had nothing to render, versus a
network timeout where nothing is coming in.)

Otherwise, a small HTTP server (Jetty anyone?) would have to be added to
the test suite to provide a "realistic" server response, in which case
you could create an artificial "timeout" as needed).  Jetty is licensed
under the Apache License Version 2.0, so I don't think it'd be a big
issue.)

  http://jetty.mortbay.org/

Dave


On Tue, Jun 21, 2005 at 10:41:45PM +0300, Mitz Pettel wrote:

> I have encountered a bug that occurs on a certain page only sometimes  
> and only when it's loaded via HTTP (i.e. not when opened as a  
> webarchive). It looks like the bug occurs only when relayouting  
> occurs when the HTML is not fully loaded (or perhaps when images are  
> loaded after the page HTML has been loaded). I'm afraid I don't know  
> much more than that about the exact conditions.
> 
> Do you know of any techniques that will allow me to reproduce those  
> conditions without relying on that specific page and on the server  
> it's coming from?
> 
> Thanks,
> -- Mitz Pettel


From hyatt at apple.com  Tue Jun 21 15:01:54 2005
From: hyatt at apple.com (David Hyatt)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Debugging mid-page relayout issues
In-Reply-To: <1B17FC97-3345-4E54-BD1E-90BCB6B8AA79@apple.com>
References: <529A4581-69CC-4885-8E07-AB518FAB5742@mitzpettel.com>
	<1B17FC97-3345-4E54-BD1E-90BCB6B8AA79@apple.com>
Message-ID: <C0811FA9-DE0E-4D4A-BE1C-BE98CFD0543A@apple.com>

document.body.offsetTop.

dave

On Jun 21, 2005, at 2:47 PM, Maciej Stachowiak wrote:

>
> On Jun 21, 2005, at 12:41 PM, Mitz Pettel wrote:
>
>
>> I have encountered a bug that occurs on a certain page only  
>> sometimes and only when it's loaded via HTTP (i.e. not when opened  
>> as a webarchive). It looks like the bug occurs only when  
>> relayouting occurs when the HTML is not fully loaded (or perhaps  
>> when images are loaded after the page HTML has been loaded). I'm  
>> afraid I don't know much more than that about the exact conditions.
>>
>> Do you know of any techniques that will allow me to reproduce  
>> those conditions without relying on that specific page and on the  
>> server it's coming from?
>>
>
> If you insert the following in the middle of a document, it will  
> force a layout at that exact point:
>
> <script>
> document.offsetTop;
> </script>
>
> This gets a property that requires a layout, and therefore always  
> will cause a layout at that point in parsing a document.
>
> Regards,
> Maciej
>
> _______________________________________________
> webkit-dev mailing list
> webkit-dev@opendarwin.org
> http://www.opendarwin.org/mailman/listinfo/webkit-dev
>


From darin at apple.com  Tue Jun 21 15:02:11 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] Newline translation issue with textareas
In-Reply-To: <A076D871-820E-4AD0-B7E1-2EAA7EC61A5A@sb.org>
References: <6D84EC5E-F3ED-4A82-889F-FC8D9696D7FB@sb.org>
	<32D534E6-DAF1-4CCF-914C-6BBB83E8AB8E@apple.com>
	<C9997672-E4D0-4C49-A711-4F35EEA279D6@sb.org>
	<37611ACA-2160-4C22-9CF4-A70E7AB0B9D6@apple.com>
	<B7C42E3D-AA4F-4666-B094-D264F71AD7ED@sb.org>
	<D3A812F5-29D3-4B3B-B55E-BDE1309896B5@apple.com>
	<A076D871-820E-4AD0-B7E1-2EAA7EC61A5A@sb.org>
Message-ID: <B8DC79E6-089B-4802-BBE4-0CDDFB236750@apple.com>

On Jun 21, 2005, at 12:00 PM, Kevin Ballard wrote:

> Well, I just ran into another problem with doing it this way.
>
> If I have an empty textarea, and I run the following code:
>
>   var elt = document.getElementById("foo"); // foo is the textarea
>   elt.value = "This is a test";
>   elt.setSelectionRange(3,5);
>   alert(elt.selectionStart);
>
> I end up getting 0 back, because the value hasn't been pushed down  
> to the KWQTextArea yet, but that's where the selection is, which  
> means I'm setting the selection while KWQTextArea still has an  
> empty value.
>
> So there's 2 solutions to this:
>
> 1) Cache the selection up in the HTMLTextAreaElementImpl as well
> 2) Push the text value down to KWQTextArea on  
> HTMLTextAreaElementImpl::setValue().
>
> I don't think option #1 is really necessary, it would just cause  
> more syncing issues, so I'd suggest going with #2. Is there any  
> problem with calling updateFromElement() after setting the text value?
>
> I also suspect that HTMLInputElementImpl will have the same  
> problem, but I haven't actually tested yet.

Sounds fine. Lets see how well it works.

     -- Darin


From adele at apple.com  Tue Jun 21 17:18:37 2005
From: adele at apple.com (Adele Peterson)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] layout test failures
In-Reply-To: <66126F85-4280-452B-8FC0-431A20B0B209@apple.com>
References: <66126F85-4280-452B-8FC0-431A20B0B209@apple.com>
Message-ID: <0B6CE7AF-7A75-4D79-902C-B0241CC0AE5F@apple.com>

Looks like the fix for http://bugzilla.opendarwin.org/attachment.cgi? 
id=2483 caused these failures.

-Adele

On Jun 21, 2005, at 10:25 AM, Darin Adler wrote:

> I'm seeing new failures on these layout tests (even after a clean  
> build):
>
>     fast/forms/element-by-name
>     fast/js/exception-linenums
>     fast/loader/loadInProgress
>
> These were working 24 hours ago. Others confirm they are seeing  
> these failures, although not everyone sees all three.
>
> Lets not commit any other code changes to the tree until we resolve  
> these regressions. Here's hoping it's just something wrong on my  
> computer.
>
>     -- Darin
>
> _______________________________________________
> webkit-dev mailing list
> webkit-dev@opendarwin.org
> http://www.opendarwin.org/mailman/listinfo/webkit-dev
>


From ddkilzer at kilzer.net  Tue Jun 21 18:00:21 2005
From: ddkilzer at kilzer.net (David D. Kilzer)
Date: Tue Oct  9 17:52:54 2007
Subject: [webkit-dev] layout test failures
In-Reply-To: <0B6CE7AF-7A75-4D79-902C-B0241CC0AE5F@apple.com>
References: <66126F85-4280-452B-8FC0-431A20B0B209@apple.com>
	<0B6CE7AF-7A75-4D79-902C-B0241CC0AE5F@apple.com>
Message-ID: <CBBF72A8-3728-4EC8-A5A6-3C3EEADBD8A2@kilzer.net>

That's Bug 3293 for those of you playing along at home.

   Object.prototype.hasOwnProperty() missing
   http://bugzilla.opendarwin.org/show_bug.cgi?id=3293

Dave


On Jun 21, 2005, at 7:18 PM, Adele Peterson wrote:

> Looks like the fix for http://bugzilla.opendarwin.org/ 
> attachment.cgi?id=2483 caused these failures.
>
> -Adele
>
> On Jun 21, 2005, at 10:25 AM, Darin Adler wrote:
>
>
>> I'm seeing new failures on these layout tests (even after a clean  
>> build):
>>
>>     fast/forms/element-by-name
>>     fast/js/exception-linenums
>>     fast/loader/loadInProgress
>>
>> These were working 24 hours ago. Others confirm they are seeing  
>> these failures, although not everyone sees all three.
>>
>> Lets not commit any other code changes to the tree until we  
>> resolve these regressions. Here's hoping it's just something wrong  
>> on my computer.
>>
>>     -- Darin
>>
>> _______________________________________________
>> webkit-dev mailing list
>> webkit-dev@opendarwin.org
>> http://www.opendarwin.org/mailman/listinfo/webkit-dev
>>
>>
>
> _______________________________________________
> webkit-dev mailing list
> webkit-dev@opendarwin.org
> http://www.opendarwin.org/mailman/listinfo/webkit-dev
>


From kevin at sb.org  Tue Jun 21 18:48:26 2005
From: kevin at sb.org (Kevin Ballard)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] WebCore compilation failure
Message-ID: <F5D661DD-E823-48C0-BEF2-D36AF6406366@sb.org>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2378 bytes
Desc: not available
Url : http://lists.macosforge.org/pipermail/webkit-dev/attachments/20050621/f718b4d8/smime.bin
From kevin at sb.org  Tue Jun 21 18:54:25 2005
From: kevin at sb.org (Kevin Ballard)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] Adding CIA to the CVS repo
Message-ID: <E8218953-E9C7-429E-B9CB-27E8DF1C8BB3@sb.org>

There's a nifty service for version control systems called CIA  
<http://cia.navi.cx/>. Basically, you simply throw their hook script  
onto your repo and your commit information starts getting logged on  
their site. That's decent for looking at activity, but what makes it  
so much better is you can then tell it to mirror the messages to your  
IRC channel on Freenode, which means anybody hanging out there gets  
notified whenever somebody commits something. I think it would be  
quite useful.

The only problem with CIA is you get used to the messages, and  
occasionally it goes down so you don't get IRC notifications, and you  
feel lost. But of course, that would simply put you back in the state  
we are right now.

Any thoughts?

-- 
Kevin Ballard
kevin@sb.org
http://www.tildesoft.com
http://kevin.sb.org

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2378 bytes
Desc: not available
Url : http://lists.macosforge.org/pipermail/webkit-dev/attachments/20050621/87a90710/smime.bin
From mjs at apple.com  Tue Jun 21 17:47:22 2005
From: mjs at apple.com (Maciej Stachowiak)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] Debugging mid-page relayout issues
In-Reply-To: <C0811FA9-DE0E-4D4A-BE1C-BE98CFD0543A@apple.com>
References: <529A4581-69CC-4885-8E07-AB518FAB5742@mitzpettel.com>
	<1B17FC97-3345-4E54-BD1E-90BCB6B8AA79@apple.com>
	<C0811FA9-DE0E-4D4A-BE1C-BE98CFD0543A@apple.com>
Message-ID: <1B04C27F-2C36-4A65-A1A1-FA4417DBA02D@apple.com>


On Jun 21, 2005, at 3:01 PM, David Hyatt wrote:

> document.body.offsetTop.

You sure? offsetTop appears to be defined on all nodes, not just  
elements, and kjs_dom.cpp line 408 looks like it will force the  
layout in any case for all nodes, even if there is no renderer.  
Although I guess the body version is cleaner.

  - Maciej




From mjs at apple.com  Tue Jun 21 22:15:35 2005
From: mjs at apple.com (Maciej Stachowiak)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] WebCore compilation failure
In-Reply-To: <F5D661DD-E823-48C0-BEF2-D36AF6406366@sb.org>
References: <F5D661DD-E823-48C0-BEF2-D36AF6406366@sb.org>
Message-ID: <6EB0F3B4-6A34-436D-9E9A-6A8AFFFCE969@apple.com>


On Jun 21, 2005, at 6:48 PM, Kevin Ballard wrote:

> At the time of this writing, WebCore fails to compile. This is  
> caused by a recent change, which can be seen in revision 1.554 of  
> WebCore.pbproj/project.pbxproj. The problem is that the $()  
> construct was used instead of ${} in writing a shell script, which  
> causes the script to fail.
>
> The fix is very simple. Open up the build settings of the WebCore  
> target and fix the rule for .y files to use ${} instead of $(). Or  
> simply apply the following patch:

r=me and landed.

FWIW the $() expansion seems to work in Xcode 2.0, just not in 2.1.  
the ${} version should work for everyone.

  - Maciej


>
> Index: WebCore.pbproj/project.pbxproj
> ===================================================================
> RCS file: /cvs/root/WebCore/WebCore.pbproj/project.pbxproj,v
> retrieving revision 1.554
> diff -u -r1.554 project.pbxproj
> --- project.pbxproj    2005/06/22 00:23:09    1.554
> +++ project.pbxproj    2005/06/22 01:45:01
> @@ -2035,7 +2035,7 @@
>                  "$(DERIVED_FILE_DIR)/$(INPUT_FILE_BASE).h",
>                  "$(DERIVED_FILE_DIR)/$(INPUT_FILE_BASE).cpp",
>              );
> -            script = "bison -d -p cssyy khtml/css/parser.y -o  
> \"$DERIVED_FILE_DIR/$(INPUT_FILE_BASE).cpp\"\ncat  
> \"$DERIVED_FILE_DIR/parser.cpp.h\" \"$DERIVED_FILE_DIR/$ 
> (INPUT_FILE_BASE).hpp\" > \"$DERIVED_FILE_DIR/$(INPUT_FILE_BASE).h 
> \" 2> /dev/null || echo -n";
> +            script = "bison -d -p cssyy khtml/css/parser.y -o  
> \"$DERIVED_FILE_DIR/${INPUT_FILE_BASE}.cpp\"\ncat  
> \"$DERIVED_FILE_DIR/parser.cpp.h\" \"$DERIVED_FILE_DIR/$ 
> {INPUT_FILE_BASE}.hpp\" > \"$DERIVED_FILE_DIR/${INPUT_FILE_BASE}.h 
> \" 2> /dev/null || echo -n";
>          };
>          937C34ED0868E4B4006F4B22 = {
>              fileRef = 934E43780414294A008635CE;
>
> Note that I had to edit this file by hand since I don't have Xcode  
> 2.0 anymore, just 2.1, but it appears to work (my build hasn't  
> finished yet, since I'm doing a clean build, but if the error was  
> still there the build would have stopped minutes ago).
>
> -Kevin Ballard
>
> -- 
> Kevin Ballard
> kevin@sb.org
> http://www.tildesoft.com
> http://kevin.sb.org
>
> _______________________________________________
> webkit-dev mailing list
> webkit-dev@opendarwin.org
> http://www.opendarwin.org/mailman/listinfo/webkit-dev
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.macosforge.org/pipermail/webkit-dev/attachments/20050621/2f0fc22d/attachment.html
From devlists at softchaos.com  Wed Jun 22 04:18:34 2005
From: devlists at softchaos.com (Matt Gough)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] Secure site problems since Webkit 312
Message-ID: <27660C22-A911-4499-94BC-3F1D58AFA86E@softchaos.com>

Since Mac OS X 10.3.9 and later came out, I have often experienced  
problems with many secure sites which results in Safari displaying  
the following:

***
Safari can?t open the page.

Safari can?t open the page ?https://www.abc.com? because the network  
connection was reset, which sometimes occurs when the server is busy.  
You might be able to open the page later.

***

These will either occur when trying to log in, or will happen after a  
successful login when jumping to a different page on the same site.

In fact it has become so commonplace nowadays that I switch to  
Firefox before bothering to visit such a site.

Interestingly, I sometimes get an error being reported in Safari's  
Activity window "POSIX error: Connection reset by peer" on a sub page  
that I am trying to go to. If I then double-click that page in the  
Activity window it will come up OK.

I really don't believe the servers are busy and I think there has  
been some kind of regression in Webkit 312 and later. I never had  
problems in 10.3.8 and earlier.

Since these are secure sites (often banking sites) it is impossible  
to provide a test case. However, if you bank with HSBC in the uk (or  
maybe even in the US), you may be able to reproduce this yourselves.



Matt Gough
From darin at apple.com  Wed Jun 22 08:36:50 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] Secure site problems since Webkit 312
In-Reply-To: <27660C22-A911-4499-94BC-3F1D58AFA86E@softchaos.com>
References: <27660C22-A911-4499-94BC-3F1D58AFA86E@softchaos.com>
Message-ID: <7D244F65-BFE9-4B66-81B7-96E2D554F503@apple.com>

On Jun 22, 2005, at 4:18 AM, Matt Gough wrote:

> Since Mac OS X 10.3.9 and later came out, I have often experienced  
> problems with many secure sites which results in Safari displaying  
> the following:
>
> ***
> Safari can?t open the page.
>
> Safari can?t open the page ?https://www.abc.com? because the  
> network connection was reset, which sometimes occurs when the  
> server is busy. You might be able to open the page later.
>
> ***

I've heard other reports like this.

This bug is in NSURLConnection in the Foundation framework, not in  
WebKit itself, so this mailing list is not really the place where we  
can deal with it.

You should report it at <http://bugereport.apple.com>. There's a  
similar bug seen on Tiger that will almost certainly be fixed in a  
software update. I'm not sure if the bug is known to happen on  
Panther, so a report from you that's Panther-specific might be quite  
useful to the team that works on NSURLConnection in Foundation.

     -- Darin


From curt.arnold at mac.com  Wed Jun 22 12:29:08 2005
From: curt.arnold at mac.com (Curt Arnold)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] DOM L1 Core tests analysis
Message-ID: <6565EAD8-7888-4AAC-8733-7F7446D84E8C@mac.com>

I was able to drop the self-hosted HTML tests for DOM Level 1 Core  
into the WebCore/layout-tests directory.  The first
run created the "-expected.txt" files and on a second run all the  
tests "succeeded" (in the sense that the response had
not changed from the first run).  Doing a grep on the expected files  
for "failure" and "error" identified the following tests which I have  
added a brief analysis of the cause of the failure.

Safari seems to have serious issues with the self-hosted XHTML tests  
which appears to be due to a failure to pick up the entity  
declarations in the document type declaration, however I haven't  
tried to track those down.  I don't know whether I should expect  
WebKit to have any support for XHTML.

I will later see what happens when the L2 Core and L2 HTML self- 
hosted tests are dropped in.

Manipulation of attributes and attribute child nodes appears to be  
the most significant problem area, however these are problem areas  
for many implementations.  The apparent lack of an implementation for  
Document.cloneNode causes all of the multi-document tests the self- 
tests implementation depends on that method to create the second  
document.   hc_attrcreatetextnode, hc_nodeappendchildinvalidnodetype,  
hc_nodeinsertbeforeinvalidnodetype,
hc_nodereplacechildinvalidnodetype seem like the first issues to attack.




hc_attrappendchild5-expected.txt:                text run at (2,2)  
width 30: "error"
hc_attrappendchild5-expected.txt:                text run at (2,2)  
width 145: "TypeError - Null value"
hc_attrinsertbefore6-expected.txt:                text run at (2,2)  
width 30: "error"
hc_attrinsertbefore6-expected.txt:                text run at (2,2)  
width 145: "TypeError - Null value"
hc_elementwrongdocumenterr-expected.txt:                text run at  
(2,2) width 30: "error"
hc_elementwrongdocumenterr-expected.txt:                text run at  
(2,2) width 145: "TypeError - Null value"
hc_namednodemapwrongdocumenterr-expected.txt:                text run  
at (2,2) width 30: "error"
hc_namednodemapwrongdocumenterr-expected.txt:                text run  
at (2,2) width 145: "TypeError - Null value"
hc_nodeappendchildnewchilddiffdocument-expected.txt:                 
text run at (2,2) width 30: "error"
hc_nodeappendchildnewchilddiffdocument-expected.txt:                 
text run at (2,2) width 145: "TypeError - Null value"
hc_nodeinsertbeforenewchilddiffdocument-expected.txt:                 
text run at (2,2) width 30: "error"
hc_nodeinsertbeforenewchilddiffdocument-expected.txt:                 
text run at (2,2) width 145: "TypeError - Null value"
hc_nodereplacechildnewchilddiffdocument-expected.txt:                 
text run at (2,2) width 30: "error"
hc_nodereplacechildnewchilddiffdocument-expected.txt:                 
text run at (2,2) width 145: "TypeError - Null value"


Document.cloneNode(true) returns null.  Document.cloneNode(true) is  
required to support multiple (identical)
document tests in the self-hosted tests (the JSUnit tests use  
separate IFRAME elements loading the same URL).
Opera and Mozilla will both fail the self-hosted flavor of these test  
in the same manner as Safari.
In the JSUnit tests, IE and Mozilla will not throw the specified  
WRONG_DOCUMENT_ERR exception.

documentinvalidcharacterexceptioncreateentref- 
expected.txt:                text run at (2,2) width 40: "failure"
documentinvalidcharacterexceptioncreateentref1- 
expected.txt:                text run at (2,2) width 40: "failure"
documentinvalidcharacterexceptioncreatepi- 
expected.txt:                text run at (2,2) width 40: "failure"
documentinvalidcharacterexceptioncreatepi1- 
expected.txt:                text run at (2,2) width 40: "failure"
hc_nodevalue03-expected.txt:                text run at (2,2) width  
40: "failure"
hc_attrgetvalue2-expected.txt:                text run at (2,2) width  
40: "failure"


Attempted creation of entity reference and processing instruction.
HTML documents should throw a NOT_SUPPORTED_ERR.  Safari appears to  
return a Node.


hc_attrappendchild1-expected.txt:                text run at (2,2)  
width 40: "failure"

Text node added to attribute node.  High failure test, passed by Xerces,
failed by Crimson, DOM4J, IE6, Mozilla.
Failure consistent with IE 6, append appears to be successful but  
attribute value
not updated.  Mozilla throws "Modifications not allowed" exception.


hc_attrappendchild2-expected.txt:                text run at (2,2)  
width 40: "failure"

Attempt to add element as child of attribute.  HIERARCHY_REQUEST_ERR  
should be thrown, but not thrown by IE 6 or Mozilla.

hc_attrappendchild3-expected.txt:                text run at (2,2)  
width 40: "failure"

Document fragment containing text nodes added to attribute node.   
Same comments as appendchild1.


hc_attrappendchild4-expected.txt:                text run at (2,2)  
width 40: "failure"

Creation of CDATASection in HTML document expected to throw  
NOT_SUPPORTED_ERR.  Passed by Mozilla and IE.


hc_attrappendchild6-expected.txt:                text run at (2,2)  
width 40: "failure"

Similar to appendchild1.


hc_attrchildnodes1-expected.txt:                text run at (2,2)  
width 40: "failure"
hc_attrfirstchild-expected.txt:                text run at (2,2)  
width 40: "failure"
hc_attrlastchild-expected.txt:                text run at (2,2) width  
40: "failure"
hc_attrhaschildnodes-expected.txt:                text run at (2,2)  
width 40: "failure"


Attribute.childNodes expected to contain one text node.  Mozilla  
passes, IE returns null for
Attribute.childNodes, Safari returns empty node list.  Java  
implementations typically
fabricate the text node for attributes only on demand.


hc_attrchildnodes2-expected.txt:                text run at (2,2)  
width 40: "failure"

Text node appended to attribute node, similar to hc_attrappendchild1  
but then checks
Attribute.childNodes.  IE returns null for Attribute.childNodes,  
Mozilla fails with
NO_MODIFICATION_ALLOWED_ERR, Safari child node lists contains only  
the newly
added text node.


hc_attrclonenode1-expected.txt:                text run at (2,2)  
width 40: "failure"

High failure test.  Similar to hc_attrappendchild1 but with an  
additional clone.

hc_attrcreatetextnode-expected.txt:                text run at (2,2)  
width 40: "failure"

Of tested implementations., only Safari fails   Sets  
Attribute.nodeValue = "Y&ent1;".
Safari interprets "&ent1;" as an entity reference when it should have  
been interpreted as
a literal.



hc_attrinsertbefore1-expected.txt:                text run at (2,2)  
width 40: "failure"
hc_attrinsertbefore2-expected.txt:                text run at (2,2)  
width 40: "failure"
hc_attrinsertbefore3-expected.txt:                text run at (2,2)  
width 40: "failure"
hc_attrinsertbefore4-expected.txt:                text run at (2,2)  
width 40: "failure"
hc_attrinsertbefore5-expected.txt:                text run at (2,2)  
width 40: "failure"
hc_attrinsertbefore7-expected.txt:                text run at (2,2)  
width 40: "failure"


Likely all variants of some hc_attrappendchild.


Similar to hc_attrchildnodes1.

hc_attrnormalize-expected.txt:                text run at (2,2) width  
40: "failure"

Similar to an hc_attrappendchild, then calls normalize.

hc_attrremovechild1-expected.txt:                text run at (2,2)  
width 40: "failure"
hc_attrreplacechild1-expected.txt:                text run at (2,2)  
width 40: "failure"
hc_attrreplacechild2-expected.txt:                text run at (2,2)  
width 40: "failure"

Similar to the hc_attrappendchilds.


hc_attrsetvalue1-expected.txt:                text run at (2,2) width  
40: "failure"

Builds on hc_attrfirstchild which fails on IE and Safari.

hc_attrsetvalue2-expected.txt:                text run at (2,2) width  
40: "failure"

Builds on hc_attrfirstchild and high failure test hc_attrappendchild1.


hc_elementnormalize2-expected.txt:                text run at (2,2)  
width 40: "failure"

High failure test.  IE, Mozilla and Safari all fail this test in  
different ways.  Has aspects
of hc_attrfirstchild and hc_attrappendchild1.


hc_elementremoveattribute-expected.txt:                text run at  
(2,2) width 40: "failure"

IE 6, Mozilla and Opera all fail this test the same way, but no Java  
implementation fails.  Test
removes an attribute and then calls Element.getAttribute to get its  
value.  Browsers return null,
though they would have returned "" if the attribute did not appear in  
the original document.

hc_nodeappendchildinvalidnodetype-expected.txt:                text  
run at (2,2) width 40: "failure"
hc_nodeinsertbeforeinvalidnodetype-expected.txt:                text  
run at (2,2) width 40: "failure"
hc_nodereplacechildinvalidnodetype-expected.txt:                text  
run at (2,2) width 40: "failure"

Attempts to add an attribute into node list of element should result  
in HIERARCHY_REQUEST_ERR.
Safari fails in similar manner to IE 6.  No other surveyed  
implementation fails.



From cguenther at gmail.com  Wed Jun 22 16:05:05 2005
From: cguenther at gmail.com (Carsten Guenther)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] Javascript test failures
Message-ID: <65eaf64c0506221605473dce42@mail.gmail.com>

Hi,

not sure if this is known or not or if I misinterpret the output but
the run-mozilla-tests script currently complains about lots of
regressions when running on a fresh build from ToT:

...
98 regressions found.
119 tests fixed.

Carsten

From finlay.dobbie at gmail.com  Wed Jun 22 16:14:08 2005
From: finlay.dobbie at gmail.com (Finlay Dobbie)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] Javascript test failures
In-Reply-To: <65eaf64c0506221605473dce42@mail.gmail.com>
References: <65eaf64c0506221605473dce42@mail.gmail.com>
Message-ID: <ab20c92d05062216141214afff@mail.gmail.com>

On 6/23/05, Carsten Guenther <cguenther@gmail.com> wrote:
> Hi,
> 
> not sure if this is known or not or if I misinterpret the output but
> the run-mozilla-tests script currently complains about lots of
> regressions when running on a fresh build from ToT:
> 
> ...
> 98 regressions found.
> 119 tests fixed.

I have an open bug about this, which has so far garnered no comments :-)
http://bugzilla.opendarwin.org/show_bug.cgi?id=3533

 -- Finlay

From curt.arnold at mac.com  Wed Jun 22 16:41:10 2005
From: curt.arnold at mac.com (Curt Arnold)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] DOM L2 Core and HTML tests
Message-ID: <B8EF36FD-355C-4D31-B00A-36CA07AA0735@mac.com>

Very few of the L2 Core tests are "HTML-compatible".  Of the 11 that  
are one, createDocumentType04, causes Safari to crash (logged as  
http://bugzilla.opendarwin.org/show_bug.cgi?id=3653) and  
hc_nodenormalizedocumentfragment2 failed.   
hc_nodenormalizedocumentfragment2 adds an empty text node to a  
document fragment and then normalizes the document fragment expecting  
the elimination of the empty text node.

Apparently, I never got around to making functional self-hosted  
versions of the L2 HTML tests and they are not present in the  
snapshots.  The build script can produce them, but they are not  
currently functional.  I'll try to debug them and see what I can do  
to make them available.

From HanspeterSchaub at mac.com  Sat Jun 25 05:31:22 2005
From: HanspeterSchaub at mac.com (Hanspeter Schaub)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] (no subject)
Message-ID: <8F6CC889-5726-40A4-A23F-7029B3CEB44E@mac.com>

With the latest builds, I've noticed that when viewing PDFs using the  
Safari built-in viewing capability (without the 3rd party plugin), I  
no longer seem to have the full set of options with the contextual  
menu?  (using the right-click on PDF mode).   There used to be a  
"view in Preview" option, among others.  Are these removed on purpose?

thanks,

HP

---------------------------------------------------------------
Hanspeter Schaub

Phone:     (540) 763-8370
Email:    HanspeterSchaub@mac.com
Web:    http://homepage.mac.com/hanspeterschaub




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.macosforge.org/pipermail/webkit-dev/attachments/20050625/83aa4b4b/attachment.html
From darin at apple.com  Sat Jun 25 12:51:09 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] PDF menus disappearing
In-Reply-To: <8F6CC889-5726-40A4-A23F-7029B3CEB44E@mac.com>
References: <8F6CC889-5726-40A4-A23F-7029B3CEB44E@mac.com>
Message-ID: <93F923D0-5F86-455A-A2D4-258E1A189E5D@apple.com>

On Jun 25, 2005, at 5:31 AM, Hanspeter Schaub wrote:

> With the latest builds, I've noticed that when viewing PDFs using  
> the Safari built-in viewing capability (without the 3rd party  
> plugin), I no longer seem to have the full set of options with the  
> contextual menu?  (using the right-click on PDF mode).   There used  
> to be a "view in Preview" option, among others.  Are these removed  
> on purpose?

John Sullivan changed WebKit so that the PDF menus can be customized  
using the context menu delegate, just as other menus can be.

At the same time he made some changes to Safari.

I think the older Safari has some buggy behavior with the newer  
WebKit. If you file a bug, John can consider whether there's a way to  
refine this so it will behave better with old versions of Safari (and  
thus possibly better with other WebKit applications).

     -- Darin


From hanspeterschaub at mac.com  Sat Jun 25 13:00:02 2005
From: hanspeterschaub at mac.com (Hanspeter Schaub)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] PDF menus disappearing
In-Reply-To: <93F923D0-5F86-455A-A2D4-258E1A189E5D@apple.com>
References: <8F6CC889-5726-40A4-A23F-7029B3CEB44E@mac.com>
	<93F923D0-5F86-455A-A2D4-258E1A189E5D@apple.com>
Message-ID: <CEB8EB2F-91A4-438D-85E2-D8CFAC62567A@mac.com>

Thanks for the feedback.  I filed a bug under the category "New Bugs".

HP

---------------------------------------------------------------
Hanspeter Schaub

Phone:     (540) 763-8370
Email:    HanspeterSchaub@mac.com
Web:    http://homepage.mac.com/hanspeterschaub




On Jun 25, 2005, at 3:51 PM, Darin Adler wrote:

> On Jun 25, 2005, at 5:31 AM, Hanspeter Schaub wrote:
>
>
>> With the latest builds, I've noticed that when viewing PDFs using  
>> the Safari built-in viewing capability (without the 3rd party  
>> plugin), I no longer seem to have the full set of options with the  
>> contextual menu?  (using the right-click on PDF mode).   There  
>> used to be a "view in Preview" option, among others.  Are these  
>> removed on purpose?
>>
>
> John Sullivan changed WebKit so that the PDF menus can be  
> customized using the context menu delegate, just as other menus can  
> be.
>
> At the same time he made some changes to Safari.
>
> I think the older Safari has some buggy behavior with the newer  
> WebKit. If you file a bug, John can consider whether there's a way  
> to refine this so it will behave better with old versions of Safari  
> (and thus possibly better with other WebKit applications).
>
>     -- Darin
>
> _______________________________________________
> webkit-dev mailing list
> webkit-dev@opendarwin.org
> http://www.opendarwin.org/mailman/listinfo/webkit-dev
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.macosforge.org/pipermail/webkit-dev/attachments/20050625/ae935599/attachment.html
From storey.david at gmail.com  Sat Jun 25 15:03:50 2005
From: storey.david at gmail.com (David Storey)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] Code clean up and compiling on 10.3.9
Message-ID: <0cebd301fa3f322c6262b74627568868@gmail.com>

Hi,

First I'd like to quickly introduce myself.  I'm David, from Newcastle, 
England, and have recently graduated from a MSc in Internet and 
Distributed Systems, at the University of Durham.

I'd like like to get involved in WebKit development to gain some much 
needed experience, and help improve something I use frequently and that 
I'm interested in.  As I've limited knowledge of C/Obj-C (i'm mainly a 
Java developer), I though one of the best places to start would be on 
the code clean up and documentation.  Is there any timeframe when or if 
WebKit will compile on 10.3.9?  I don't have access to Tiger and can't 
afford to buy it, so I can't make any changes until it compiles.  I 
don't have access to the Tiger DVD to get the missing header files 
either.

At one stage JavaScriptCore compiled on Panther (it fails again now), 
so I decided  to have a go at cleaning up that part of the project.  
Unfortunately it took two days to clean up every class, and by that 
stage when I performed the regression test, there were a number (even 
though I didn't make any real changes).  It seemed that it actually 
passed many more than the master copy though.  I thought I would submit 
the changes anyway, but i followed the steps on the site to produce a 
patch file, but it only created a blank file.  I'm not sure if that was 
something to do with the app not compiling, or if I did anything wrong. 
  Most the changes were just white-space changes.

While working on the code cleanup there were a number of areas that 
different programmers implemted differently which were not covered by 
the style guidelines.  Maybe there should be some guidelines to cover 
these:

1. Should first level statements after the method name be indented 4 
spaces too?  mostly they are indented twice  e.g.

methodName(param)
{
     statement;
}

instead of

methodName(param)
{
   statement;
}

2.  Case statements do not seem to be mentioned.  some use {} and some 
don't, even in the same switch block.  Should all case statments have 
or not have braces?  if they should, should they be like :

}  case CSSSelector::List: {

OR

case CSSSelector::List: {
	statemnts;
}
case ...

3.  Braces are not mandatory when the statements are only one line for 
'if and 'for' etc.  Sometimes no braces are used and sometimes not.  
Should there be a guideline to keep this consistent.  Personally I 
prefer always using braces, as it is clearer, but not everyone may 
agree.

4.  There should possibly be a guideline for how many spaces to indent 
when wrapping a line that is too long to fit on one line.

5. Often code goes on for pages without any line breaks at all.  
Possibly there should be a guideline on when to leave a line space 
between blocks of code, such as leaving a line before a return 
statement at the end of a method or between and if or for block.

6.  Not really knowing C, i wasn't sure what the '#if apple changes' -- 
and other such  if constructs that xCode highlights in red -- are for?  
I wasn't sure if these should be indented like a normal if statement?

7.  There are no guidelines for casting.  I personally prefere:

var = (cast) methodName(param, otherParam);

but often they were formatted without the space, such as :

var = (cast)methodName(param, otherParam);

I think that is it for the moment.  sorry for going on, but after 
spending two days at code reformatting, I noticed a few things.

Thanks for your time, hopefully in the future  will be able to make 
some contribution to the project,

Regards,

David

------------------------------------------------------
David Storey
University of Durham
------------------------------------------------------
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: text/enriched
Size: 3799 bytes
Desc: not available
Url : http://lists.macosforge.org/pipermail/webkit-dev/attachments/20050625/b769543e/attachment.bin
From finlay.dobbie at gmail.com  Sat Jun 25 15:22:15 2005
From: finlay.dobbie at gmail.com (Finlay Dobbie)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] Code clean up and compiling on 10.3.9
In-Reply-To: <0cebd301fa3f322c6262b74627568868@gmail.com>
References: <0cebd301fa3f322c6262b74627568868@gmail.com>
Message-ID: <ab20c92d05062515226c374b1@mail.gmail.com>

On 6/25/05, David Storey <storey.david@gmail.com> wrote:
> Is there any timeframe when or if
> WebKit will compile on 10.3.9?  I don't have access to Tiger and can't
> afford to buy it, so I can't make any changes until it compiles.  

Unfortunately the only people who can do it at the moment are Apple
engineers, since it will require a different
libWebKitSystemInterface.a - last I heard Hyatt was almost there, but
busy. So *shrug*.

> At one stage JavaScriptCore compiled on Panther (it fails again now),

Odd. It compiled on Panther about 48 hours ago for me, with no changes.

 -- Finlay

From ddkilzer at kilzer.net  Sat Jun 25 17:43:04 2005
From: ddkilzer at kilzer.net (David D. Kilzer)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] Code clean up and compiling on 10.3.9
In-Reply-To: <0cebd301fa3f322c6262b74627568868@gmail.com>
References: <0cebd301fa3f322c6262b74627568868@gmail.com>
Message-ID: <4B005412-2233-4DAC-A75E-5631D0E4F2F1@kilzer.net>

On Jun 25, 2005, at 5:03 PM, David Storey wrote:

> At one stage JavaScriptCore compiled on Panther (it fails again  
> now), so I decided  to have a go at cleaning up that part of the  
> project.  Unfortunately it took two days to clean up every class,  
> and by that stage when I performed the regression test, there were  
> a number (even though I didn't make any real changes).  It seemed  
> that it actually passed many more than the master copy though.  I  
> thought I would submit the changes anyway, but i followed the steps  
> on the site to produce a patch file, but it only created a blank  
> file.  I'm not sure if that was something to do with the app not  
> compiling, or if I did anything wrong.  Most the changes were just  
> white-space changes.

Try "cvs diff -u" in the JavaScriptCore directory.  However, this  
will NOT include any "new" files, which was the purpose of the script  
(if I remember correctly).  It won't include "new" files because you  
can't run "cvs add" on the files with read-only access.

I know Panther's version of the cvs command-line tool was based on  
version 1.10.x.  This version is now called "ocvs" (for old cvs) in  
Tiger, and the cvs command is now version 1.11.x.  This may explain  
why the script didn't work for you.

You might try compiling a newer version of cvs for Panther (or look  
at installing Fink or Darwin Ports).  If you make sure it appears  
"first" in your $PATH environment variable, then the script make  
start working.

> While working on the code cleanup there were a number of areas that  
> different programmers implemted differently which were not covered  
> by the style guidelines.  Maybe there should be some guidelines to  
> cover these:

If you look at the webkit.opendarwin.org web site, there is a page  
for coding style guidelines:

http://webkit.opendarwin.org/coding/coding-style.html

> 6.  Not really knowing C, i wasn't sure what the '#if apple  
> changes' -- and other such  if constructs that xCode highlights in  
> red -- are for?  I wasn't sure if these should be indented like a  
> normal if statement?

The #if and #endif stuff are "pre-processor" directives.  Unlike  
Java, compiling C, C++, Obj-C, and Obj-C++ involves a "pre-processor"  
stage that processes the source code before the compiler parses it.   
The #include statements are processed during this stage as well (even  
though they're roughly equivalent to import statements in Java).

Dave


From curt.arnold at mac.com  Sat Jun 25 18:03:12 2005
From: curt.arnold at mac.com (Curt Arnold)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] DOM L2 HTML self-hosted tests
Message-ID: <72BD6C00-5004-4708-A949-EBA5ED301456@mac.com>

Apparently, self-hosted tests for L2 HTML were not previously  
generated, or if they had been the build had been broken for a  
while.  I've worked a couple of days getting the build process  
working for them and will commit the changes to the W3C CVS likely  
tomorrow.

run-webkit-tests had problems with two classes of tests, the  
HTMLAppletElement tests would stall.  Likely dump render tree wasn't  
expecting to render something with a Java applet.  To work around the  
problem, I didn't put those tests in the layout-tests directory.    
Safari passed them all when run manually.  The second problem was a  
crash in HTMLDocument17, 19, 20 and 21 which was a regression from  
Safari 412 and logged as bug 3713.  I patched by local copy with a  
hack to suppress the crash and allow the tests to complete.

HTMLLabelElement01-expected.txt:                text run at (2,2)  
width 30: "error"
HTMLLabelElement01-expected.txt:                text run at (2,2)  
width 145: "TypeError - Null value"

Regression, logged as Bug 3714.  HTMLLabelElement.form is null when  
it shouldn't be.

HTMLObjectElement01-expected.txt:                text run at (2,2)  
width 30: "error"
HTMLObjectElement01-expected.txt:                text run at (2,2)  
width 145: "TypeError - Null value"

Related but not regression, logged as Bug 3715.   
HTMLObjectElement.form is null when it shouldn't be.

HTMLBodyElement09-expected.txt:                text run at (2,2)  
width 40: "failure"
HTMLBodyElement10-expected.txt:                text run at (2,2)  
width 40: "failure"
HTMLDocument24-expected.txt:                text run at (2,2) width  
40: "failure"
HTMLDocument25-expected.txt:                text run at (2,2) width  
40: "failure"
hasFeature03-expected.txt:                text run at (2,2) width 40:  
"failure"
hasFeature04-expected.txt:                text run at (2,2) width 40:  
"failure"

Tests checking consistency of hasFeature("XHTML") and hasFeature("XML").
Also failed by Firefox, need to review the tests.


HTMLCollection07-expected.txt:                text run at (2,2) width  
40: "failure"
HTMLCollection08-expected.txt:                text run at (2,2) width  
40: "failure"

HTMLTableElement.rows is in document order, HTMLRowElement.rowIndex  
by position.
In the test document, document order and position are not the same,  
Safari
misses something.  Passed by Firefox, IE and Opera.

HTMLDocument04-expected.txt:                text run at (2,2) width  
40: "failure"

Failed consistently by Firefox and Safari in self-hosted, but passed  
in JSUnit.
Looks like self-hosted rendering error.  Will review.

HTMLElement113-expected.txt:                text run at (2,2) width  
40: "failure"
HTMLElement114-expected.txt:                text run at (2,2) width  
40: "failure"
HTMLElement142-expected.txt:                text run at (2,2) width  
40: "failure"
HTMLElement143-expected.txt:                text run at (2,2) width  
40: "failure"
HTMLElement26-expected.txt:                text run at (2,2) width  
40: "failure"
HTMLElement27-expected.txt:                text run at (2,2) width  
40: "failure"
HTMLElement55-expected.txt:                text run at (2,2) width  
40: "failure"
HTMLElement56-expected.txt:                text run at (2,2) width  
40: "failure"
HTMLElement84-expected.txt:                text run at (2,2) width  
40: "failure"
HTMLElement85-expected.txt:                text run at (2,2) width  
40: "failure"
HTMLInputElement21-expected.txt:                text run at (2,2)  
width 40: "failure"

All look like legitimate Safari problems, all tests passed by Firefox  
and IE.

HTMLIsIndexElement01-expected.txt:                text run at (2,2)  
width 40: "failure"
HTMLIsIndexElement02-expected.txt:                text run at (2,2)  
width 40: "failure"
HTMLIsIndexElement03-expected.txt:                text run at (2,2)  
width 40: "failure"

All passed by Firefox, IE fails all three.  Opera first two.  Needs  
more investigation.

HTMLScriptElement01-expected.txt:                text run at (2,2)  
width 40: "failure"
HTMLScriptElement02-expected.txt:                text run at (2,2)  
width 40: "failure"
HTMLScriptElement03-expected.txt:                text run at (2,2)  
width 40: "failure"
HTMLScriptElement04-expected.txt:                text run at (2,2)  
width 40: "failure"
HTMLScriptElement05-expected.txt:                text run at (2,2)  
width 40: "failure"
HTMLScriptElement06-expected.txt:                text run at (2,2)  
width 40: "failure"
HTMLScriptElement07-expected.txt:                text run at (2,2)  
width 40: "failure"

All appear to be production problems with self-hosted tests.  Firefox  
passes them
in JSUnit, fails them self-hosted.  Understandable since "self- 
hosting" injects new
script elements into test documents which would likely disrupt  
finding the script
element under test.


HTMLSelectElement20-expected.txt:                text run at (2,2)  
width 40: "failure"
HTMLTableColElement04-expected.txt:                text run at (2,2)  
width 40: "failure"
HTMLTableColElement06-expected.txt:                text run at (2,2)  
width 40: "failure"

Likely legitimate Safari problems.  Passed by Firefox and Opera.   
Failed by IE.


HTMLTableElement39-expected.txt:                text run at (2,2)  
width 40: "failure"

Failed by Firefox, IE and Safari.  Passed by Opera.  Will need to  
review. 

From mjs at apple.com  Sat Jun 25 23:06:57 2005
From: mjs at apple.com (Maciej Stachowiak)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] New hash template structure API design proposal
Message-ID: <61AA8517-8B2D-48BD-9193-3EF554BE462E@apple.com>


I've been planning for a while to make really good, high-performance  
generic HashSet and HashMap templates for WebCore, to replace the mix  
of QDict, QMap and hand-coded hashtables we have now.

Problems with the current situation are:

* QMap is too slow (algorithmically inefficient by design)
* The WebCore implementation of QDict is too slow, and non-portable
* QDict/QPtrDict is not nearly flexible enough
* Sprinkling the code with hand-coded hashtables sucks
* Even the forthcoming Qt 4.0 QHash will not cut it - it does not  
allow making multiple hashtables keyed by the same type but with  
different hash and equality functions (important for things like case  
insensitive string tables, or having pointer hashes with some other  
concept of equality than identity), and it seems likely to be  
inefficient for pointer types.


Here's my suggested replacement API. I would use these HashSet and  
HashMap templates for all situations in WebCore that require any kind  
of set or dictionary data structure, except when other types are  
required for classes that are part of the kde khtml API.

I've already started on this and have a HashSet that vaguely  
approximates this API.

One important point that is not clear just from the headers is that  
these classes have shared value semantics with refcounting and no  
copy-on-write.



// The defaultHash and defaultEqual template functions. would be  
specialized for all the interesting types.
template<typename _Key, unsigned _Hash(const _Key&) = defaultHash,  
bool _Equal(const _Key&, const _Key&) = defaultEqual>
class HashSet {
  public:
     typedef typename _Key KeyType;

     // all the obvious iterator operations, ++, --, *, ->, etc; all  
iterators are const since it would
     // almost certainly break the hashtable to replace a key in place
     class Iterator;

     HashSet();

     int size() const;
     bool isEmpty() const;

     Iterator begin() const;
     Iterator end() const;

     // If an item equal to "key" is already present in the table, it  
is left in and not replaced
     Iterator insert(const KeyType& key);

     // a special version of insert() that finds the object by  
hashing and comparing with some other type,
     // to avoid the cost of type conversion if the object is already  
in the table - useful for making efficient
     // unique object factories
     template<typename T, unsigned HashT(const T&), bool EqualT(const  
KeyType&, const T&), KeyType ConvertT(const T&, unsigned)> Iterator  
insert(const T& key);

     Iterator find(const KeyType& key) const;
     bool contains(const KeyType& key) const;
     void remove(const KeyType& key);
     void clear();
}


template<typename _Key, typename _Value, unsigned _Hash(const _Key&)  
= defaultHash, bool _Equal(const _Key&, const _Key&) = defaultEqual>
class HashMap {
  public:
     typedef typename _Key KeyType;
     typedef typename _Value ValueType;

     // ?? should it iterate keys, values, key/value pairs? The last  
would be good but then we'd have to define
     // a pair type (or bite the bullet and use std::pair)
     class Iterator;

     HashMap();

     int size() const;
     bool isEmpty() const;

     Iterator begin() const;
     Iterator end() const;

     // If an item equal to "key" is already present in the table, it  
is left in and not replaced
     Iterator insert(const KeyType &key, const ValueType &value);

     // ?? is the template version of insert ever needed for a map as  
opposed to a set?

     const ValueType& operator[](const KeyType&) const;
     Iterator find(const KeyType&) const;
     void remove(const KeyType&);
     void clear();
}

From ddkilzer at kilzer.net  Sun Jun 26 05:22:21 2005
From: ddkilzer at kilzer.net (David D. Kilzer)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] New hash template structure API design proposal
In-Reply-To: <61AA8517-8B2D-48BD-9193-3EF554BE462E@apple.com>
References: <61AA8517-8B2D-48BD-9193-3EF554BE462E@apple.com>
Message-ID: <8207F429-2B5D-4FA8-9598-A8A60C9D414C@kilzer.net>

Google recently released a SparseHash project to SourceForge that's  
implemented in C++ with a BSD license.

   "An extremely memory-efficient hash_map implementation.
   2 bits/entry overhead! The SparseHash library contains
   several hash-map implementations, including implementations
   that optimize for space or speed."

   http://sourceforge.net/projects/goog-sparsehash/

It's still in beta, though, at version 0.2.

Dave


On Jun 26, 2005, at 1:06 AM, Maciej Stachowiak wrote:

> I've been planning for a while to make really good, high- 
> performance generic HashSet and HashMap templates for WebCore, to  
> replace the mix of QDict, QMap and hand-coded hashtables we have now.
>
> Problems with the current situation are:
>
> * QMap is too slow (algorithmically inefficient by design)
> * The WebCore implementation of QDict is too slow, and non-portable
> * QDict/QPtrDict is not nearly flexible enough
> * Sprinkling the code with hand-coded hashtables sucks
> * Even the forthcoming Qt 4.0 QHash will not cut it - it does not  
> allow making multiple hashtables keyed by the same type but with  
> different hash and equality functions (important for things like  
> case insensitive string tables, or having pointer hashes with some  
> other concept of equality than identity), and it seems likely to be  
> inefficient for pointer types.
>
> [...]


From devlists at softchaos.com  Sun Jun 26 11:18:48 2005
From: devlists at softchaos.com (Matt Gough)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] khtml/css/parser_wrapper.cpp not in cvs?
Message-ID: <C6617A9D-E587-4828-B53D-CF1A4E22C0A6@softchaos.com>

Trying to build WebKit, it fails when it comes to khtml/css/ 
parser_wrapper.cpp since there is no such file. This is after an  
update-webkit.

Is it just me?

Matt Gough

From kevin at sb.org  Sun Jun 26 12:36:03 2005
From: kevin at sb.org (Kevin Ballard)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] khtml/css/parser_wrapper.cpp not in cvs?
In-Reply-To: <C6617A9D-E587-4828-B53D-CF1A4E22C0A6@softchaos.com>
References: <C6617A9D-E587-4828-B53D-CF1A4E22C0A6@softchaos.com>
Message-ID: <79955B7A-7827-4506-9DC3-6AC80AA8D90E@sb.org>

I think that's supposed to be generated by a script phase, or  
something. Try doing a clean build (i.e. wipe your WebKitBuild dir(s?)).

On Jun 26, 2005, at 2:18 PM, Matt Gough wrote:

> Trying to build WebKit, it fails when it comes to khtml/css/ 
> parser_wrapper.cpp since there is no such file. This is after an  
> update-webkit.
>
> Is it just me?

-- 
Kevin Ballard
kevin@sb.org
http://www.tildesoft.com
http://kevin.sb.org

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2378 bytes
Desc: not available
Url : http://lists.macosforge.org/pipermail/webkit-dev/attachments/20050626/63926a21/smime.bin
From curt.arnold at mac.com  Sun Jun 26 17:04:18 2005
From: curt.arnold at mac.com (Curt Arnold)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] khtml/css/parser_wrapper.cpp not in cvs?
In-Reply-To: <C6617A9D-E587-4828-B53D-CF1A4E22C0A6@softchaos.com>
References: <C6617A9D-E587-4828-B53D-CF1A4E22C0A6@softchaos.com>
Message-ID: <E8AC7B8C-0BCA-44F7-83B0-32E6ABCDB1BE@mac.com>

I had a similar experience yesterday after an update-webkit (though I  
don't recall the file and didn't investigate).  A fresh checkout  
built fine.


On Jun 26, 2005, at 1:18 PM, Matt Gough wrote:

> Trying to build WebKit, it fails when it comes to khtml/css/ 
> parser_wrapper.cpp since there is no such file. This is after an  
> update-webkit.
>
> Is it just me?
>
> Matt Gough
> _______________________________________________
> webkit-dev mailing list
> webkit-dev@opendarwin.org
> http://www.opendarwin.org/mailman/listinfo/webkit-dev
>


From timothy at hatcher.name  Sun Jun 26 17:59:28 2005
From: timothy at hatcher.name (Timothy Hatcher)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] khtml/css/parser_wrapper.cpp not in cvs?
In-Reply-To: <E8AC7B8C-0BCA-44F7-83B0-32E6ABCDB1BE@mac.com>
References: <C6617A9D-E587-4828-B53D-CF1A4E22C0A6@softchaos.com>
	<E8AC7B8C-0BCA-44F7-83B0-32E6ABCDB1BE@mac.com>
Message-ID: <96568EDF-F501-4E80-A5AD-F6AB960EA956@hatcher.name>

Make sure you don't have an updated Xcode (.xcodeproj) file sitting  
in the WebCore directory. The .pbproj was updated and the change wont  
be reflected in the .xcodeproj. Delete the .xcodeproj and let Xcode  
convert a new one if you need it. The build-webkit script could be  
modified to pass the -project arg, preventing this.

? Timothy Hatcher ? colloquy.info

On Jun 26, 2005, at 8:04 PM, Curt Arnold wrote:

> I had a similar experience yesterday after an update-webkit (though  
> I don't recall the file and didn't investigate).  A fresh checkout  
> built fine.
>
>
> On Jun 26, 2005, at 1:18 PM, Matt Gough wrote:
>
>
>> Trying to build WebKit, it fails when it comes to khtml/css/ 
>> parser_wrapper.cpp since there is no such file. This is after an  
>> update-webkit.
>>
>> Is it just me?
>>
>> Matt Gough
>> _______________________________________________
>> webkit-dev mailing list
>> webkit-dev@opendarwin.org
>> http://www.opendarwin.org/mailman/listinfo/webkit-dev
>>
>>
>
> _______________________________________________
> webkit-dev mailing list
> webkit-dev@opendarwin.org
> http://www.opendarwin.org/mailman/listinfo/webkit-dev
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.macosforge.org/pipermail/webkit-dev/attachments/20050626/be4f0554/attachment.html
From darin at apple.com  Sun Jun 26 21:41:49 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] khtml/css/parser_wrapper.cpp not in cvs?
In-Reply-To: <96568EDF-F501-4E80-A5AD-F6AB960EA956@hatcher.name>
References: <C6617A9D-E587-4828-B53D-CF1A4E22C0A6@softchaos.com>
	<E8AC7B8C-0BCA-44F7-83B0-32E6ABCDB1BE@mac.com>
	<96568EDF-F501-4E80-A5AD-F6AB960EA956@hatcher.name>
Message-ID: <00495F73-D022-475A-A59A-964D5899F4C7@apple.com>

On Jun 26, 2005, at 12:36 PM, Kevin Ballard wrote:

> On Jun 26, 2005, at 2:18 PM, Matt Gough wrote:
>
>> Trying to build WebKit, it fails when it comes to khtml/css/ 
>> parser_wrapper.cpp since there is no such file.
>
> I think that's supposed to be generated by a script phase, or  
> something. Try doing a clean build (i.e. wipe your WebKitBuild dir 
> (s?)).

It used to be a generated file -- now it's not used by the project at  
all.

On Jun 26, 2005, at 5:59 PM, Timothy Hatcher wrote:

> Make sure you don't have an updated Xcode (.xcodeproj) file sitting  
> in the WebCore directory. The .pbproj was updated and the change  
> wont be reflected in the .xcodeproj.

I think this is the correct theory about what's going wrong. You'll  
have trouble any time we change the project if you have an updated  
project there.

> Delete the .xcodeproj and let Xcode convert a new one if you need  
> it. The build-webkit script could be modified to pass the -project  
> arg, preventing this.

I'll make that change to the build scripts.

     -- Darin


From darin at apple.com  Sun Jun 26 21:41:49 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] khtml/css/parser_wrapper.cpp not in cvs?
In-Reply-To: <96568EDF-F501-4E80-A5AD-F6AB960EA956@hatcher.name>
References: <C6617A9D-E587-4828-B53D-CF1A4E22C0A6@softchaos.com>
	<E8AC7B8C-0BCA-44F7-83B0-32E6ABCDB1BE@mac.com>
	<96568EDF-F501-4E80-A5AD-F6AB960EA956@hatcher.name>
Message-ID: <00495F73-D022-475A-A59A-964D5899F4C7@apple.com>

On Jun 26, 2005, at 12:36 PM, Kevin Ballard wrote:

> On Jun 26, 2005, at 2:18 PM, Matt Gough wrote:
>
>> Trying to build WebKit, it fails when it comes to khtml/css/ 
>> parser_wrapper.cpp since there is no such file.
>
> I think that's supposed to be generated by a script phase, or  
> something. Try doing a clean build (i.e. wipe your WebKitBuild dir 
> (s?)).

It used to be a generated file -- now it's not used by the project at  
all.

On Jun 26, 2005, at 5:59 PM, Timothy Hatcher wrote:

> Make sure you don't have an updated Xcode (.xcodeproj) file sitting  
> in the WebCore directory. The .pbproj was updated and the change  
> wont be reflected in the .xcodeproj.

I think this is the correct theory about what's going wrong. You'll  
have trouble any time we change the project if you have an updated  
project there.

> Delete the .xcodeproj and let Xcode convert a new one if you need  
> it. The build-webkit script could be modified to pass the -project  
> arg, preventing this.

I'll make that change to the build scripts.

     -- Darin


From mjs at apple.com  Mon Jun 27 01:49:14 2005
From: mjs at apple.com (Maciej Stachowiak)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] New hash template structure API design proposal
In-Reply-To: <8207F429-2B5D-4FA8-9598-A8A60C9D414C@kilzer.net>
References: <61AA8517-8B2D-48BD-9193-3EF554BE462E@apple.com>
	<8207F429-2B5D-4FA8-9598-A8A60C9D414C@kilzer.net>
Message-ID: <6D3D5987-AD3C-4AB7-9847-9FFB47FA644B@apple.com>


On Jun 26, 2005, at 5:22 AM, David D. Kilzer wrote:

> Google recently released a SparseHash project to SourceForge that's  
> implemented in C++ with a BSD license.
>
>   "An extremely memory-efficient hash_map implementation.
>   2 bits/entry overhead! The SparseHash library contains
>   several hash-map implementations, including implementations
>   that optimize for space or speed."
>
>   http://sourceforge.net/projects/goog-sparsehash/

Cool, I'm looking at it. Thanks for the pointer!

It looks like their "dense_hash_map" uses the same design I was  
planning, storing the values inline and requiring distinguished  
values for empty and deleted buckets. Most C++ hashtable templates  
(including the gcc implementation of hash_map) use separately  
allocated nodes for the data. This makes it easier to put more of the  
implementation in non-template code without losing a lot of speed,  
but it is much slower, since you must allocate for every insertion.

sparse_hash_map is very interesting and could be useful in places  
where saving memory is more important than access speed.

I will add, however, that the included hash functions are pretty weak.

Regards,
Maciej


From curt.arnold at mac.com  Mon Jun 27 07:49:38 2005
From: curt.arnold at mac.com (Curt Arnold)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] DOM L2 HTML self-hosted tests
Message-ID: <39C703B5-FDEF-4F45-B26B-EC1E42E2AC4E@mac.com>

     From:       curt.arnold@mac.com
     Subject:     Re: [webkit-dev] DOM L2 HTML self-hosted tests
     Date:     June 27, 2005 2:32:22 AM CDT
     To:       curt.arnold@mac.com


On Jun 25, 2005, at 8:03 PM, Curt Arnold wrote:


> Apparently, self-hosted tests for L2 HTML were not previously  
> generated, or if they had been the build had been broken for a  
> while.  I've worked a couple of days getting the build process  
> working for them and will commit the changes to the W3C CVS likely  
> tomorrow.
>
>

Committed changes to the W3C CVS to fix the self-hosted productions  
for L2 HTML test suite.  Updated my "unofficial nightly" build at  
http://homepage.mac.com/curt.arnold/FileSharing1.html.  Should be  
simple (but time-consuming) to build from the CVS.  Download Ant  
1.6.5 from http://ant.apache.org then:

cvs -d :pserver:anonymous@dev.w3.org:/sources/public login
     anonymous
cvs :pserver:anonymous@dev.w3.org:/sources/public co 2001/DOM-Test-Suite
setenv ANT_OPTS -Xmx900M
cd 2001/DOM-Test-Suite
ant dom2-html-gen-selfhtml

ANT_OPTS is needed to increase memory in Java VM to avoid "Out of  
Memory" error during transforms.




> HTMLDocument04-expected.txt:                text run at (2,2) width  
> 40: "failure"
>
> Failed consistently by Firefox and Safari in self-hosted, but  
> passed in JSUnit.
> Looks like self-hosted rendering error.  Will review.
>
>
...


> HTMLScriptElement01-expected.txt:                text run at (2,2)  
> width 40: "failure"
> HTMLScriptElement02-expected.txt:                text run at (2,2)  
> width 40: "failure"
> HTMLScriptElement03-expected.txt:                text run at (2,2)  
> width 40: "failure"
> HTMLScriptElement04-expected.txt:                text run at (2,2)  
> width 40: "failure"
> HTMLScriptElement05-expected.txt:                text run at (2,2)  
> width 40: "failure"
> HTMLScriptElement06-expected.txt:                text run at (2,2)  
> width 40: "failure"
> HTMLScriptElement07-expected.txt:                text run at (2,2)  
> width 40: "failure"
>
> All appear to be production problems with self-hosted tests.   
> Firefox passes them
> in JSUnit, fails them self-hosted.  Understandable since "self- 
> hosting" injects new
> script elements into test documents which would likely disrupt  
> finding the script
> element under test.
>


The build.xml file will correct for the changed expectations due to  
the change of the document URL and injection of additional script  
elements.  After those changes, Safari still fails  
"HTMLScriptElement01".  The test expects HTMLScriptElement.text to  
contain the text of the script which Firefox, IE and Opera return.   
Safari returns "".


From kevino at theolliviers.com  Mon Jun 27 17:51:58 2005
From: kevino at theolliviers.com (Kevin Ollivier)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] Widget / Drawing API thoughts
In-Reply-To: <AE6E9D82-6858-4EDA-BF8B-B750D5115AE7@apple.com>
References: <42AA1109.6030602@xiondigital.net>
	<6D90642E-EFC0-4D32-BF5C-07D39A568F69@theolliviers.com>
	<3ECA98AE-3223-43B9-AE75-BFB606B0BB99@apple.com>
	<d5c05437050620140638f84f89@mail.gmail.com>
	<BC78A485-BF12-43B5-8EB9-6D911FC10CEA@apple.com>
	<F84F3A4F-DF99-4933-BC98-FB3628B44801@theolliviers.com>
	<AE6E9D82-6858-4EDA-BF8B-B750D5115AE7@apple.com>
Message-ID: <A5803F9B-081B-4898-BE29-C1FEECD1E0BB@theolliviers.com>

Hi Maciej,

On Jun 21, 2005, at 1:36 AM, Maciej Stachowiak wrote:

[snip]

> For OS X at least, we intend to make the controls look and feel  
> just like the native ones to a pretty exacting level of detail. We  
> will only fall back to a generic look if the page specifies custom  
> styling info, this is desirable for web compatibility in any case.  
> So please do not assume the themed controls will look lame and  
> generic. In fact, I believe the Firefox controls look and feel very  
> much like the native ones on Windows, and even respect Windows  
> theming.

Sorry, I never meant to imply they would look lame and generic, but  
as you point out with Firefox, they put more effort into maintaining  
Windows theming than Mac theming. Thus the Firefox buttons look like  
Windows buttons, which is great on Windows but not much help on Mac.  
(Or take IE for Mac, where they still have Classic-style controls.)  
In this case, things would be the opposite way around. You could now  
see aqua (or possibly generic) buttons on, say, Windows, where it  
would look just as awkward as Firefox controls do on Mac.

> That being said, I can see how it might be a tough technical  
> challenge for some toolkits to implement the theme API, especially  
> multiplatform toolkits that rely on native widgets under the  
> covers. I am not sure what to do about that, as maintaininga dual- 
> track approach to form controls is likely to be painful in the long  
> run.

The challenge for us is not that we can't use native widgets, it's  
that emulating them successfully on several platforms, and platform  
versions, is a significant challenge. We'd have to be able to  
correctly emulate native look and feel for several GUI toolkits, and  
each major version of those toolkits that are still supported (along  
with special issues like themes on some platforms). If we can't make  
that work, which is likely too much work to get right, we'd have to  
settle for a button that's generic on almost all platforms. In short,  
maintaining emulated native controls for all these combinations, and  
getting it right, looks to be a pretty significant challenge. A lot  
of work that just using the native controls would save us the trouble  
of doing.

I don't know the API you're thinking of at the moment, so I can't  
really say how difficult this would be, but IMHO it would be ideal if  
we could come up with some way to at least have the option of letting  
a port use generic or native controls. Perhaps have a QPushButton  
that can optionally be set to use a theme or become "non-native" if  
it's given style properties, making the native/non-native distinction  
an implementation detail?

Thanks,

Kevin

> Regards,
> Maciej
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.macosforge.org/pipermail/webkit-dev/attachments/20050627/9246f8c6/attachment.html
From timothy at hatcher.name  Mon Jun 27 17:54:22 2005
From: timothy at hatcher.name (Timothy Hatcher)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] WebKitTools Script Proposal
Message-ID: <159B198B-A271-4DCD-8A49-4608E6E4117C@hatcher.name>

I'm sure I am not the only one that reorganizes his Applications  
folder (e.g. by sub-folder categories like Network, Text, Office,  
etc). How about adding a environment variable that lets anyone  
override the $safariPath that is used in the various scripts. (Since  
right now most of us resort to modifying the scripts individually.)

$ENV{WEBKIT_SAFARI_LOCATION} sound good?

I can put together a patch if this would be of general interest.

On similar lines, how about a general script "run-webkit-based-app"?  
The script can take an argument to an application bundle, or the  
executable in the bundle (I say test for both cases.) This would give  
easy access to users and developers that wish to run their favorite  
WebKit enabled application with the CVS builds. (I have been asked a  
few times in #colloquy how to get this going.) I personally have a  
modified run-safari script for Colloquy, but a general script would  
help more casual users.

I'm curious what you all think.

? Timothy Hatcher ? colloquy.info

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.macosforge.org/pipermail/webkit-dev/attachments/20050627/8f9a4d67/attachment.html
From timothy at hatcher.name  Mon Jun 27 18:14:34 2005
From: timothy at hatcher.name (Timothy Hatcher)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] Widget / Drawing API thoughts
In-Reply-To: <A5803F9B-081B-4898-BE29-C1FEECD1E0BB@theolliviers.com>
References: <42AA1109.6030602@xiondigital.net>
	<6D90642E-EFC0-4D32-BF5C-07D39A568F69@theolliviers.com>
	<3ECA98AE-3223-43B9-AE75-BFB606B0BB99@apple.com>
	<d5c05437050620140638f84f89@mail.gmail.com>
	<BC78A485-BF12-43B5-8EB9-6D911FC10CEA@apple.com>
	<F84F3A4F-DF99-4933-BC98-FB3628B44801@theolliviers.com>
	<AE6E9D82-6858-4EDA-BF8B-B750D5115AE7@apple.com>
	<A5803F9B-081B-4898-BE29-C1FEECD1E0BB@theolliviers.com>
Message-ID: <D166AF54-774C-48EB-8F60-CE94862F2328@hatcher.name>

On Jun 21, 2005, at 10:36 PM, Maciej Stachowiak wrote:


>> For OS X at least, we intend to make the controls look and feel  
>> just like the native ones to a pretty exacting level of detail. We  
>> will only fall back to a generic look if the page specifies custom  
>> styling info, this is desirable for web compatibility in any case.

On Jun 27, 2005, at 8:51 PM, Kevin Ollivier wrote:

> Perhaps have a QPushButton that can optionally be set to use a  
> theme or become "non-native" if it's given style properties, making  
> the native/non-native distinction an implementation detail?

This is what I original thought of when I started reading this post.  
If a CSS file starts requesting specific visual changes (aside from  
margins, and maybe even padding for some controls) switch over to a  
non-native, fully styleable control (ala the <button> tag vs <input  
type="button">). In my web design experience it is typically an all  
or nothing game, either the designer wants to tweak the control in  
every direction visually, or no form control selectors at all. (This  
isn't always the case, but likely the majority.)

That mix-and-match middle ground is where it gets shaky. Mac OS X  
native elements can control text-color and background (color only).  
So does that mean you would or would-not switch to non-native if the  
native controls are capable of handling the style request? (This  
would obviously be platform dependent, with Mac OS X controls being  
the least styleable of most platforms.)

And if one form control is styled, but the rest of the controls  
aren't, do you use the same control drawing API for all? (I would  
assume yes, to be semi-consistent. Most designers would style all  
controls typically.)

Sorry if I strayed too far from the implementation aspect of this  
thread, but the design aspect should be brought up.

? Timothy Hatcher ? colloquy.info
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.macosforge.org/pipermail/webkit-dev/attachments/20050627/7354000f/attachment.html
From ap-carbon at rambler.ru  Mon Jun 27 22:03:49 2005
From: ap-carbon at rambler.ru (Alexey Proskuryakov)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] Fixing Accept-Language
Message-ID: <web-10428934@mail7.rambler.ru>

Hi all,

   I've started working on a fix to what WebKit sends in Accept-Language HTTP 
header, and immediately noticed that it doesn't send anything, relying on an 
NSURLConnection default. This is strange, because WebKit needs to know what is 
being sent in this header for proper caching (apparently, that's broken now, 
though I haven't performed real-life tests, and may have overlooked 
something).

   I see several approaches to the problem, and would like to discuss their 
strong and weak sides before moving on with coding.

1. Do nothing, wait for a fix in NSURLConnection. Downsides: may take a lot of 
time; not clear what to do with caching.

2. Add a proper Accept-Language header when creating an NSURLRequest, thus 
overriding the default. Downsides: duplicates work that should be eventually 
done in NSURLConnection, yet not in a cross-platform way.

3. Generate the Accept-Language header in a cross-platform manner. Downsides: 
looks like a rather serious rework of code, which I do not feel qualified to 
attempt yet; there's no automatic way to generate the whole list of preferred 
languages on other platforms.

   If it is believed to be an adequate solution, I could do #2.

- WBR, Alexey Proskuryakov

From darin at apple.com  Tue Jun 28 10:03:32 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] WebKitTools Script Proposal
In-Reply-To: <159B198B-A271-4DCD-8A49-4608E6E4117C@hatcher.name>
References: <159B198B-A271-4DCD-8A49-4608E6E4117C@hatcher.name>
Message-ID: <699C9A3C-6DB5-4B4E-9286-135DC91BEBBE@apple.com>

On Jun 27, 2005, at 5:54 PM, Timothy Hatcher wrote:

> I'm sure I am not the only one that reorganizes his Applications  
> folder (e.g. by sub-folder categories like Network, Text, Office,  
> etc). How about adding a environment variable that lets anyone  
> override the $safariPath that is used in the various scripts.  
> (Since right now most of us resort to modifying the scripts  
> individually.)
>
> $ENV{WEBKIT_SAFARI_LOCATION} sound good?
>
> I can put together a patch if this would be of general interest.

Sounds fine; I'd just call it WEBKIT_SAFARI, and have it be the path  
to Safari.app, including the name "Safari.app".

> On similar lines, how about a general script "run-webkit-based- 
> app"? The script can take an argument to an application bundle, or  
> the executable in the bundle (I say test for both cases.) This  
> would give easy access to users and developers that wish to run  
> their favorite WebKit enabled application with the CVS builds. (I  
> have been asked a few times in #colloquy how to get this going.) I  
> personally have a modified run-safari script for Colloquy, but a  
> general script would help more casual users.

This doesn't seem so useful to me. This is would be a script that  
sets one environment variable, DYLD_FRAMEWORK_PATH. I think people  
can make their own.

But I could be wrong -- I'd be happy to take a patch with this script  
if many people found it useful.

     -- Darin


From darin at apple.com  Tue Jun 28 10:06:43 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] Widget / Drawing API thoughts
In-Reply-To: <D166AF54-774C-48EB-8F60-CE94862F2328@hatcher.name>
References: <42AA1109.6030602@xiondigital.net>
	<6D90642E-EFC0-4D32-BF5C-07D39A568F69@theolliviers.com>
	<3ECA98AE-3223-43B9-AE75-BFB606B0BB99@apple.com>
	<d5c05437050620140638f84f89@mail.gmail.com>
	<BC78A485-BF12-43B5-8EB9-6D911FC10CEA@apple.com>
	<F84F3A4F-DF99-4933-BC98-FB3628B44801@theolliviers.com>
	<AE6E9D82-6858-4EDA-BF8B-B750D5115AE7@apple.com>
	<A5803F9B-081B-4898-BE29-C1FEECD1E0BB@theolliviers.com>
	<D166AF54-774C-48EB-8F60-CE94862F2328@hatcher.name>
Message-ID: <F4739E08-18E6-4D9B-BA82-FABBE71AAB72@apple.com>

On Jun 27, 2005, at 6:14 PM, Timothy Hatcher wrote:

> If a CSS file starts requesting specific visual changes (aside from  
> margins, and maybe even padding for some controls) switch over to a  
> non-native, fully styleable control (ala the <button> tag vs <input  
> type="button">). In my web design experience it is typically an all  
> or nothing game, either the designer wants to tweak the control in  
> every direction visually, or no form control selectors at all.  
> (This isn't always the case, but likely the majority.)

Yes, this is what we have in mind. Dave Hyatt and I have been talking  
about this basic approach for at least the last couple of years. I  
also think there should be a CSS property that explicitly sets the  
switch. The "automatic switchover" would be the default, but you  
could override the heuristic with the CSS property.

> That mix-and-match middle ground is where it gets shaky. Mac OS X  
> native elements can control text-color and background (color only).  
> So does that mean you would or would-not switch to non-native if  
> the native controls are capable of handling the style request?  
> (This would obviously be platform dependent, with Mac OS X controls  
> being the least styleable of most platforms.)

Also consider that WebKit could easily have Mac OS X styled controls  
that are even more styleable than the native ones. It is indeed a  
complicated issue when to switch over to "more-generic" controls.  
It's not even clear that there's a true concept of "more-generic- 
looking". In practice maximum compatibility probably means something  
more like "make the controls look exactly like Windows".

> And if one form control is styled, but the rest of the controls  
> aren't, do you use the same control drawing API for all? (I would  
> assume yes, to be semi-consistent. Most designers would style all  
> controls typically.)

At the moment, the style of one element doesn't affect the appearance  
of other elements on the same page. So some page-wide heuristic is  
tricky, but I can see how that would be nice.

     -- Darin


From darin at apple.com  Tue Jun 28 10:24:15 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] Fixing Accept-Language
In-Reply-To: <web-10428934@mail7.rambler.ru>
References: <web-10428934@mail7.rambler.ru>
Message-ID: <A24EB6E2-6B15-476C-8C84-6C85BC6D4974@apple.com>

On Jun 27, 2005, at 10:03 PM, Alexey Proskuryakov wrote:

> 1. Do nothing, wait for a fix in NSURLConnection. Downsides: may  
> take a lot of time; not clear what to do with caching.
>
> 2. Add a proper Accept-Language header when creating an  
> NSURLRequest, thus overriding the default. Downsides: duplicates  
> work that should be eventually done in NSURLConnection, yet not in  
> a cross-platform way.

What is a "proper" Accept-Language header? Older versions of  
NSURLConnection used to send the complete list of languages specified  
in the System Preferences. This created major compatibility headaches  
with many websites, including sites assuming the user was coming from  
Germany just because German was one of the listed languages, and web  
servers that choked on anything but the simplest . We ended up  
dumbing down this header to match more closely what other browsers  
send to resolve the compatibility problems.

If something's broken about this header, I suggest fixing it in  
NSURLConnection; if there's a need for WebKit to get the header then  
we can change NSURLConnection API so that you can query the header  
value. Adding code in WebKit to work around the fact that a newer  
NSURLConnection is not available yet sounds OK too.

     -- Darin


From ap-carbon at rambler.ru  Tue Jun 28 11:12:10 2005
From: ap-carbon at rambler.ru (Alexey Proskuryakov)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] Fixing Accept-Language
In-Reply-To: <A24EB6E2-6B15-476C-8C84-6C85BC6D4974@apple.com>
References: <web-10428934@mail7.rambler.ru>
	<A24EB6E2-6B15-476C-8C84-6C85BC6D4974@apple.com>
Message-ID: <web-10616193@mail7.rambler.ru>

On Tue, 28 Jun 2005 10:24:15 -0700 Darin Adler <darin@apple.com> wrote:

>> 2. Add a proper Accept-Language header when creating an  
>> NSURLRequest, thus overriding the default. Downsides: duplicates  
>> work that should be eventually done in NSURLConnection, yet not in  
>> a cross-platform way.
> 
> What is a "proper" Accept-Language header? Older versions of 
> NSURLConnection used to send the complete list of languages specified  in 
>the System Preferences. 

   By proper, I meant:
1) Yes, I intended to send the complete list of preferred languages.
2) Send the same language codes that other browsers do (e.g., Safari sends 
"ru-ru" instead of "ru", and this breaks Outlook Web Access, rdar://4076004).

> This created major compatibility headaches  with many 
>websites, including sites assuming the user was coming from  Germany just 
>because German was one of the listed languages, and web  servers that choked 
>on anything but the simplest . We ended up  dumbing down this header to match 
>more closely what other browsers  send to resolve the compatibility problems.

   I see... I remember that the old implementation had several other issues 
(such as, but not solely, Japanese always getting a huge weight, breaking some 
Adobe pages). The current one also has some drawbacks 
(http://bugzilla.opendarwin.org/show_bug.cgi?id=3510). And since the default 
in Mozilla is two languages (en-us plus en), the servers that only accept the 
simplest form probably wouldn't work with Mozilla/Firefox, too?

   I absolutely agree that it's ultimately a matter of real world compliance. 
Is it possible to disclose some of the examples that led to the aforementioned 
change? That would make regression testing a lot easier.

> If something's broken about this header, I suggest fixing it in 
> NSURLConnection; if there's a need for WebKit to get the header then  we can 
>change NSURLConnection API so that you can query the header  value. Adding 
>code in WebKit to work around the fact that a newer  NSURLConnection is not 
>available yet sounds OK too.

   OK, I'll do the latter if we come to any conclusion as to what the proper 
Accept-Language header should be.

- WBR, Alexey Proskuryakov

From darin at apple.com  Tue Jun 28 11:32:48 2005
From: darin at apple.com (Darin Adler)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] Fixing Accept-Language
In-Reply-To: <web-10616193@mail7.rambler.ru>
References: <web-10428934@mail7.rambler.ru>
	<A24EB6E2-6B15-476C-8C84-6C85BC6D4974@apple.com>
	<web-10616193@mail7.rambler.ru>
Message-ID: <EFE67E04-F3BE-49AB-8D08-5D95E623AFCE@apple.com>

On Jun 28, 2005, at 11:12 AM, Alexey Proskuryakov wrote:

> 1) Yes, I intended to send the complete list of preferred languages.

 From the early days of the Safari project, we've seen problems with  
long Accept-Language header fields.

This server failed but started working once we set a maximum length  
of 255:

     http://www.ireland.travel.ie

These servers generated a "Server Error" with older versions of  
Safari; I believe they use "Netscape Directory Gateway":

     http://query.directory.cornell.edu/dsgw/pbhtml/
     http://directory.princeton.edu/
     http://co.stanford.edu/ds/lang/auth.html
     http://ldap.chapman.edu/ds/search
     http://calendar.gwu.edu/ds/search
     http://gun.teipir.gr/ds/csearch

Here's another site that failed:

     http://www.dirtypictureshow.com/

Any of these sites may have been changed.

If you include German in your list of languages, eBay will not allow  
access to certain items, see <http://docs.info.apple.com/article.html? 
artnum=107877>.

> 2) Send the same language codes that other browsers do (e.g.,  
> Safari sends "ru-ru" instead of "ru", and this breaks Outlook Web  
> Access, rdar://4076004).

Sure, we should definitely fix this.

> (such as, but not solely, Japanese always getting a huge weight,  
> breaking some Adobe pages)

Perhaps what you're referring to here is the fact that Japanese was  
always listed as second on the list. As far as I know, it always had  
a correct weight. That code was removed because the reason for it was  
finally fixed, but then before Tiger shipped we ended up "dumbing  
down" the string even more because of the requests above.

> The current one also has some drawbacks (http:// 
> bugzilla.opendarwin.org/show_bug.cgi?id=3510).

Good point. We probably went too far in "dumbing down" the string --  
designing a new string for maximum compatibility will be a challenge.  
Implementing it shouldn't be too hard, though.

> And since the default in Mozilla is two languages (en-us plus en),  
> the servers that only accept the simplest form probably wouldn't  
> work with Mozilla/Firefox, too?

I didn't know that was the Mozilla default.

I must admit that I have not "tested the Internet" to find all the  
sites that work or don't work. But I will say that there are some  
sites that work with IE and Safari, but not Mozilla, believe it or not!

> I absolutely agree that it's ultimately a matter of real world  
> compliance. Is it possible to disclose some of the examples that  
> led to the aforementioned change? That would make regression  
> testing a lot easier.

Those examples above are not necessarily a complete list, but I hope  
they help.

>> If something's broken about this header, I suggest fixing it in  
>> NSURLConnection; if there's a need for WebKit to get the header  
>> then  we can change NSURLConnection API so that you can query the  
>> header  value. Adding code in WebKit to work around the fact that  
>> a newer  NSURLConnection is not available yet sounds OK too.
>
> OK, I'll do the latter if we come to any conclusion as to what the  
> proper Accept-Language header should be.

We'll figure out what to do once that patch is submitted.

I want to be careful to not just put fixes into WebKit because that's  
open source. In most cases we don't want to work around broken things  
elsewhere in Mac OS X, but instead fix them.

     -- Darin


From kevin at sb.org  Tue Jun 28 20:32:03 2005
From: kevin at sb.org (Kevin Ballard)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] WebKitTools Script Proposal
In-Reply-To: <699C9A3C-6DB5-4B4E-9286-135DC91BEBBE@apple.com>
References: <159B198B-A271-4DCD-8A49-4608E6E4117C@hatcher.name>
	<699C9A3C-6DB5-4B4E-9286-135DC91BEBBE@apple.com>
Message-ID: <3B5CC97A-645B-423C-9328-1B5DF56E9818@sb.org>

On Jun 28, 2005, at 1:03 PM, Darin Adler wrote:

>> On similar lines, how about a general script "run-webkit-based- 
>> app"? The script can take an argument to an application bundle, or  
>> the executable in the bundle (I say test for both cases.) This  
>> would give easy access to users and developers that wish to run  
>> their favorite WebKit enabled application with the CVS builds. (I  
>> have been asked a few times in #colloquy how to get this going.) I  
>> personally have a modified run-safari script for Colloquy, but a  
>> general script would help more casual users.
>>
>
> This doesn't seem so useful to me. This is would be a script that  
> sets one environment variable, DYLD_FRAMEWORK_PATH. I think people  
> can make their own.
>
> But I could be wrong -- I'd be happy to take a patch with this  
> script if many people found it useful.

I would suggest instead a script that takes the *name* of an app and  
searches the LaunchServices database for it and launches that with  
DYLD_FRAMEWORK_PATH set. That way someone could just type `run-webkit- 
app Colloquy` and have it work right.

-- 
Kevin Ballard
kevin@sb.org
http://www.tildesoft.com
http://kevin.sb.org

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2378 bytes
Desc: not available
Url : http://lists.macosforge.org/pipermail/webkit-dev/attachments/20050628/ccbf5bec/smime.bin
From eseidel at apple.com  Tue Jun 28 21:23:01 2005
From: eseidel at apple.com (Eric Seidel)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] WebKitTools Script Proposal
In-Reply-To: <3B5CC97A-645B-423C-9328-1B5DF56E9818@sb.org>
References: <159B198B-A271-4DCD-8A49-4608E6E4117C@hatcher.name>
	<699C9A3C-6DB5-4B4E-9286-135DC91BEBBE@apple.com>
	<3B5CC97A-645B-423C-9328-1B5DF56E9818@sb.org>
Message-ID: <4ECF8F81-2151-42E6-B000-7AE69EFBAA28@apple.com>

open -a <appname>

already correctly carries over DYLD environment variables... so I  
don't really see a dying need for such a script.

Or at least, if there were such a script, it could be about 2 lines.

-eric

On Jun 28, 2005, at 8:32 PM, Kevin Ballard wrote:

> On Jun 28, 2005, at 1:03 PM, Darin Adler wrote:
>
>
>>> On similar lines, how about a general script "run-webkit-based- 
>>> app"? The script can take an argument to an application bundle,  
>>> or the executable in the bundle (I say test for both cases.) This  
>>> would give easy access to users and developers that wish to run  
>>> their favorite WebKit enabled application with the CVS builds. (I  
>>> have been asked a few times in #colloquy how to get this going.)  
>>> I personally have a modified run-safari script for Colloquy, but  
>>> a general script would help more casual users.
>>>
>>>
>>
>> This doesn't seem so useful to me. This is would be a script that  
>> sets one environment variable, DYLD_FRAMEWORK_PATH. I think people  
>> can make their own.
>>
>> But I could be wrong -- I'd be happy to take a patch with this  
>> script if many people found it useful.
>>
>
> I would suggest instead a script that takes the *name* of an app  
> and searches the LaunchServices database for it and launches that  
> with DYLD_FRAMEWORK_PATH set. That way someone could just type `run- 
> webkit-app Colloquy` and have it work right.
>
> -- 
> Kevin Ballard
> kevin@sb.org
> http://www.tildesoft.com
> http://kevin.sb.org
>
> _______________________________________________
> webkit-dev mailing list
> webkit-dev@opendarwin.org
> http://www.opendarwin.org/mailman/listinfo/webkit-dev
>


From kevino at theolliviers.com  Wed Jun 29 23:22:00 2005
From: kevino at theolliviers.com (Kevin Ollivier)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] Widget / Drawing API thoughts
In-Reply-To: <F4739E08-18E6-4D9B-BA82-FABBE71AAB72@apple.com>
References: <42AA1109.6030602@xiondigital.net>
	<6D90642E-EFC0-4D32-BF5C-07D39A568F69@theolliviers.com>
	<3ECA98AE-3223-43B9-AE75-BFB606B0BB99@apple.com>
	<d5c05437050620140638f84f89@mail.gmail.com>
	<BC78A485-BF12-43B5-8EB9-6D911FC10CEA@apple.com>
	<F84F3A4F-DF99-4933-BC98-FB3628B44801@theolliviers.com>
	<AE6E9D82-6858-4EDA-BF8B-B750D5115AE7@apple.com>
	<A5803F9B-081B-4898-BE29-C1FEECD1E0BB@theolliviers.com>
	<D166AF54-774C-48EB-8F60-CE94862F2328@hatcher.name>
	<F4739E08-18E6-4D9B-BA82-FABBE71AAB72@apple.com>
Message-ID: <0B9ECD51-E735-479D-BB8D-F7EA7342A935@theolliviers.com>

Hi Darin and all,

On Jun 28, 2005, at 10:06 AM, Darin Adler wrote:

> On Jun 27, 2005, at 6:14 PM, Timothy Hatcher wrote:
>
>
>> If a CSS file starts requesting specific visual changes (aside  
>> from margins, and maybe even padding for some controls) switch  
>> over to a non-native, fully styleable control (ala the <button>  
>> tag vs <input type="button">). In my web design experience it is  
>> typically an all or nothing game, either the designer wants to  
>> tweak the control in every direction visually, or no form control  
>> selectors at all. (This isn't always the case, but likely the  
>> majority.)
>>
>
> Yes, this is what we have in mind. Dave Hyatt and I have been  
> talking about this basic approach for at least the last couple of  
> years. I also think there should be a CSS property that explicitly  
> sets the switch. The "automatic switchover" would be the default,  
> but you could override the heuristic with the CSS property.
>
>
>> That mix-and-match middle ground is where it gets shaky. Mac OS X  
>> native elements can control text-color and background (color  
>> only). So does that mean you would or would-not switch to non- 
>> native if the native controls are capable of handling the style  
>> request? (This would obviously be platform dependent, with Mac OS  
>> X controls being the least styleable of most platforms.)
>>
>
> Also consider that WebKit could easily have Mac OS X styled  
> controls that are even more styleable than the native ones. It is  
> indeed a complicated issue when to switch over to "more-generic"  
> controls. It's not even clear that there's a true concept of "more- 
> generic-looking". In practice maximum compatibility probably means  
> something more like "make the controls look exactly like Windows".

BTW, while doing a little research on the subject, I came across a  
page detailing (with screenshots) what the various browsers do on  
different platforms when asked to style form controls:

http://www.456bereastreet.com/archive/200410/ 
styling_even_more_form_controls/

The interesting thing is that, even for browsers like Firefox, the  
result is basically that they don't do much of anything, except  
perhaps adjust font face/size - even when they are clearly emulating  
the controls (see IE 5 for Mac ;-). So this pretty much confirms  
Darin's statement about there being no concept of a "generic looking"  
control.

Ideally, as one of the main goals of CSS is to give control of the  
interface back to the web site designer, I think when designers apply  
any style(s) to a control the entire control should appear the same  
on all platforms. I don't think it should 'mix and match' with native  
styles. If they're not designing on Mac, for example, they probably  
haven't considered how some of their styling might look when mixed  
with native Mac control elements, and it could lead to some odd- 
looking results. (Believe me, we've experienced this with  
wxWidgets. ;-) So I think the browser should show the designer what  
they designed, everywhere.

Of course, this brings up the issue Darin mentioned that there  
currently isn't a concept of a "generic looking" control, and even  
Windows buttons are starting to have different styles, so I'm not  
sure emulating them would give the correct results. Perhaps by taking  
on this task it's up to Safari to define such a thing as a "CSS- 
styled button". ;-) Thoughts? Anyone know if other browsers are  
heading in this direction as well?

Of course, the article above also suggests that the correct default  
behavior should be to be as native as possible, so I still would  
prefer at least a native control override option. I think how it is  
implemented internally should ideally be port-specific, so that ports  
could use a 'styled' control for the native option if they want, but  
I do believe there should be some concept still of native controls,  
as for us it's just much less maintenance to use the control rather  
than to emulate it. ;-) (in our case, the wxWidgets devs will make  
sure they're always looking and functioning as they should on all  
platforms. that means a much better possibility that our port stays  
sharp looking across platforms even when Longhorn comes out.)

Thanks,

Kevin

>
>> And if one form control is styled, but the rest of the controls  
>> aren't, do you use the same control drawing API for all? (I would  
>> assume yes, to be semi-consistent. Most designers would style all  
>> controls typically.)
>>
>
> At the moment, the style of one element doesn't affect the  
> appearance of other elements on the same page. So some page-wide  
> heuristic is tricky, but I can see how that would be nice.
>
>     -- Darin
>
> _______________________________________________
> webkit-dev mailing list
> webkit-dev@opendarwin.org
> http://www.opendarwin.org/mailman/listinfo/webkit-dev
>


From kjb525 at mac.com  Thu Jun 30 00:06:18 2005
From: kjb525 at mac.com (Kevin Burnett)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] problems compiling webkit
Message-ID: <35545D43-0794-4CBE-A829-B4366099B862@mac.com>

Hi all,

I have been having problems compiling the webkit;  I had been able to  
compile everything before, but don't remember the circumstances.

Now,  with OS X 10.4.1, with XCode Tools 2.1, and the Quicktime SDK  
7.0.1, I get errors:

[powerbookg4:~] kjb% build-webkit
2005-06-30 00:02:15.740 xcodebuild[26388] WARNING: The Xcode plugin  
at path /Library/Application Support/Apple/Developer Tools/Plug-ins/ 
J2EEAssistant.pbplugin is missing the XCPluginHasUI Info.plist key,  
it is assumed to have UI and will not be loaded by xcodebuild.
(NOTE: project JavaScriptCore was written by an older version of  
Xcode (39) -- temporarily upgrading it to version 42 (without  
modifying project file))

=== BUILDING NATIVE TARGET dftables WITH CONFIGURATION Deployment ===


=== BUILDING NATIVE TARGET JavaScriptCore WITH CONFIGURATION  
Deployment ===

PhaseScriptExecution /Users/kjb/WebKitStuff/JavaScriptCore.build/ 
Deployment/JavaScriptCore.build/Script-93F1982F08245B92001E9ABC.sh
     mkdir /Users/kjb/WebKitStuff/JavaScriptCore.build/Deployment/ 
JavaScriptCore.build/DerivedSources
     cd /Users/kjb/JavaScriptCore
     setenv ACTION build
     setenv APPLE_INTERNAL_DEVELOPER_DIR /AppleInternal/Developer
     setenv APPLE_INTERNAL_DIR /AppleInternal
     setenv APPLE_INTERNAL_DOCUMENTATION_DIR /AppleInternal/ 
Documentation
     setenv APPLE_INTERNAL_LIBRARY_DIR /AppleInternal/Library
     setenv APPLE_INTERNAL_TOOLS /AppleInternal/Developer/Tools
     setenv ARCHS ppc
     setenv BUILD_COMPONENTS "headers build"
     setenv BUILD_DIR /Users/kjb/WebKitStuff
     setenv BUILD_ROOT /Users/kjb/WebKitStuff
     setenv BUILD_STYLE Deployment
     setenv BUILD_VARIANTS normal
     setenv BUILT_PRODUCTS_DIR /Users/kjb/WebKitStuff/Deployment
     setenv CACHE_ROOT /Library/Caches/com.apple.Xcode.501
     setenv CCHROOT /Library/Caches/com.apple.Xcode.501
     setenv CHMOD /bin/chmod
     setenv CHOWN /usr/sbin/chown
     setenv CLASS_FILE_DIR /Users/kjb/WebKitStuff/ 
JavaScriptCore.build/Deployment/JavaScriptCore.build/JavaClasses
     setenv CLEAN_PRECOMPS YES
     setenv CLONE_HEADERS NO
     setenv CONFIGURATION Deployment
     setenv CONFIGURATION_BUILD_DIR /Users/kjb/WebKitStuff/Deployment
     setenv CONFIGURATION_TEMP_DIR /Users/kjb/WebKitStuff/ 
JavaScriptCore.build/Deployment
     setenv CONTENTS_FOLDER_PATH JavaScriptCore.framework/Versions/A
     setenv COPY_PHASE_STRIP YES
     setenv COPY_RESOURCES_FROM_STATIC_FRAMEWORKS YES
     setenv CP /bin/cp
     setenv CURRENT_PROJECT_VERSION
     setenv CURRENT_VERSION Current
     setenv DEBUGGING_SYMBOLS YES
     setenv DEBUG_DEFINES NDEBUG
     setenv DEPLOYMENT_LOCATION NO
     setenv DERIVED_FILES_DIR /Users/kjb/WebKitStuff/ 
JavaScriptCore.build/Deployment/JavaScriptCore.build/DerivedSources
     setenv DERIVED_FILE_DIR /Users/kjb/WebKitStuff/ 
JavaScriptCore.build/Deployment/JavaScriptCore.build/DerivedSources
     setenv DERIVED_PATHS
     setenv DERIVED_SOURCES_DIR /Users/kjb/WebKitStuff/ 
JavaScriptCore.build/Deployment/JavaScriptCore.build/DerivedSources
     setenv DEVELOPMENT_LANGUAGE English
     setenv DOCUMENTATION_FOLDER_PATH JavaScriptCore.framework/ 
Versions/A/Resources/English.lproj/Documentation
     setenv DSTROOT /tmp/JavaScriptCore.dst
     setenv DYLIB_COMPATIBILITY_VERSION 1
     setenv DYLIB_CURRENT_VERSION 1
     setenv DYLIB_INSTALL_NAME_BASE
     setenv ENABLE_HEADER_DEPENDENCIES YES
     setenv EXCLUDED_RECURSIVE_SEARCH_PATH_SUBDIRECTORIES "*.nib  
*.lproj *.framework *.gch *.xcode (*) CVS .svn"
     setenv EXECUTABLES_FOLDER_PATH JavaScriptCore.framework/Versions/ 
A/Resources/English.lproj
     setenv EXECUTABLE_EXTENSION
     setenv EXECUTABLE_FOLDER_PATH JavaScriptCore.framework/Versions/A
     setenv EXECUTABLE_NAME JavaScriptCore
     setenv EXECUTABLE_PATH JavaScriptCore.framework/Versions/A/ 
JavaScriptCore
     setenv EXECUTABLE_PREFIX
     setenv EXECUTABLE_SUFFIX
     setenv EXECUTABLE_VARIANT_SUFFIX
     setenv FRAMEWORKS_FOLDER_PATH JavaScriptCore.framework/Versions/ 
A/Frameworks
     setenv FRAMEWORK_FLAG_PREFIX -framework
     setenv FRAMEWORK_SEARCH_PATHS /Users/kjb/WebKitStuff/Deployment
     setenv FRAMEWORK_VERSION A
     setenv FULL_PRODUCT_NAME JavaScriptCore.framework
     setenv GCC_AUTO_PCH_HEADER_c
     setenv GCC_AUTO_PCH_HEADER_c++
     setenv GCC_AUTO_PCH_HEADER_objective-c
     setenv GCC_AUTO_PCH_HEADER_objective-c++
     setenv GCC_ENABLE_AUTO_PCH NO
     setenv GCC_ENABLE_CPP_EXCEPTIONS NO
     setenv GCC_ENABLE_CPP_RTTI NO
     setenv GCC_ENABLE_OBJC_GC YES
     setenv GCC_FAST_OBJC_DISPATCH YES
     setenv GCC_GENERATE_DEBUGGING_SYMBOLS NO
     setenv GCC_OPTIMIZATION_LEVEL s
     setenv GCC_PFE_FILE_C_DIALECTS "c objective-c c++ objective-c++"
     setenv GCC_PRECOMPILE_PREFIX_HEADER YES
     setenv GCC_PREFIX_HEADER JavaScriptCorePrefix.h
     setenv GCC_PREPROCESSOR_DEFINITIONS "NDEBUG APPLE_CHANGES  
HAVE_CONFIG_H"
     setenv GCC_TREAT_WARNINGS_AS_ERRORS YES
     setenv GCC_USE_GCC3_PFE_SUPPORT
     setenv GCC_VERSION
     setenv GCC_WARN_ABOUT_MISSING_PROTOTYPES YES
     setenv GCC_WARN_NON_VIRTUAL_DESTRUCTOR YES
     setenv GENERATE_PKGINFO_FILE NO
     setenv GENERATE_PROFILING_CODE NO
     setenv GLOBAL_CFLAGS
     setenv GROUP staff
     setenv HEADERMAP_INCLUDES_PROJECT_HEADERS YES
     setenv HEADER_SEARCH_PATHS "/Users/kjb/WebKitStuff/Deployment/ 
include icu"
     setenv INCLUDED_RECURSIVE_SEARCH_PATH_SUBDIRECTORIES
     setenv INFOPLISTSTRINGS_PATH JavaScriptCore.framework/Versions/A/ 
Resources/English.lproj/InfoPlist.strings
     setenv INFOPLIST_FILE Info.plist
     setenv INFOPLIST_PATH JavaScriptCore.framework/Versions/A/ 
Resources/Info.plist
     setenv INFOSTRINGS_PATH
     setenv INIT_ROUTINE
     setenv INSTALL_DIR /tmp/JavaScriptCore.dst/System/Library/ 
Frameworks/WebKit.framework/Versions/A/Frameworks
     setenv INSTALL_GROUP staff
     setenv INSTALL_MODE_FLAG a-w,a+rX
     setenv INSTALL_OWNER kjb
     setenv INSTALL_PATH /System/Library/Frameworks/WebKit.framework/ 
Versions/A/Frameworks
     setenv INSTALL_ROOT /tmp/JavaScriptCore.dst
     setenv JAVAC_DEFAULT_FLAGS "-J-Xms64m -J-XX:NewSize=4M -J- 
Dfile.encoding=UTF8"
     setenv JAVA_APP_STUB /System/Library/Frameworks/JavaVM.framework/ 
Resources/MacOS/JavaApplicationStub
     setenv JAVA_ARCHIVE_CLASSES YES
     setenv JAVA_ARCHIVE_TYPE JAR
     setenv JAVA_COMPILER /usr/bin/javac
     setenv JAVA_FOLDER_PATH JavaScriptCore.framework/Versions/A/ 
Resources/Java
     setenv JAVA_FRAMEWORK_JARS
     setenv JAVA_FRAMEWORK_RESOURCES_DIRS Resources
     setenv JAVA_JAR_FLAGS cv
     setenv JAVA_SOURCE_SUBDIR .
     setenv JAVA_USE_DEPENDENCIES YES
     setenv JAVA_ZIP_FLAGS -urg
     setenv JIKES_DEFAULT_FLAGS "+E +OLDCSO"
     setenv LD_FLAGS
     setenv LEX /usr/bin/lex
     setenv LEXFLAGS
     setenv LIBRARY_FLAG_NOSPACE YES
     setenv LIBRARY_FLAG_PREFIX -l
     setenv LIBRARY_SEARCH_PATHS /Users/kjb/WebKitStuff/Deployment
     setenv LINKER_LIBRARY_FLAGS
     setenv LINK_FILE_LIST_normal_ppc /Users/kjb/WebKitStuff/ 
JavaScriptCore.build/Deployment/JavaScriptCore.build/Objects-normal/ 
ppc/JavaScriptCore.LinkFileList
     setenv LOCALIZED_RESOURCES_FOLDER_PATH JavaScriptCore.framework/ 
Versions/A/Resources/English.lproj
     setenv LOCAL_ADMIN_APPS_DIR /Applications/Utilities
     setenv LOCAL_APPS_DIR /Applications
     setenv LOCAL_DEVELOPER_DIR /Library/Developer
     setenv LOCAL_DEVELOPER_EXECUTABLES_DIR
     setenv LOCAL_LIBRARY_DIR /Library
     setenv MACOSX_DEPLOYMENT_TARGET 10.3
     setenv MACOS_CREATOR
     setenv MACOS_CREATOR_ARG
     setenv MACOS_TYPE
     setenv MACOS_TYPE_ARG
     setenv MAC_OS_X_VERSION_MAX_ALLOWED
     setenv MAC_OS_X_VERSION_MIN_REQUIRED
     setenv NATIVE_ARCH ppc
     setenv NO_COMMON YES
     setenv OBJECT_FILE_DIR /Users/kjb/WebKitStuff/ 
JavaScriptCore.build/Deployment/JavaScriptCore.build/Objects
     setenv OBJECT_FILE_DIR_normal /Users/kjb/WebKitStuff/ 
JavaScriptCore.build/Deployment/JavaScriptCore.build/Objects-normal
     setenv OBJROOT /Users/kjb/WebKitStuff
     setenv OPTIMIZATION_CFLAGS
     setenv OPTIMIZATION_LEVEL 0
     setenv OS MACOS
     setenv OSAC /usr/bin/osacompile
     setenv OTHER_CFLAGS
     setenv OTHER_CPLUSPLUSFLAGS
     setenv OTHER_LDFLAGS " -sub_library libobjc"
     setenv OTHER_MIGFLAGS
     setenv OTHER_OSAFLAGS
     setenv OTHER_PRECOMP_CFLAGS
     setenv OTHER_RESMERGERFLAGS
     setenv OTHER_REZFLAGS
     setenv PACKAGE_TYPE com.apple.package-type.wrapper.framework
     setenv PASCAL_STRINGS YES
     setenv PATH_PREFIXES_EXCLUDED_FROM_HEADER_DEPENDENCIES "/usr/ 
include /usr/local/include /System/Library/Frameworks /System/Library/ 
PrivateFrameworks /Developer/Headers"
     setenv PBDEVELOPMENTPLIST_PATH JavaScriptCore.framework/Versions/ 
A/pbdevelopment.plist
     setenv PFE_FILE_C_DIALECTS "c c++ objective-c++"
     setenv PKGINFO_FILE_PATH /Users/kjb/WebKitStuff/ 
JavaScriptCore.build/Deployment/JavaScriptCore.build/PkgInfo
     setenv PKGINFO_PATH JavaScriptCore.framework/PkgInfo
     setenv PLUGINS_FOLDER_PATH JavaScriptCore.framework/Versions/A/ 
Resources
     setenv PREBINDING NO
     setenv PRECOMPILE_PREFIX_HEADER
     setenv PRECOMP_DESTINATION_DIR /Users/kjb/WebKitStuff/ 
JavaScriptCore.build/Deployment/JavaScriptCore.build/PrefixHeaders
     setenv PREFIX_CFLAG_BASE
     setenv PREFIX_FLAGS
     setenv PREFIX_HEADER
     setenv PREFIX_REFERENCE
     setenv PRIVATE_HEADERS_FOLDER_PATH JavaScriptCore.framework/ 
Versions/A/PrivateHeaders
     setenv PRODUCT_NAME JavaScriptCore
     setenv PRODUCT_SETTINGS_PATH /Users/kjb/JavaScriptCore/Info.plist
     setenv PRODUCT_TYPE com.apple.product-type.framework
     setenv PRODUCT_TYPE_CFLAGS
     setenv PRODUCT_TYPE_CPLUSPLUSFLAGS
     setenv PRODUCT_TYPE_HEADER_SEARCH_PATHS
     setenv PROJECT JavaScriptCore
     setenv PROJECT_DERIVED_FILE_DIR /Users/kjb/WebKitStuff/ 
JavaScriptCore.build/DerivedSources
     setenv PROJECT_DIR /Users/kjb/JavaScriptCore
     setenv PROJECT_FILE_PATH /Users/kjb/JavaScriptCore/ 
JavaScriptCore.pbproj
     setenv PROJECT_NAME JavaScriptCore
     setenv PROJECT_TEMP_DIR /Users/kjb/WebKitStuff/JavaScriptCore.build
     setenv PUBLIC_HEADERS_FOLDER_PATH JavaScriptCore.framework/ 
Versions/A/Headers
     setenv RECURSIVE_SEARCH_PATHS_FOLLOW_SYMLINKS YES
     setenv REMOVE_CVS_FROM_RESOURCES YES
     setenv REMOVE_SVN_FROM_RESOURCES YES
     setenv RETAIN_RAW_BINARIES
     setenv REZ_COLLECTOR_DIR /Users/kjb/WebKitStuff/ 
JavaScriptCore.build/Deployment/JavaScriptCore.build/ 
ResourceManagerResources
     setenv REZ_OBJECTS_DIR /Users/kjb/WebKitStuff/ 
JavaScriptCore.build/Deployment/JavaScriptCore.build/ 
ResourceManagerResources/Objects
     setenv REZ_SEARCH_PATHS /Users/kjb/WebKitStuff/Deployment
     setenv SCRIPTS_FOLDER_PATH JavaScriptCore.framework/Versions/A/ 
Resources/Scripts
     setenv SCRIPT_INPUT_FILE_0 kjs/create_hash_table
     setenv SCRIPT_INPUT_FILE_1 kjs/array_object.cpp
     setenv SCRIPT_INPUT_FILE_COUNT 2
     setenv SCRIPT_OUTPUT_FILE_0 /Users/kjb/WebKitStuff/ 
JavaScriptCore.build/Deployment/JavaScriptCore.build/DerivedSources/ 
array_object.lut.h
     setenv SCRIPT_OUTPUT_FILE_COUNT 1
     setenv SDKROOT
     setenv SECTORDER_FLAGS
     setenv SED /usr/bin/sed
     setenv SET_DIR_MODE_OWNER_GROUP YES
     setenv SET_FILE_MODE_OWNER_GROUP NO
     setenv SHARED_DERIVED_FILE_DIR /Users/kjb/WebKitStuff/Deployment/ 
DerivedSources
     setenv SHARED_FRAMEWORKS_FOLDER_PATH JavaScriptCore.framework/ 
Versions/A/SharedFrameworks
     setenv SHARED_PRECOMPS_DIR /Library/Caches/com.apple.Xcode.501/ 
SharedPrecompiledHeaders
     setenv SHARED_SUPPORT_FOLDER_PATH JavaScriptCore.framework/ 
Versions/A/Resources
     setenv SOURCE_ROOT /Users/kjb/JavaScriptCore
     setenv SRCROOT /Users/kjb/JavaScriptCore
     setenv STRIPFLAGS
     setenv STRIP_INSTALLED_PRODUCT YES
     setenv STYLE_LDFLAGS
     setenv SYMBOL_HEADER
     setenv SYMBOL_REPOSITORY
     setenv SYMROOT /Users/kjb/WebKitStuff
     setenv SYSTEM_ADMIN_APPS_DIR /Applications/Utilities
     setenv SYSTEM_APPS_DIR /Applications
     setenv SYSTEM_CORE_SERVICES_DIR /System/Library/CoreServices
     setenv SYSTEM_DEMOS_DIR /Applications/Extras
     setenv SYSTEM_DEVELOPER_APPS_DIR /Developer/Applications
     setenv SYSTEM_DEVELOPER_DEMOS_DIR "/Developer/Applications/ 
Utilities/Built Examples"
     setenv SYSTEM_DEVELOPER_DIR /Developer
     setenv SYSTEM_DEVELOPER_DOC_DIR "/Developer/ADC Reference Library"
     setenv SYSTEM_DEVELOPER_EXECUTABLES_DIR
     setenv SYSTEM_DEVELOPER_GRAPHICS_TOOLS_DIR "/Developer/ 
Applications/Graphics Tools"
     setenv SYSTEM_DEVELOPER_JAVA_TOOLS_DIR "/Developer/Applications/ 
Java Tools"
     setenv SYSTEM_DEVELOPER_PERFORMANCE_TOOLS_DIR "/Developer/ 
Applications/Performance Tools"
     setenv SYSTEM_DEVELOPER_RELEASENOTES_DIR "/Developer/ADC  
Reference Library/releasenotes"
     setenv SYSTEM_DEVELOPER_TOOLS /Developer/Tools
     setenv SYSTEM_DEVELOPER_TOOLS_DOC_DIR "/Developer/ADC Reference  
Library/documentation/DeveloperTools"
     setenv SYSTEM_DEVELOPER_TOOLS_RELEASENOTES_DIR "/Developer/ADC  
Reference Library/releasenotes/DeveloperTools"
     setenv SYSTEM_DEVELOPER_UTILITIES_DIR /Developer/Applications/ 
Utilities
     setenv SYSTEM_DOCUMENTATION_DIR /Library/Documentation
     setenv SYSTEM_LIBRARY_DIR /System/Library
     setenv SYSTEM_LIBRARY_EXECUTABLES_DIR
     setenv TARGETNAME JavaScriptCore
     setenv TARGET_BUILD_DIR /Users/kjb/WebKitStuff/Deployment
     setenv TARGET_NAME JavaScriptCore
     setenv TARGET_TEMP_DIR /Users/kjb/WebKitStuff/ 
JavaScriptCore.build/Deployment/JavaScriptCore.build
     setenv TEMP_DIR /Users/kjb/WebKitStuff/JavaScriptCore.build/ 
Deployment/JavaScriptCore.build
     setenv TEMP_FILES_DIR /Users/kjb/WebKitStuff/ 
JavaScriptCore.build/Deployment/JavaScriptCore.build
     setenv TEMP_FILE_DIR /Users/kjb/WebKitStuff/JavaScriptCore.build/ 
Deployment/JavaScriptCore.build
     setenv TEMP_ROOT /Users/kjb/WebKitStuff
     setenv UID 501
     setenv UNLOCALIZED_RESOURCES_FOLDER_PATH  
JavaScriptCore.framework/Versions/A/Resources
     setenv UNSTRIPPED_PRODUCT NO
     setenv USER kjb
     setenv USER_APPS_DIR /Users/kjb/Applications
     setenv USER_LIBRARY_DIR /Users/kjb/Library
     setenv USE_DYNAMIC_NO_PIC YES
     setenv USE_GCC3_PFE_SUPPORT
     setenv VALID_ARCHS "m68k i386 sparc hppa ppc ppc7400 ppc970 ppc64"
     setenv VERBOSE_PBXCP NO
     setenv VERSIONING_STUB
     setenv VERSIONING_SYSTEM
     setenv VERSIONPLIST_PATH JavaScriptCore.framework/Versions/A/ 
Resources/version.plist
     setenv VERSIONS_FOLDER_PATH JavaScriptCore.framework/Versions
     setenv VERSION_INFO_BUILDER kjb
     setenv VERSION_INFO_EXPORT_DECL
     setenv VERSION_INFO_PREFIX
     setenv VERSION_INFO_STRING "\"@(#)PROGRAM:JavaScriptCore   
PROJECT:JavaScriptCore-  DEVELOPER:kjb  BUILT:\" __DATE__  \" \"  
__TIME__ \"\""
     setenv VERSION_INFO_SUFFIX
     setenv WARNING_CFLAGS "-Wall -W -Wcast-align -Wchar-subscripts - 
Wformat-security -Wmissing-format-attribute -Wpointer-arith -Wwrite- 
strings -Wno-format-y2k -Wno-unused-parameter -Wno-long-double"
     setenv WARNING_LDFLAGS
     setenv WRAPPER_EXTENSION framework
     setenv WRAPPER_NAME JavaScriptCore.framework
     setenv WRAPPER_PREFIX
     setenv WRAPPER_SUFFIX .framework
     setenv XCODE_APP_SUPPORT_DIR "/Library/Application Support/Apple/ 
Developer Tools"
     setenv YACC /usr/bin/yacc
     setenv YACCFLAGS
     /bin/sh -c /Users/kjb/WebKitStuff/JavaScriptCore.build/ 
Deployment/JavaScriptCore.build/Script-93F1982F08245B92001E9ABC.sh
Creating hashtable for kjs/array_object.cpp

CpHeader /Users/kjb/WebKitStuff/Deployment/JavaScriptCore.framework/ 
Versions/A/PrivateHeaders/array_object.h kjs/array_object.h
     mkdir /Users/kjb/WebKitStuff/Deployment/JavaScriptCore.framework/ 
Versions/A/PrivateHeaders
     cd /Users/kjb/JavaScriptCore
     /System/Library/PrivateFrameworks/DevToolsCore.framework/ 
Resources/pbxcp -exclude .DS_Store -exclude CVS -exclude .svn -strip- 
debug-symbols -resolve-src-symlinks /Users/kjb/JavaScriptCore/kjs/ 
array_object.h /Users/kjb/WebKitStuff/Deployment/ 
JavaScriptCore.framework/Versions/A/PrivateHeaders

CompileC /Users/kjb/WebKitStuff/JavaScriptCore.build/Deployment/ 
JavaScriptCore.build/Objects-normal/ppc/array_object.o kjs/ 
array_object.cpp normal ppc c++ com.apple.compilers.gcc.4_0
     mkdir /Users/kjb/WebKitStuff/JavaScriptCore.build/Deployment/ 
JavaScriptCore.build/Objects-normal/ppc
     cd /Users/kjb/JavaScriptCore
     setenv MACOSX_DEPLOYMENT_TARGET 10.3
     /usr/bin/gcc-4.0 -x c++ -arch ppc -pipe -Wno-trigraphs -fno- 
exceptions -fno-rtti -fpascal-strings -fasm-blocks -Os -Werror -Wnon- 
virtual-dtor -DNDEBUG -DAPPLE_CHANGES -DHAVE_CONFIG_H -fmessage- 
length=0 -mtune=G4 -I/Users/kjb/WebKitStuff/JavaScriptCore.build/ 
Deployment/JavaScriptCore.build/JavaScriptCore.hmap -Wall -W -Wcast- 
align -Wchar-subscripts -Wformat-security -Wmissing-format-attribute - 
Wpointer-arith -Wwrite-strings -Wno-format-y2k -Wno-unused-parameter - 
Wno-long-double -F/Users/kjb/WebKitStuff/Deployment -I/Users/kjb/ 
WebKitStuff/Deployment/include -Iicu -I/Users/kjb/WebKitStuff/ 
JavaScriptCore.build/Deployment/JavaScriptCore.build/DerivedSources - 
include /Library/Caches/com.apple.Xcode.501/SharedPrecompiledHeaders/ 
JavaScriptCorePrefix-cqhdunkcirhucxcxnoknfcioinkc/ 
JavaScriptCorePrefix.h -c /Users/kjb/JavaScriptCore/kjs/ 
array_object.cpp -o /Users/kjb/WebKitStuff/JavaScriptCore.build/ 
Deployment/JavaScriptCore.build/Objects-normal/ppc/array_object.o

CompileC /Users/kjb/WebKitStuff/JavaScriptCore.build/Deployment/ 
JavaScriptCore.build/Objects-normal/ppc/function_object.o kjs/ 
function_object.cpp normal ppc c++ com.apple.compilers.gcc.4_0
     mkdir /Users/kjb/WebKitStuff/JavaScriptCore.build/Deployment/ 
JavaScriptCore.build/Objects-normal/ppc
     cd /Users/kjb/JavaScriptCore
     setenv MACOSX_DEPLOYMENT_TARGET 10.3
     /usr/bin/gcc-4.0 -x c++ -arch ppc -pipe -Wno-trigraphs -fno- 
exceptions -fno-rtti -fpascal-strings -fasm-blocks -Os -Werror -Wnon- 
virtual-dtor -DNDEBUG -DAPPLE_CHANGES -DHAVE_CONFIG_H -fmessage- 
length=0 -mtune=G4 -I/Users/kjb/WebKitStuff/JavaScriptCore.build/ 
Deployment/JavaScriptCore.build/JavaScriptCore.hmap -Wall -W -Wcast- 
align -Wchar-subscripts -Wformat-security -Wmissing-format-attribute - 
Wpointer-arith -Wwrite-strings -Wno-format-y2k -Wno-unused-parameter - 
Wno-long-double -F/Users/kjb/WebKitStuff/Deployment -I/Users/kjb/ 
WebKitStuff/Deployment/include -Iicu -I/Users/kjb/WebKitStuff/ 
JavaScriptCore.build/Deployment/JavaScriptCore.build/DerivedSources - 
include /Library/Caches/com.apple.Xcode.501/SharedPrecompiledHeaders/ 
JavaScriptCorePrefix-cqhdunkcirhucxcxnoknfcioinkc/ 
JavaScriptCorePrefix.h -c /Users/kjb/JavaScriptCore/kjs/ 
function_object.cpp -o /Users/kjb/WebKitStuff/JavaScriptCore.build/ 
Deployment/JavaScriptCore.build/Objects-normal/ppc/function_object.o

CompileC /Users/kjb/WebKitStuff/JavaScriptCore.build/Deployment/ 
JavaScriptCore.build/Objects-normal/ppc/grammar.o /Users/kjb/ 
WebKitStuff/JavaScriptCore.build/Deployment/JavaScriptCore.build/ 
DerivedSources/grammar.cpp normal ppc c++ com.apple.compilers.gcc.4_0
     mkdir /Users/kjb/WebKitStuff/JavaScriptCore.build/Deployment/ 
JavaScriptCore.build/Objects-normal/ppc
     cd /Users/kjb/JavaScriptCore
     setenv MACOSX_DEPLOYMENT_TARGET 10.3
     /usr/bin/gcc-4.0 -x c++ -arch ppc -pipe -Wno-trigraphs -fno- 
exceptions -fno-rtti -fpascal-strings -fasm-blocks -Os -Werror -Wnon- 
virtual-dtor -DNDEBUG -DAPPLE_CHANGES -DHAVE_CONFIG_H -fmessage- 
length=0 -mtune=G4 -I/Users/kjb/WebKitStuff/JavaScriptCore.build/ 
Deployment/JavaScriptCore.build/JavaScriptCore.hmap -Wall -W -Wcast- 
align -Wchar-subscripts -Wformat-security -Wmissing-format-attribute - 
Wpointer-arith -Wwrite-strings -Wno-format-y2k -Wno-unused-parameter - 
Wno-long-double -F/Users/kjb/WebKitStuff/Deployment -I/Users/kjb/ 
WebKitStuff/Deployment/include -Iicu -I/Users/kjb/WebKitStuff/ 
JavaScriptCore.build/Deployment/JavaScriptCore.build/DerivedSources - 
include /Library/Caches/com.apple.Xcode.501/SharedPrecompiledHeaders/ 
JavaScriptCorePrefix-cqhdunkcirhucxcxnoknfcioinkc/ 
JavaScriptCorePrefix.h -c /Users/kjb/WebKitStuff/JavaScriptCore.build/ 
Deployment/JavaScriptCore.build/DerivedSources/grammar.cpp -o /Users/ 
kjb/WebKitStuff/JavaScriptCore.build/Deployment/JavaScriptCore.build/ 
Objects-normal/ppc/grammar.o
cc1plus: warnings being treated as errors
/Users/kjb/WebKitStuff/JavaScriptCore.build/Deployment/ 
JavaScriptCore.build/DerivedSources/grammar.cpp: In function 'int  
kjsyyparse()':
/Users/kjb/WebKitStuff/JavaScriptCore.build/Deployment/ 
JavaScriptCore.build/DerivedSources/grammar.cpp:1649: warning:  
comparison of unsigned expression >= 0 is always true
** BUILD FAILED **
[powerbookg4:~] kjb%


I would appreciate any help!

thanks!


From toby at opendarwin.org  Thu Jun 30 00:48:22 2005
From: toby at opendarwin.org (Toby Peterson)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] problems compiling webkit
In-Reply-To: <35545D43-0794-4CBE-A829-B4366099B862@mac.com>
References: <35545D43-0794-4CBE-A829-B4366099B862@mac.com>
Message-ID: <7AE30BC6-7710-4C92-9F66-5B21B10DC1A7@opendarwin.org>

Do you, by any chance, have bison 2.0 installed?

- Toby

On 30 Jun 2005, at 00.06, Kevin Burnett wrote:

> Hi all,
>
> I have been having problems compiling the webkit;  I had been able  
> to compile everything before, but don't remember the circumstances.
>
> Now,  with OS X 10.4.1, with XCode Tools 2.1, and the Quicktime SDK  
> 7.0.1, I get errors:
>
> [powerbookg4:~] kjb% build-webkit
> 2005-06-30 00:02:15.740 xcodebuild[26388] WARNING: The Xcode plugin  
> at path /Library/Application Support/Apple/Developer Tools/Plug-ins/ 
> J2EEAssistant.pbplugin is missing the XCPluginHasUI Info.plist key,  
> it is assumed to have UI and will not be loaded by xcodebuild.
> (NOTE: project JavaScriptCore was written by an older version of  
> Xcode (39) -- temporarily upgrading it to version 42 (without  
> modifying project file))
>
> === BUILDING NATIVE TARGET dftables WITH CONFIGURATION Deployment ===
>
>
> === BUILDING NATIVE TARGET JavaScriptCore WITH CONFIGURATION  
> Deployment ===
>
> PhaseScriptExecution /Users/kjb/WebKitStuff/JavaScriptCore.build/ 
> Deployment/JavaScriptCore.build/Script-93F1982F08245B92001E9ABC.sh
>     mkdir /Users/kjb/WebKitStuff/JavaScriptCore.build/Deployment/ 
> JavaScriptCore.build/DerivedSources
>     cd /Users/kjb/JavaScriptCore
>     setenv ACTION build
>     setenv APPLE_INTERNAL_DEVELOPER_DIR /AppleInternal/Developer
>     setenv APPLE_INTERNAL_DIR /AppleInternal
>     setenv APPLE_INTERNAL_DOCUMENTATION_DIR /AppleInternal/ 
> Documentation
>     setenv APPLE_INTERNAL_LIBRARY_DIR /AppleInternal/Library
>     setenv APPLE_INTERNAL_TOOLS /AppleInternal/Developer/Tools
>     setenv ARCHS ppc
>     setenv BUILD_COMPONENTS "headers build"
>     setenv BUILD_DIR /Users/kjb/WebKitStuff
>     setenv BUILD_ROOT /Users/kjb/WebKitStuff
>     setenv BUILD_STYLE Deployment
>     setenv BUILD_VARIANTS normal
>     setenv BUILT_PRODUCTS_DIR /Users/kjb/WebKitStuff/Deployment
>     setenv CACHE_ROOT /Library/Caches/com.apple.Xcode.501
>     setenv CCHROOT /Library/Caches/com.apple.Xcode.501
>     setenv CHMOD /bin/chmod
>     setenv CHOWN /usr/sbin/chown
>     setenv CLASS_FILE_DIR /Users/kjb/WebKitStuff/ 
> JavaScriptCore.build/Deployment/JavaScriptCore.build/JavaClasses
>     setenv CLEAN_PRECOMPS YES
>     setenv CLONE_HEADERS NO
>     setenv CONFIGURATION Deployment
>     setenv CONFIGURATION_BUILD_DIR /Users/kjb/WebKitStuff/Deployment
>     setenv CONFIGURATION_TEMP_DIR /Users/kjb/WebKitStuff/ 
> JavaScriptCore.build/Deployment
>     setenv CONTENTS_FOLDER_PATH JavaScriptCore.framework/Versions/A
>     setenv COPY_PHASE_STRIP YES
>     setenv COPY_RESOURCES_FROM_STATIC_FRAMEWORKS YES
>     setenv CP /bin/cp
>     setenv CURRENT_PROJECT_VERSION
>     setenv CURRENT_VERSION Current
>     setenv DEBUGGING_SYMBOLS YES
>     setenv DEBUG_DEFINES NDEBUG
>     setenv DEPLOYMENT_LOCATION NO
>     setenv DERIVED_FILES_DIR /Users/kjb/WebKitStuff/ 
> JavaScriptCore.build/Deployment/JavaScriptCore.build/DerivedSources
>     setenv DERIVED_FILE_DIR /Users/kjb/WebKitStuff/ 
> JavaScriptCore.build/Deployment/JavaScriptCore.build/DerivedSources
>     setenv DERIVED_PATHS
>     setenv DERIVED_SOURCES_DIR /Users/kjb/WebKitStuff/ 
> JavaScriptCore.build/Deployment/JavaScriptCore.build/DerivedSources
>     setenv DEVELOPMENT_LANGUAGE English
>     setenv DOCUMENTATION_FOLDER_PATH JavaScriptCore.framework/ 
> Versions/A/Resources/English.lproj/Documentation
>     setenv DSTROOT /tmp/JavaScriptCore.dst
>     setenv DYLIB_COMPATIBILITY_VERSION 1
>     setenv DYLIB_CURRENT_VERSION 1
>     setenv DYLIB_INSTALL_NAME_BASE
>     setenv ENABLE_HEADER_DEPENDENCIES YES
>     setenv EXCLUDED_RECURSIVE_SEARCH_PATH_SUBDIRECTORIES "*.nib  
> *.lproj *.framework *.gch *.xcode (*) CVS .svn"
>     setenv EXECUTABLES_FOLDER_PATH JavaScriptCore.framework/ 
> Versions/A/Resources/English.lproj
>     setenv EXECUTABLE_EXTENSION
>     setenv EXECUTABLE_FOLDER_PATH JavaScriptCore.framework/Versions/A
>     setenv EXECUTABLE_NAME JavaScriptCore
>     setenv EXECUTABLE_PATH JavaScriptCore.framework/Versions/A/ 
> JavaScriptCore
>     setenv EXECUTABLE_PREFIX
>     setenv EXECUTABLE_SUFFIX
>     setenv EXECUTABLE_VARIANT_SUFFIX
>     setenv FRAMEWORKS_FOLDER_PATH JavaScriptCore.framework/Versions/ 
> A/Frameworks
>     setenv FRAMEWORK_FLAG_PREFIX -framework
>     setenv FRAMEWORK_SEARCH_PATHS /Users/kjb/WebKitStuff/Deployment
>     setenv FRAMEWORK_VERSION A
>     setenv FULL_PRODUCT_NAME JavaScriptCore.framework
>     setenv GCC_AUTO_PCH_HEADER_c
>     setenv GCC_AUTO_PCH_HEADER_c++
>     setenv GCC_AUTO_PCH_HEADER_objective-c
>     setenv GCC_AUTO_PCH_HEADER_objective-c++
>     setenv GCC_ENABLE_AUTO_PCH NO
>     setenv GCC_ENABLE_CPP_EXCEPTIONS NO
>     setenv GCC_ENABLE_CPP_RTTI NO
>     setenv GCC_ENABLE_OBJC_GC YES
>     setenv GCC_FAST_OBJC_DISPATCH YES
>     setenv GCC_GENERATE_DEBUGGING_SYMBOLS NO
>     setenv GCC_OPTIMIZATION_LEVEL s
>     setenv GCC_PFE_FILE_C_DIALECTS "c objective-c c++ objective-c++"
>     setenv GCC_PRECOMPILE_PREFIX_HEADER YES
>     setenv GCC_PREFIX_HEADER JavaScriptCorePrefix.h
>     setenv GCC_PREPROCESSOR_DEFINITIONS "NDEBUG APPLE_CHANGES  
> HAVE_CONFIG_H"
>     setenv GCC_TREAT_WARNINGS_AS_ERRORS YES
>     setenv GCC_USE_GCC3_PFE_SUPPORT
>     setenv GCC_VERSION
>     setenv GCC_WARN_ABOUT_MISSING_PROTOTYPES YES
>     setenv GCC_WARN_NON_VIRTUAL_DESTRUCTOR YES
>     setenv GENERATE_PKGINFO_FILE NO
>     setenv GENERATE_PROFILING_CODE NO
>     setenv GLOBAL_CFLAGS
>     setenv GROUP staff
>     setenv HEADERMAP_INCLUDES_PROJECT_HEADERS YES
>     setenv HEADER_SEARCH_PATHS "/Users/kjb/WebKitStuff/Deployment/ 
> include icu"
>     setenv INCLUDED_RECURSIVE_SEARCH_PATH_SUBDIRECTORIES
>     setenv INFOPLISTSTRINGS_PATH JavaScriptCore.framework/Versions/ 
> A/Resources/English.lproj/InfoPlist.strings
>     setenv INFOPLIST_FILE Info.plist
>     setenv INFOPLIST_PATH JavaScriptCore.framework/Versions/A/ 
> Resources/Info.plist
>     setenv INFOSTRINGS_PATH
>     setenv INIT_ROUTINE
>     setenv INSTALL_DIR /tmp/JavaScriptCore.dst/System/Library/ 
> Frameworks/WebKit.framework/Versions/A/Frameworks
>     setenv INSTALL_GROUP staff
>     setenv INSTALL_MODE_FLAG a-w,a+rX
>     setenv INSTALL_OWNER kjb
>     setenv INSTALL_PATH /System/Library/Frameworks/WebKit.framework/ 
> Versions/A/Frameworks
>     setenv INSTALL_ROOT /tmp/JavaScriptCore.dst
>     setenv JAVAC_DEFAULT_FLAGS "-J-Xms64m -J-XX:NewSize=4M -J- 
> Dfile.encoding=UTF8"
>     setenv JAVA_APP_STUB /System/Library/Frameworks/ 
> JavaVM.framework/Resources/MacOS/JavaApplicationStub
>     setenv JAVA_ARCHIVE_CLASSES YES
>     setenv JAVA_ARCHIVE_TYPE JAR
>     setenv JAVA_COMPILER /usr/bin/javac
>     setenv JAVA_FOLDER_PATH JavaScriptCore.framework/Versions/A/ 
> Resources/Java
>     setenv JAVA_FRAMEWORK_JARS
>     setenv JAVA_FRAMEWORK_RESOURCES_DIRS Resources
>     setenv JAVA_JAR_FLAGS cv
>     setenv JAVA_SOURCE_SUBDIR .
>     setenv JAVA_USE_DEPENDENCIES YES
>     setenv JAVA_ZIP_FLAGS -urg
>     setenv JIKES_DEFAULT_FLAGS "+E +OLDCSO"
>     setenv LD_FLAGS
>     setenv LEX /usr/bin/lex
>     setenv LEXFLAGS
>     setenv LIBRARY_FLAG_NOSPACE YES
>     setenv LIBRARY_FLAG_PREFIX -l
>     setenv LIBRARY_SEARCH_PATHS /Users/kjb/WebKitStuff/Deployment
>     setenv LINKER_LIBRARY_FLAGS
>     setenv LINK_FILE_LIST_normal_ppc /Users/kjb/WebKitStuff/ 
> JavaScriptCore.build/Deployment/JavaScriptCore.build/Objects-normal/ 
> ppc/JavaScriptCore.LinkFileList
>     setenv LOCALIZED_RESOURCES_FOLDER_PATH JavaScriptCore.framework/ 
> Versions/A/Resources/English.lproj
>     setenv LOCAL_ADMIN_APPS_DIR /Applications/Utilities
>     setenv LOCAL_APPS_DIR /Applications
>     setenv LOCAL_DEVELOPER_DIR /Library/Developer
>     setenv LOCAL_DEVELOPER_EXECUTABLES_DIR
>     setenv LOCAL_LIBRARY_DIR /Library
>     setenv MACOSX_DEPLOYMENT_TARGET 10.3
>     setenv MACOS_CREATOR
>     setenv MACOS_CREATOR_ARG
>     setenv MACOS_TYPE
>     setenv MACOS_TYPE_ARG
>     setenv MAC_OS_X_VERSION_MAX_ALLOWED
>     setenv MAC_OS_X_VERSION_MIN_REQUIRED
>     setenv NATIVE_ARCH ppc
>     setenv NO_COMMON YES
>     setenv OBJECT_FILE_DIR /Users/kjb/WebKitStuff/ 
> JavaScriptCore.build/Deployment/JavaScriptCore.build/Objects
>     setenv OBJECT_FILE_DIR_normal /Users/kjb/WebKitStuff/ 
> JavaScriptCore.build/Deployment/JavaScriptCore.build/Objects-normal
>     setenv OBJROOT /Users/kjb/WebKitStuff
>     setenv OPTIMIZATION_CFLAGS
>     setenv OPTIMIZATION_LEVEL 0
>     setenv OS MACOS
>     setenv OSAC /usr/bin/osacompile
>     setenv OTHER_CFLAGS
>     setenv OTHER_CPLUSPLUSFLAGS
>     setenv OTHER_LDFLAGS " -sub_library libobjc"
>     setenv OTHER_MIGFLAGS
>     setenv OTHER_OSAFLAGS
>     setenv OTHER_PRECOMP_CFLAGS
>     setenv OTHER_RESMERGERFLAGS
>     setenv OTHER_REZFLAGS
>     setenv PACKAGE_TYPE com.apple.package-type.wrapper.framework
>     setenv PASCAL_STRINGS YES
>     setenv PATH_PREFIXES_EXCLUDED_FROM_HEADER_DEPENDENCIES "/usr/ 
> include /usr/local/include /System/Library/Frameworks /System/ 
> Library/PrivateFrameworks /Developer/Headers"
>     setenv PBDEVELOPMENTPLIST_PATH JavaScriptCore.framework/ 
> Versions/A/pbdevelopment.plist
>     setenv PFE_FILE_C_DIALECTS "c c++ objective-c++"
>     setenv PKGINFO_FILE_PATH /Users/kjb/WebKitStuff/ 
> JavaScriptCore.build/Deployment/JavaScriptCore.build/PkgInfo
>     setenv PKGINFO_PATH JavaScriptCore.framework/PkgInfo
>     setenv PLUGINS_FOLDER_PATH JavaScriptCore.framework/Versions/A/ 
> Resources
>     setenv PREBINDING NO
>     setenv PRECOMPILE_PREFIX_HEADER
>     setenv PRECOMP_DESTINATION_DIR /Users/kjb/WebKitStuff/ 
> JavaScriptCore.build/Deployment/JavaScriptCore.build/PrefixHeaders
>     setenv PREFIX_CFLAG_BASE
>     setenv PREFIX_FLAGS
>     setenv PREFIX_HEADER
>     setenv PREFIX_REFERENCE
>     setenv PRIVATE_HEADERS_FOLDER_PATH JavaScriptCore.framework/ 
> Versions/A/PrivateHeaders
>     setenv PRODUCT_NAME JavaScriptCore
>     setenv PRODUCT_SETTINGS_PATH /Users/kjb/JavaScriptCore/Info.plist
>     setenv PRODUCT_TYPE com.apple.product-type.framework
>     setenv PRODUCT_TYPE_CFLAGS
>     setenv PRODUCT_TYPE_CPLUSPLUSFLAGS
>     setenv PRODUCT_TYPE_HEADER_SEARCH_PATHS
>     setenv PROJECT JavaScriptCore
>     setenv PROJECT_DERIVED_FILE_DIR /Users/kjb/WebKitStuff/ 
> JavaScriptCore.build/DerivedSources
>     setenv PROJECT_DIR /Users/kjb/JavaScriptCore
>     setenv PROJECT_FILE_PATH /Users/kjb/JavaScriptCore/ 
> JavaScriptCore.pbproj
>     setenv PROJECT_NAME JavaScriptCore
>     setenv PROJECT_TEMP_DIR /Users/kjb/WebKitStuff/ 
> JavaScriptCore.build
>     setenv PUBLIC_HEADERS_FOLDER_PATH JavaScriptCore.framework/ 
> Versions/A/Headers
>     setenv RECURSIVE_SEARCH_PATHS_FOLLOW_SYMLINKS YES
>     setenv REMOVE_CVS_FROM_RESOURCES YES
>     setenv REMOVE_SVN_FROM_RESOURCES YES
>     setenv RETAIN_RAW_BINARIES
>     setenv REZ_COLLECTOR_DIR /Users/kjb/WebKitStuff/ 
> JavaScriptCore.build/Deployment/JavaScriptCore.build/ 
> ResourceManagerResources
>     setenv REZ_OBJECTS_DIR /Users/kjb/WebKitStuff/ 
> JavaScriptCore.build/Deployment/JavaScriptCore.build/ 
> ResourceManagerResources/Objects
>     setenv REZ_SEARCH_PATHS /Users/kjb/WebKitStuff/Deployment
>     setenv SCRIPTS_FOLDER_PATH JavaScriptCore.framework/Versions/A/ 
> Resources/Scripts
>     setenv SCRIPT_INPUT_FILE_0 kjs/create_hash_table
>     setenv SCRIPT_INPUT_FILE_1 kjs/array_object.cpp
>     setenv SCRIPT_INPUT_FILE_COUNT 2
>     setenv SCRIPT_OUTPUT_FILE_0 /Users/kjb/WebKitStuff/ 
> JavaScriptCore.build/Deployment/JavaScriptCore.build/DerivedSources/ 
> array_object.lut.h
>     setenv SCRIPT_OUTPUT_FILE_COUNT 1
>     setenv SDKROOT
>     setenv SECTORDER_FLAGS
>     setenv SED /usr/bin/sed
>     setenv SET_DIR_MODE_OWNER_GROUP YES
>     setenv SET_FILE_MODE_OWNER_GROUP NO
>     setenv SHARED_DERIVED_FILE_DIR /Users/kjb/WebKitStuff/ 
> Deployment/DerivedSources
>     setenv SHARED_FRAMEWORKS_FOLDER_PATH JavaScriptCore.framework/ 
> Versions/A/SharedFrameworks
>     setenv SHARED_PRECOMPS_DIR /Library/Caches/com.apple.Xcode.501/ 
> SharedPrecompiledHeaders
>     setenv SHARED_SUPPORT_FOLDER_PATH JavaScriptCore.framework/ 
> Versions/A/Resources
>     setenv SOURCE_ROOT /Users/kjb/JavaScriptCore
>     setenv SRCROOT /Users/kjb/JavaScriptCore
>     setenv STRIPFLAGS
>     setenv STRIP_INSTALLED_PRODUCT YES
>     setenv STYLE_LDFLAGS
>     setenv SYMBOL_HEADER
>     setenv SYMBOL_REPOSITORY
>     setenv SYMROOT /Users/kjb/WebKitStuff
>     setenv SYSTEM_ADMIN_APPS_DIR /Applications/Utilities
>     setenv SYSTEM_APPS_DIR /Applications
>     setenv SYSTEM_CORE_SERVICES_DIR /System/Library/CoreServices
>     setenv SYSTEM_DEMOS_DIR /Applications/Extras
>     setenv SYSTEM_DEVELOPER_APPS_DIR /Developer/Applications
>     setenv SYSTEM_DEVELOPER_DEMOS_DIR "/Developer/Applications/ 
> Utilities/Built Examples"
>     setenv SYSTEM_DEVELOPER_DIR /Developer
>     setenv SYSTEM_DEVELOPER_DOC_DIR "/Developer/ADC Reference Library"
>     setenv SYSTEM_DEVELOPER_EXECUTABLES_DIR
>     setenv SYSTEM_DEVELOPER_GRAPHICS_TOOLS_DIR "/Developer/ 
> Applications/Graphics Tools"
>     setenv SYSTEM_DEVELOPER_JAVA_TOOLS_DIR "/Developer/Applications/ 
> Java Tools"
>     setenv SYSTEM_DEVELOPER_PERFORMANCE_TOOLS_DIR "/Developer/ 
> Applications/Performance Tools"
>     setenv SYSTEM_DEVELOPER_RELEASENOTES_DIR "/Developer/ADC  
> Reference Library/releasenotes"
>     setenv SYSTEM_DEVELOPER_TOOLS /Developer/Tools
>     setenv SYSTEM_DEVELOPER_TOOLS_DOC_DIR "/Developer/ADC Reference  
> Library/documentation/DeveloperTools"
>     setenv SYSTEM_DEVELOPER_TOOLS_RELEASENOTES_DIR "/Developer/ADC  
> Reference Library/releasenotes/DeveloperTools"
>     setenv SYSTEM_DEVELOPER_UTILITIES_DIR /Developer/Applications/ 
> Utilities
>     setenv SYSTEM_DOCUMENTATION_DIR /Library/Documentation
>     setenv SYSTEM_LIBRARY_DIR /System/Library
>     setenv SYSTEM_LIBRARY_EXECUTABLES_DIR
>     setenv TARGETNAME JavaScriptCore
>     setenv TARGET_BUILD_DIR /Users/kjb/WebKitStuff/Deployment
>     setenv TARGET_NAME JavaScriptCore
>     setenv TARGET_TEMP_DIR /Users/kjb/WebKitStuff/ 
> JavaScriptCore.build/Deployment/JavaScriptCore.build
>     setenv TEMP_DIR /Users/kjb/WebKitStuff/JavaScriptCore.build/ 
> Deployment/JavaScriptCore.build
>     setenv TEMP_FILES_DIR /Users/kjb/WebKitStuff/ 
> JavaScriptCore.build/Deployment/JavaScriptCore.build
>     setenv TEMP_FILE_DIR /Users/kjb/WebKitStuff/ 
> JavaScriptCore.build/Deployment/JavaScriptCore.build
>     setenv TEMP_ROOT /Users/kjb/WebKitStuff
>     setenv UID 501
>     setenv UNLOCALIZED_RESOURCES_FOLDER_PATH  
> JavaScriptCore.framework/Versions/A/Resources
>     setenv UNSTRIPPED_PRODUCT NO
>     setenv USER kjb
>     setenv USER_APPS_DIR /Users/kjb/Applications
>     setenv USER_LIBRARY_DIR /Users/kjb/Library
>     setenv USE_DYNAMIC_NO_PIC YES
>     setenv USE_GCC3_PFE_SUPPORT
>     setenv VALID_ARCHS "m68k i386 sparc hppa ppc ppc7400 ppc970 ppc64"
>     setenv VERBOSE_PBXCP NO
>     setenv VERSIONING_STUB
>     setenv VERSIONING_SYSTEM
>     setenv VERSIONPLIST_PATH JavaScriptCore.framework/Versions/A/ 
> Resources/version.plist
>     setenv VERSIONS_FOLDER_PATH JavaScriptCore.framework/Versions
>     setenv VERSION_INFO_BUILDER kjb
>     setenv VERSION_INFO_EXPORT_DECL
>     setenv VERSION_INFO_PREFIX
>     setenv VERSION_INFO_STRING "\"@(#)PROGRAM:JavaScriptCore   
> PROJECT:JavaScriptCore-  DEVELOPER:kjb  BUILT:\" __DATE__  \" \"  
> __TIME__ \"\""
>     setenv VERSION_INFO_SUFFIX
>     setenv WARNING_CFLAGS "-Wall -W -Wcast-align -Wchar-subscripts - 
> Wformat-security -Wmissing-format-attribute -Wpointer-arith -Wwrite- 
> strings -Wno-format-y2k -Wno-unused-parameter -Wno-long-double"
>     setenv WARNING_LDFLAGS
>     setenv WRAPPER_EXTENSION framework
>     setenv WRAPPER_NAME JavaScriptCore.framework
>     setenv WRAPPER_PREFIX
>     setenv WRAPPER_SUFFIX .framework
>     setenv XCODE_APP_SUPPORT_DIR "/Library/Application Support/ 
> Apple/Developer Tools"
>     setenv YACC /usr/bin/yacc
>     setenv YACCFLAGS
>     /bin/sh -c /Users/kjb/WebKitStuff/JavaScriptCore.build/ 
> Deployment/JavaScriptCore.build/Script-93F1982F08245B92001E9ABC.sh
> Creating hashtable for kjs/array_object.cpp
>
> CpHeader /Users/kjb/WebKitStuff/Deployment/JavaScriptCore.framework/ 
> Versions/A/PrivateHeaders/array_object.h kjs/array_object.h
>     mkdir /Users/kjb/WebKitStuff/Deployment/ 
> JavaScriptCore.framework/Versions/A/PrivateHeaders
>     cd /Users/kjb/JavaScriptCore
>     /System/Library/PrivateFrameworks/DevToolsCore.framework/ 
> Resources/pbxcp -exclude .DS_Store -exclude CVS -exclude .svn - 
> strip-debug-symbols -resolve-src-symlinks /Users/kjb/JavaScriptCore/ 
> kjs/array_object.h /Users/kjb/WebKitStuff/Deployment/ 
> JavaScriptCore.framework/Versions/A/PrivateHeaders
>
> CompileC /Users/kjb/WebKitStuff/JavaScriptCore.build/Deployment/ 
> JavaScriptCore.build/Objects-normal/ppc/array_object.o kjs/ 
> array_object.cpp normal ppc c++ com.apple.compilers.gcc.4_0
>     mkdir /Users/kjb/WebKitStuff/JavaScriptCore.build/Deployment/ 
> JavaScriptCore.build/Objects-normal/ppc
>     cd /Users/kjb/JavaScriptCore
>     setenv MACOSX_DEPLOYMENT_TARGET 10.3
>     /usr/bin/gcc-4.0 -x c++ -arch ppc -pipe -Wno-trigraphs -fno- 
> exceptions -fno-rtti -fpascal-strings -fasm-blocks -Os -Werror - 
> Wnon-virtual-dtor -DNDEBUG -DAPPLE_CHANGES -DHAVE_CONFIG_H - 
> fmessage-length=0 -mtune=G4 -I/Users/kjb/WebKitStuff/ 
> JavaScriptCore.build/Deployment/JavaScriptCore.build/ 
> JavaScriptCore.hmap -Wall -W -Wcast-align -Wchar-subscripts - 
> Wformat-security -Wmissing-format-attribute -Wpointer-arith -Wwrite- 
> strings -Wno-format-y2k -Wno-unused-parameter -Wno-long-double -F/ 
> Users/kjb/WebKitStuff/Deployment -I/Users/kjb/WebKitStuff/ 
> Deployment/include -Iicu -I/Users/kjb/WebKitStuff/ 
> JavaScriptCore.build/Deployment/JavaScriptCore.build/DerivedSources  
> -include /Library/Caches/com.apple.Xcode.501/ 
> SharedPrecompiledHeaders/JavaScriptCorePrefix- 
> cqhdunkcirhucxcxnoknfcioinkc/JavaScriptCorePrefix.h -c /Users/kjb/ 
> JavaScriptCore/kjs/array_object.cpp -o /Users/kjb/WebKitStuff/ 
> JavaScriptCore.build/Deployment/JavaScriptCore.build/Objects-normal/ 
> ppc/array_object.o
>
> CompileC /Users/kjb/WebKitStuff/JavaScriptCore.build/Deployment/ 
> JavaScriptCore.build/Objects-normal/ppc/function_object.o kjs/ 
> function_object.cpp normal ppc c++ com.apple.compilers.gcc.4_0
>     mkdir /Users/kjb/WebKitStuff/JavaScriptCore.build/Deployment/ 
> JavaScriptCore.build/Objects-normal/ppc
>     cd /Users/kjb/JavaScriptCore
>     setenv MACOSX_DEPLOYMENT_TARGET 10.3
>     /usr/bin/gcc-4.0 -x c++ -arch ppc -pipe -Wno-trigraphs -fno- 
> exceptions -fno-rtti -fpascal-strings -fasm-blocks -Os -Werror - 
> Wnon-virtual-dtor -DNDEBUG -DAPPLE_CHANGES -DHAVE_CONFIG_H - 
> fmessage-length=0 -mtune=G4 -I/Users/kjb/WebKitStuff/ 
> JavaScriptCore.build/Deployment/JavaScriptCore.build/ 
> JavaScriptCore.hmap -Wall -W -Wcast-align -Wchar-subscripts - 
> Wformat-security -Wmissing-format-attribute -Wpointer-arith -Wwrite- 
> strings -Wno-format-y2k -Wno-unused-parameter -Wno-long-double -F/ 
> Users/kjb/WebKitStuff/Deployment -I/Users/kjb/WebKitStuff/ 
> Deployment/include -Iicu -I/Users/kjb/WebKitStuff/ 
> JavaScriptCore.build/Deployment/JavaScriptCore.build/DerivedSources  
> -include /Library/Caches/com.apple.Xcode.501/ 
> SharedPrecompiledHeaders/JavaScriptCorePrefix- 
> cqhdunkcirhucxcxnoknfcioinkc/JavaScriptCorePrefix.h -c /Users/kjb/ 
> JavaScriptCore/kjs/function_object.cpp -o /Users/kjb/WebKitStuff/ 
> JavaScriptCore.build/Deployment/JavaScriptCore.build/Objects-normal/ 
> ppc/function_object.o
>
> CompileC /Users/kjb/WebKitStuff/JavaScriptCore.build/Deployment/ 
> JavaScriptCore.build/Objects-normal/ppc/grammar.o /Users/kjb/ 
> WebKitStuff/JavaScriptCore.build/Deployment/JavaScriptCore.build/ 
> DerivedSources/grammar.cpp normal ppc c++ com.apple.compilers.gcc.4_0
>     mkdir /Users/kjb/WebKitStuff/JavaScriptCore.build/Deployment/ 
> JavaScriptCore.build/Objects-normal/ppc
>     cd /Users/kjb/JavaScriptCore
>     setenv MACOSX_DEPLOYMENT_TARGET 10.3
>     /usr/bin/gcc-4.0 -x c++ -arch ppc -pipe -Wno-trigraphs -fno- 
> exceptions -fno-rtti -fpascal-strings -fasm-blocks -Os -Werror - 
> Wnon-virtual-dtor -DNDEBUG -DAPPLE_CHANGES -DHAVE_CONFIG_H - 
> fmessage-length=0 -mtune=G4 -I/Users/kjb/WebKitStuff/ 
> JavaScriptCore.build/Deployment/JavaScriptCore.build/ 
> JavaScriptCore.hmap -Wall -W -Wcast-align -Wchar-subscripts - 
> Wformat-security -Wmissing-format-attribute -Wpointer-arith -Wwrite- 
> strings -Wno-format-y2k -Wno-unused-parameter -Wno-long-double -F/ 
> Users/kjb/WebKitStuff/Deployment -I/Users/kjb/WebKitStuff/ 
> Deployment/include -Iicu -I/Users/kjb/WebKitStuff/ 
> JavaScriptCore.build/Deployment/JavaScriptCore.build/DerivedSources  
> -include /Library/Caches/com.apple.Xcode.501/ 
> SharedPrecompiledHeaders/JavaScriptCorePrefix- 
> cqhdunkcirhucxcxnoknfcioinkc/JavaScriptCorePrefix.h -c /Users/kjb/ 
> WebKitStuff/JavaScriptCore.build/Deployment/JavaScriptCore.build/ 
> DerivedSources/grammar.cpp -o /Users/kjb/WebKitStuff/ 
> JavaScriptCore.build/Deployment/JavaScriptCore.build/Objects-normal/ 
> ppc/grammar.o
> cc1plus: warnings being treated as errors
> /Users/kjb/WebKitStuff/JavaScriptCore.build/Deployment/ 
> JavaScriptCore.build/DerivedSources/grammar.cpp: In function 'int  
> kjsyyparse()':
> /Users/kjb/WebKitStuff/JavaScriptCore.build/Deployment/ 
> JavaScriptCore.build/DerivedSources/grammar.cpp:1649: warning:  
> comparison of unsigned expression >= 0 is always true
> ** BUILD FAILED **
> [powerbookg4:~] kjb%
>
>
> I would appreciate any help!
>
> thanks!
>
> _______________________________________________
> webkit-dev mailing list
> webkit-dev@opendarwin.org
> http://www.opendarwin.org/mailman/listinfo/webkit-dev
>


From maillists at coderus.com  Thu Jun 30 10:17:03 2005
From: maillists at coderus.com (Mark Thomas)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] Hi
Message-ID: <BEE9E79F.1305D%maillists@coderus.com>

Hi,
  I was wondering if anybody was here, as nothing has arrived in my inbox ?,
I also had a question which I couldn't work out from the doc's, If I build
the webkit will it replace the one which is in the Frameworks directory ?

Thanks
Mark.


From finlay.dobbie at gmail.com  Thu Jun 30 10:39:49 2005
From: finlay.dobbie at gmail.com (Finlay Dobbie)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] Hi
In-Reply-To: <BEE9E79F.1305D%maillists@coderus.com>
References: <BEE9E79F.1305D%maillists@coderus.com>
Message-ID: <ab20c92d05063010392cca6ee2@mail.gmail.com>

On 6/30/05, Mark Thomas <maillists@coderus.com> wrote:
> I also had a question which I couldn't work out from the doc's, If I build
> the webkit will it replace the one which is in the Frameworks directory ?

Of course not. Unless you're root you don't even have permissions to
write to /System/Library/Frameworks, and you shouldn't be building
things as root.

Have you read <http://webkit.opendarwin.org/building/build.html>? It
clearly tells you there how to run Safari with your built WebKit.

 -- Finlay

From mediaright at gmail.com  Thu Jun 30 16:03:53 2005
From: mediaright at gmail.com (Jamie Diamond)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] Nightly Builds
Message-ID: <907E332D-2481-4290-946F-513E2E11E505@gmail.com>

Has anyone considered setting up a nightly build system? This could  
easily be maintained by one of the main WebKit devs or anyone else  
reliable for that matter. It would take the CVS code from that day,  
build it, and put it up on the server so anyone in the dev community  
could download and test. This would allow for a much greater testing  
and QA community. You would no longer have to be a building whiz to  
pitch in and help test and file. Also, for anyone who uses Firefix or  
Caminknight, the maker of these two programs has one ready for the  
day Safari does nightly builds. We just need the URL. This program  
could, when installed, automatically fetch the latest nightly build  
and install it on a tester's machine. Anyone wiling to help implement  
and maintain nightly builds (not me, I'm far from knowledgeful enough  
to). Thanks.


From opendarwin.org at bdash.net.nz  Thu Jun 30 19:11:47 2005
From: opendarwin.org at bdash.net.nz (Mark Rowe)
Date: Tue Oct  9 17:52:55 2007
Subject: [webkit-dev] Nightly Builds
In-Reply-To: <907E332D-2481-4290-946F-513E2E11E505@gmail.com>
References: <907E332D-2481-4290-946F-513E2E11E505@gmail.com>
Message-ID: <CE2FFDA4-AC10-418D-892E-31FB7F2F68C5@bdash.net.nz>


On 1/07/2005, at 11:03 , Jamie Diamond wrote:

> Has anyone considered setting up a nightly build system? This could  
> easily be maintained by one of the main WebKit devs or anyone else  
> reliable for that matter. It would take the CVS code from that day,  
> build it, and put it up on the server so anyone in the dev  
> community could download and test. This would allow for a much  
> greater testing and QA community. You would no longer have to be a  
> building whiz to pitch in and help test and file. Also, for anyone  
> who uses Firefix or Caminknight, the maker of these two programs  
> has one ready for the day Safari does nightly builds. We just need  
> the URL. This program could, when installed, automatically fetch  
> the latest nightly build and install it on a tester's machine.  
> Anyone wiling to help implement and maintain nightly builds (not  
> me, I'm far from knowledgeful enough to). Thanks.

I've just thrown together a script to build + upload WebKit.  With  
the wonders of launchd, it should execute daily at 1600 NZST (0400  
UTC).  It uploads a disk image containing the built frameworks + a  
stub application to <http://bdash.net.nz/files/webkit/nightly/Latest- 
WebKit-CVS.dmg>.  Previous versions will be available in the <http:// 
bdash.net.nz/files/webkit/nightly/> directory.

Hope this helps,

Mark Rowe
<http://bdash.net.nz/>

>
> _______________________________________________
> webkit-dev mailing list
> webkit-dev@opendarwin.org
> http://www.opendarwin.org/mailman/listinfo/webkit-dev
>


From opendarwin.org at bdash.net.nz  Thu Jun 30 19:16:29 2005
From: opendarwin.org at bdash.net.nz (Mark Rowe)
Date: Tue Oct  9 17:52:56 2007
Subject: [webkit-dev] Nightly Builds
In-Reply-To: <CE2FFDA4-AC10-418D-892E-31FB7F2F68C5@bdash.net.nz>
References: <907E332D-2481-4290-946F-513E2E11E505@gmail.com>
	<CE2FFDA4-AC10-418D-892E-31FB7F2F68C5@bdash.net.nz>
Message-ID: <721C5A1F-F5FB-4E01-BCC3-AA30004BF6C7@bdash.net.nz>


On 1/07/2005, at 14:11 , Mark Rowe wrote:
> On 1/07/2005, at 11:03 , Jamie Diamond wrote:
>
>> Has anyone considered setting up a nightly build system? This  
>> could easily be maintained by one of the main WebKit devs or  
>> anyone else reliable for that matter. It would take the CVS code  
>> from that day, build it, and put it up on the server so anyone in  
>> the dev community could download and test. This would allow for a  
>> much greater testing and QA community. You would no longer have to  
>> be a building whiz to pitch in and help test and file. Also, for  
>> anyone who uses Firefix or Caminknight, the maker of these two  
>> programs has one ready for the day Safari does nightly builds. We  
>> just need the URL. This program could, when installed,  
>> automatically fetch the latest nightly build and install it on a  
>> tester's machine. Anyone wiling to help implement and maintain  
>> nightly builds (not me, I'm far from knowledgeful enough to). Thanks.
>>
>
> I've just thrown together a script to build + upload WebKit.  With  
> the wonders of launchd, it should execute daily at 1600 NZST (0400  
> UTC).  It uploads a disk image containing the built frameworks + a  
> stub application to <http://bdash.net.nz/files/webkit/nightly/ 
> Latest-WebKit-CVS.dmg>.  Previous versions will be available in the  
> <http://bdash.net.nz/files/webkit/nightly/> directory.

Just to be clear, these builds will only run on OS X 10.4.

Regards,

Mark Rowe
<http://bdash.net.nz/>

From eseidel at apple.com  Thu Jun 30 19:25:09 2005
From: eseidel at apple.com (Eric Seidel)
Date: Tue Oct  9 17:52:56 2007
Subject: [webkit-dev] Nightly Builds
In-Reply-To: <721C5A1F-F5FB-4E01-BCC3-AA30004BF6C7@bdash.net.nz>
References: <907E332D-2481-4290-946F-513E2E11E505@gmail.com>
	<CE2FFDA4-AC10-418D-892E-31FB7F2F68C5@bdash.net.nz>
	<721C5A1F-F5FB-4E01-BCC3-AA30004BF6C7@bdash.net.nz>
Message-ID: <E29FCD43-AFC6-4A82-8C78-5E9FF68D628E@apple.com>

Curious as to why they will only run on 10.4?  Doesn't webkit target  
10.3?

-eric

On Jun 30, 2005, at 7:16 PM, Mark Rowe wrote:

>
> On 1/07/2005, at 14:11 , Mark Rowe wrote:
>
>> On 1/07/2005, at 11:03 , Jamie Diamond wrote:
>>
>>
>>> Has anyone considered setting up a nightly build system? This  
>>> could easily be maintained by one of the main WebKit devs or  
>>> anyone else reliable for that matter. It would take the CVS code  
>>> from that day, build it, and put it up on the server so anyone in  
>>> the dev community could download and test. This would allow for a  
>>> much greater testing and QA community. You would no longer have  
>>> to be a building whiz to pitch in and help test and file. Also,  
>>> for anyone who uses Firefix or Caminknight, the maker of these  
>>> two programs has one ready for the day Safari does nightly  
>>> builds. We just need the URL. This program could, when installed,  
>>> automatically fetch the latest nightly build and install it on a  
>>> tester's machine. Anyone wiling to help implement and maintain  
>>> nightly builds (not me, I'm far from knowledgeful enough to).  
>>> Thanks.
>>>
>>>
>>
>> I've just thrown together a script to build + upload WebKit.  With  
>> the wonders of launchd, it should execute daily at 1600 NZST (0400  
>> UTC).  It uploads a disk image containing the built frameworks + a  
>> stub application to <http://bdash.net.nz/files/webkit/nightly/ 
>> Latest-WebKit-CVS.dmg>.  Previous versions will be available in  
>> the <http://bdash.net.nz/files/webkit/nightly/> directory.
>>
>
> Just to be clear, these builds will only run on OS X 10.4.
>
> Regards,
>
> Mark Rowe
> <http://bdash.net.nz/>
> _______________________________________________
> webkit-dev mailing list
> webkit-dev@opendarwin.org
> http://www.opendarwin.org/mailman/listinfo/webkit-dev
>


From opendarwin.org at bdash.net.nz  Thu Jun 30 19:44:03 2005
From: opendarwin.org at bdash.net.nz (Mark Rowe)
Date: Tue Oct  9 17:52:56 2007
Subject: [webkit-dev] Nightly Builds
In-Reply-To: <E29FCD43-AFC6-4A82-8C78-5E9FF68D628E@apple.com>
References: <907E332D-2481-4290-946F-513E2E11E505@gmail.com>
	<CE2FFDA4-AC10-418D-892E-31FB7F2F68C5@bdash.net.nz>
	<721C5A1F-F5FB-4E01-BCC3-AA30004BF6C7@bdash.net.nz>
	<E29FCD43-AFC6-4A82-8C78-5E9FF68D628E@apple.com>
Message-ID: <FCB827CD-657F-4E2B-95CC-43D08B29F049@bdash.net.nz>


On 1/07/2005, at 14:25 , Eric Seidel wrote:

> Curious as to why they will only run on 10.4?  Doesn't webkit  
> target 10.3?

The biggest reason is that I've not had a chance to test it on  
10.3 :-)  I've also heard some talk that a new version of  
libWebKitSystemInterface.a would be required for the latest CVS  
source to work on 10.3.   If I'm wrong about that point, the  
frameworks may work on 10.3 but the stub launcher that is included  
definitely won't as I didn't bother to build it for 10.3.

Regards,

Mark Rowe
<http://bdash.net.nz/>

From justin at xiondigital.net  Thu Jun 30 20:52:58 2005
From: justin at xiondigital.net (Justin Haygood)
Date: Tue Oct  9 17:52:56 2007
Subject: [webkit-dev] Some thoughts on cross-platformness
Message-ID: <42C4BE1A.9050605@xiondigital.net>

My suggestion:

All common and win32 KWQ C++ code should use .cpp instead of .mm, this 
makes it alot easier to work with on Win32 (I don't know about other 
platforms, but Visual C++ automatically knows the .cpp and .cxx 
extensions, but has no idea what the heck .mm is)

From timothy at hatcher.name  Thu Jun 30 21:04:25 2005
From: timothy at hatcher.name (Timothy Hatcher)
Date: Tue Oct  9 17:52:56 2007
Subject: [webkit-dev] Some thoughts on cross-platformness
In-Reply-To: <42C4BE1A.9050605@xiondigital.net>
References: <42C4BE1A.9050605@xiondigital.net>
Message-ID: <3250FE26-C9D8-4783-99ED-E9F9DB0F6BF5@hatcher.name>

Anything with the the extension .mm would contain some amount of C++  
and ObjC, these are Objective-C++ files and are used to bridge  
between the two languages. I doubt much of the code in these files is  
portable.

? Timothy Hatcher ? colloquy.info

On Jun 30, 2005, at 11:52 PM, Justin Haygood wrote:

> My suggestion:
>
> All common and win32 KWQ C++ code should use .cpp instead of .mm,  
> this makes it alot easier to work with on Win32 (I don't know about  
> other platforms, but Visual C++ automatically knows the .cpp  
> and .cxx extensions, but has no idea what the heck .mm is)
> _______________________________________________
> webkit-dev mailing list
> webkit-dev@opendarwin.org
> http://www.opendarwin.org/mailman/listinfo/webkit-dev
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.macosforge.org/pipermail/webkit-dev/attachments/20050701/1566c2fe/attachment.html
From kjb525 at mac.com  Thu Jun 30 21:06:37 2005
From: kjb525 at mac.com (Kevin Burnett)
Date: Tue Oct  9 17:52:56 2007
Subject: [webkit-dev] problems compiling webkit
In-Reply-To: <7AE30BC6-7710-4C92-9F66-5B21B10DC1A7@opendarwin.org>
References: <35545D43-0794-4CBE-A829-B4366099B862@mac.com>
	<7AE30BC6-7710-4C92-9F66-5B21B10DC1A7@opendarwin.org>
Message-ID: <3A6AF106-CD93-4259-8886-2E093BE57AA7@mac.com>


On Jun 30, 2005, at 12:48 AM, Toby Peterson wrote:

> Do you, by any chance, have bison 2.0 installed?
>
> - Toby

Actually, yes, I have it installed thru Fink.  Is that a problem?

- Kevin


From mjs at apple.com  Thu Jun 30 22:52:58 2005
From: mjs at apple.com (Maciej Stachowiak)
Date: Tue Oct  9 17:52:56 2007
Subject: [webkit-dev] Some thoughts on cross-platformness
In-Reply-To: <3250FE26-C9D8-4783-99ED-E9F9DB0F6BF5@hatcher.name>
References: <42C4BE1A.9050605@xiondigital.net>
	<3250FE26-C9D8-4783-99ED-E9F9DB0F6BF5@hatcher.name>
Message-ID: <B915EDDE-EE54-4258-9335-639C041C6916@apple.com>


On Jun 30, 2005, at 9:04 PM, Timothy Hatcher wrote:

> Anything with the the extension .mm would contain some amount of C+ 
> + and ObjC, these are Objective-C++ files and are used to bridge  
> between the two languages. I doubt much of the code in these files  
> is portable.


Actually, a number of the .mm files in kwq use no Objective-C at all  
(or just a trivial amount in functions to convert to/from ObjC  
types). They should indeed be renamed to .cpp.

Regards,
Maciej

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.macosforge.org/pipermail/webkit-dev/attachments/20050630/ae31d6e2/attachment.html
From mjs at apple.com  Thu Jun 30 22:56:05 2005
From: mjs at apple.com (Maciej Stachowiak)
Date: Tue Oct  9 17:52:56 2007
Subject: [webkit-dev] Nightly Builds
In-Reply-To: <E29FCD43-AFC6-4A82-8C78-5E9FF68D628E@apple.com>
References: <907E332D-2481-4290-946F-513E2E11E505@gmail.com>
	<CE2FFDA4-AC10-418D-892E-31FB7F2F68C5@bdash.net.nz>
	<721C5A1F-F5FB-4E01-BCC3-AA30004BF6C7@bdash.net.nz>
	<E29FCD43-AFC6-4A82-8C78-5E9FF68D628E@apple.com>
Message-ID: <C0D00053-84DD-4D01-8A97-A2DC86E0FDB7@apple.com>


On Jun 30, 2005, at 7:25 PM, Eric Seidel wrote:

> Curious as to why they will only run on 10.4?  Doesn't webkit  
> target 10.3?

libWebKitSystemInterface.a is highly system-dependent and will not  
work on anything earlier than 10.4.

We are actually planning on converting the projects to Xcode 2.1  
soon, which is good news for you Xcode 2.1 users, but bad news for  
those of you on Panther, because we'll probably have to give up on  
making the code buildable on Panther.

Regards,
Maciej


From eseidel at apple.com  Thu Jun 30 23:58:22 2005
From: eseidel at apple.com (Eric Seidel)
Date: Tue Oct  9 17:52:56 2007
Subject: [webkit-dev] Some thoughts on cross-platformness
In-Reply-To: <B915EDDE-EE54-4258-9335-639C041C6916@apple.com>
References: <42C4BE1A.9050605@xiondigital.net>
	<3250FE26-C9D8-4783-99ED-E9F9DB0F6BF5@hatcher.name>
	<B915EDDE-EE54-4258-9335-639C041C6916@apple.com>
Message-ID: <D6428DC0-FBE4-4C0C-BE4E-D956971C9105@apple.com>

Best to do after the conversion to subversion...

-eric

On Jun 30, 2005, at 10:52 PM, Maciej Stachowiak wrote:

>
> On Jun 30, 2005, at 9:04 PM, Timothy Hatcher wrote:
>
>> Anything with the the extension .mm would contain some amount of C+ 
>> + and ObjC, these are Objective-C++ files and are used to bridge  
>> between the two languages. I doubt much of the code in these files  
>> is portable.
>
>
> Actually, a number of the .mm files in kwq use no Objective-C at  
> all (or just a trivial amount in functions to convert to/from ObjC  
> types). They should indeed be renamed to .cpp.
>
> Regards,
> Maciej
>
> _______________________________________________
> webkit-dev mailing list
> webkit-dev@opendarwin.org
> http://www.opendarwin.org/mailman/listinfo/webkit-dev
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.macosforge.org/pipermail/webkit-dev/attachments/20050630/b5e96b93/attachment.html
